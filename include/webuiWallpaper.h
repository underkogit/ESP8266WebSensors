
 
 
const char* webuiWallpaper = R"rawliteral(
function push(n,t,i){n.data.labels.push(t);n.data.datasets.forEach(n=>{const t=n.label in i?i[n.label]:null;n.data.push(t);n.data.length>maxPoints&&n.data.shift()});n.data.labels.length>maxPoints&&n.data.labels.shift();n.update("none")}function parse(n){const t=(new Date).toLocaleTimeString(),i={sht31:n.sht31?.temperature?.value??null,aht20:n.aht20?.temperature?.value??null,bmp280:n.bmp280?.temperature?.value??null},r={sht31:n.sht31?.humidity?.value??null,aht20:n.aht20?.humidity?.value??null},u={bmp280:n.bmp280?.pressure?.value??null};return{ts:t,temps:i,hums:r,press:u}}async function fetchAndUpdate(){try{const t=await fetch(API_URL,{cache:"no-store"});if(!t.ok)throw new Error("HTTP "+t.status);const i=await t.json(),{ts:n,temps:r,hums:u,press:f}=parse(i);push(tempChart,n,r);push(humChart,n,u);push(presChart,n,f);statusEl.textContent="Последнее: "+n;statusEl.style.color="#333"}catch(n){statusEl.textContent="Ошибка: "+n.message;statusEl.style.color="red"}}function start(){running||(API_URL=apiInput.value,intervalMs=Number(intervalInput.value)||500,maxPoints=Number(maxPointsInput.value)||100,running=!0,statusEl.textContent="Запущено",statusEl.style.color="green",fetchAndUpdate(),timer=setInterval(fetchAndUpdate,intervalMs))}function stop(){running&&(running=!1,clearInterval(timer),timer=null,statusEl.textContent="Остановлено",statusEl.style.color="#666")}!DOCTYPE;html><html;lang=ru><meta;charset=utf-8><meta;name=viewport;content="width=device-width,initial-scale=1"><title>Real-time;Sensors;Charts</title><h2>Графики;датчиков;в;реальном;времени</h2><div class=controls><button id=startBtn>Старт</button><button;id=stopBtn>Стоп</button> <label>Интервал (мс):<input id=intervalInput type=number value=500 style=width:100px></label><label>Точек;input;id=maxPointsInput;type=number;value=100;style=width;80px></label> <label>API:<input id=apiInput type=text value=http://192.168;.11/api/sensors;style=width;300px></label> <span id=status style=margin-left:8px;color:#666>Ожидание</span></div><div class=grid><div class=card><h3>Температура (°C)</h3><canvas;id=tempChart></canvas></div><div;class{}card><h3>Влажность(%)</h3><canvas id=humChart></canvas></div><div class=card style=grid-column:1/-1><h3>Давление(гПа)</h3><canvas id=presChart></canvas></div></div><script>function(n,t){return{label:n,data:[],borderColor:t,backgroundColor:t,tension:.25,pointRadius:1,borderWidth:2,spanGaps:!1,fill:!1}};!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(n="undefined"!=typeof globalThis?globalThis:n||self).Chart=t()}(this,function(){"use strict";function ft(){}function t(n){return null==n}function e(n){if(Array.isArray&&Array.isArray(n))return!0;const t=Object.prototype.toString.call(n);return"[object"===t.slice(0,7)&&"Array]"===t.slice(-6)}function i(n){return null!==n&&"[object Object]"===Object.prototype.toString.call(n)}function h(n){return("number"==typeof n||n instanceof Number)&&isFinite(+n)}function k(n,t){return h(n)?n:t}function n(n,t){return void 0===n?t:n}function f(n,t,i){if(n&&"function"==typeof n.call)return n.apply(i,t)}function u(n,t,r,u){let f,o,s;if(e(n))if(o=n.length,u)for(f=o-1;f>=0;f--)t.call(r,n[f],f);else for(f=0;f<o;f++)t.call(r,n[f],f);else if(i(n))for(s=Object.keys(n),o=s.length,f=0;f<o;f++)t.call(r,n[s[f]],s[f])}function or(n,t){let i,f,r,u;if(!n||!t||n.length!==t.length)return!1;for(i=0,f=n.length;i<f;++i)if(r=n[i],u=t[i],r.datasetIndex!==u.datasetIndex||r.index!==u.index)return!1;return!0}function sr(n){if(e(n))return n.map(sr);if(i(n)){const r=Object.create(null),i=Object.keys(n),u=i.length;let t=0;for(;t<u;++t)r[i[t]]=sr(n[i[t]]);return r}return n}function ih(n){return-1===["__proto__","prototype","constructor"].indexOf(n)}function rh(n,t,r,u){if(ih(n)){const e=t[n],f=r[n];i(e)&&i(f)?pi(e,f,u):t[n]=sr(f)}}function pi(n,t,r){const f=e(t)?t:[t],o=f.length;if(!i(n))return n;const s=(r=r||{}).merger||rh;let u;for(let t=0;t<o;++t)if(u=f[t],i(u)){const t=Object.keys(u);for(let i=0,f=t.length;i<f;++i)s(t[i],n,u,r)}return n}function wi(n,t){return pi(n,t,{merger:uh})}function uh(n,t,r){if(ih(n)){const f=t[n],u=r[n];i(f)&&i(u)?wi(f,u):Object.prototype.hasOwnProperty.call(t,n)||(t[n]=sr(u))}}function fh(n){const r=n.split("."),i=[];let t="";for(const n of r)t+=n,t.endsWith("\\")?t=t.slice(0,-1)+".":(i.push(t),t="");return i}function lt(n,t){const i=sy[t]||(sy[t]=function(n){const t=fh(n);return n=>{for(const i of t){if(""===i)break;n=n&&n[i]}return n}}(t));return i(n)}function fu(n){return n.charAt(0).toUpperCase()+n.slice(1)}function eh(n){return"mouseup"===n.type||"click"===n.type||"contextmenu"===n.type}function bi(n,t,i){return Math.abs(n-t)<i}function ie(n){const i=Math.round(n);n=bi(n,i,n/1e3)?i:n;const r=Math.pow(10,Math.floor(wt(n))),t=n/r;return(t<=1?1:t<=2?2:t<=5?5:10)*r}function oh(n){const i=[],r=Math.sqrt(n);let t;for(t=1;t<r;t++)n%t==0&&(i.push(t),i.push(n/t));return r===(0|r)&&i.push(r),i.sort((n,t)=>n-t).pop(),i}function oi(n){return!function(n){return"symbol"==typeof n||"object"==typeof n&&null!==n&&!(Symbol.toPrimitive in n||"toString"in n||"valueOf"in n)}(n)&&!isNaN(parseFloat(n))&&isFinite(n)}function sh(n,t){const i=Math.round(n);return i-t<=n&&i+t>=n}function re(n,t,i){let r,f,u;for(r=0,f=n.length;r<f;r++)u=n[r][i],isNaN(u)||(t.min=Math.min(t.min,u),t.max=Math.max(t.max,u))}function nt(n){return n*(r/180)}function eu(n){return n*(180/r)}function ue(n){if(h(n)){let t=1,i=0;for(;Math.round(n*t)/t!==n;)t*=10,i++;return i}}function fe(n,t){const i=t.x-n.x,u=t.y-n.y,e=Math.sqrt(i*i+u*u);let f=Math.atan2(u,i);return f<-.5*r&&(f+=o),{angle:f,distance:e}}function ou(n,t){return Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2))}function hh(n,t){return(n-t+hy)%o-r}function p(n){return(n%o+o)%o}function ki(n,t,i,r){const u=p(n),f=p(t),e=p(i),o=p(f-u),s=p(e-u),h=p(u-f),c=p(u-e);return u===f||u===e||r&&f===e||o>s&&h<c}function v(n,t,i){return Math.max(t,Math.min(i,n))}function ch(n){return v(n,-32768,32767)}function et(n,t,i,r=1e-6){return n>=Math.min(t,i)-r&&n<=Math.max(t,i)+r}function su(n,t,i){i=i||(i=>n[i]<t);let r,u=n.length-1,f=0;for(;u-f>1;)r=f+u>>1,i(r)?f=r:u=r;return{lo:f,hi:u}}function lh(n,t,i){let r=0,u=n.length;for(;r<u&&n[r]<t;)r++;for(;u>r&&n[u-1]>i;)u--;return r>0||u<n.length?n.slice(r,u):n}function ah(n,t){n._chartjs?n._chartjs.listeners.push(t):(Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),ay.forEach(t=>{const i="_onData"+fu(t),r=n[t];Object.defineProperty(n,t,{configurable:!0,enumerable:!1,value(...t){const u=r.apply(this,t);return n._chartjs.listeners.forEach(n=>{"function"==typeof n[i]&&n[i](...t)}),u}})}))}function ee(n,t){const i=n._chartjs;if(i){const r=i.listeners,u=r.indexOf(t);-1!==u&&r.splice(u,1);r.length>0||(ay.forEach(t=>{delete n[t]}),delete n._chartjs)}}function oe(n){const t=new Set(n);return t.size===n.length?n:Array.from(t)}function se(n,t){let r=[],i=!1;return function(...u){r=u;i||(i=!0,ls.call(window,()=>{i=!1,n.apply(t,r)}))}}function vh(n,t){let i;return function(...r){return t?(clearTimeout(i),i=setTimeout(n,t,r)):n.apply(this,r),t}}function he(n,i,r){const f=i.length;let u=0,e=f;if(n._sorted){const{iScale:o,vScale:c,_parsed:s}=n,l=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null,h=o.axis,{min:a,max:y,minDefined:p,maxDefined:w}=o.getUserBounds();if(p){if(u=Math.min(ht(s,h,a).lo,r?f:ht(i,h,o.getPixelForValue(a)).lo),l){const n=s.slice(0,u+1).reverse().findIndex(n=>!t(n[c.axis]));u-=Math.max(0,n)}u=v(u,0,f-1)}if(w){let n=Math.max(ht(s,o.axis,y,!0).hi+1,r?0:ht(i,h,o.getPixelForValue(y),!0).hi+1);if(l){const i=s.slice(n-1).findIndex(n=>!t(n[c.axis]));n+=Math.max(0,i)}e=v(n,u,f)-u}else e=f-u}return{start:u,count:e}}function ce(n){const{xScale:i,yScale:r,_scaleRanges:t}=n,u={xmin:i.min,xmax:i.max,ymin:r.min,ymax:r.max};if(!t)return n._scaleRanges=u,!0;const f=t.xmin!==i.min||t.xmax!==i.max||t.ymin!==r.min||t.ymax!==r.max;return Object.assign(t,u),f}function hr(n){return n+.5|0}function cr(n){return fi(hr(2.55*n),0,255)}function kt(n){return fi(hr(255*n),0,255)}function at(n){return fi(hr(n/2.55)/100,0,1)}function yh(n){return fi(hr(100*n),0,100)}function iw(n){var t=(n=>lf(n.r)&&lf(n.g)&&lf(n.b)&&lf(n.a))(n)?bk:kk;if(n)return"#"+t(n.r)+t(n.g)+t(n.b)+((n,t)=>n<255?t(n):"")(n.a,t)}function ph(n,t,i){const u=t*Math.min(i,1-i),r=(t,r=(t+n/30)%12)=>i-u*Math.max(Math.min(r-3,9-r,1),-1);return[r(0),r(8),r(4)]}function rw(n,t,i){const r=(r,u=(r+n/60)%6)=>i-i*t*Math.max(Math.min(u,4-u,1),0);return[r(5),r(3),r(1)]}function uw(n,t,i){const u=ph(n,1,.5);let r;for(t+i>1&&(r=1/(t+i),t*=r,i*=r),r=0;r<3;r++)u[r]*=1-t-i,u[r]+=t;return u}function le(n){const f=n.r/255,e=n.g/255,o=n.b/255,t=Math.max(f,e,o),i=Math.min(f,e,o),s=(t+i)/2;let r,h,u;return t!==i&&(u=t-i,h=s>.5?u/(2-t-i):u/(t+i),r=function(n,t,i,r,u){return n===u?(t-i)/r+(t<i?6:0):t===u?(i-n)/r+2:(n-t)/r+4}(f,e,o,u,t),r=60*r+.5),[0|r,h||0,s]}function ae(n,t,i,r){return(Array.isArray(t)?n(t[0],t[1],t[2]):n(t,i,r)).map(kt)}function ve(n,t,i){return ae(ph,n,t,i)}function wh(n){return(n%360+360)%360}function fw(n){const t=dk.exec(n);let i,r=255;if(t){t[5]!==i&&(r=t[6]?cr(+t[5]):kt(+t[5]));const n=wh(+t[2]),u=+t[3]/100,f=+t[4]/100;return i="hwb"===t[1]?function(n,t,i){return ae(uw,n,t,i)}(n,u,f):"hsv"===t[1]?function(n,t,i){return ae(rw,n,t,i)}(n,u,f):ve(n,u,f),{r:i[0],g:i[1],b:i[2],a:r}}}function ew(n){af||(af=function(){const u={},f=Object.keys(py),e=Object.keys(yy);let t,i,n,o,r;for(t=0;t<f.length;t++){for(o=r=f[t],i=0;i<e.length;i++)n=e[i],r=r.replace(n,yy[n]);n=parseInt(py[o],16);u[r]=[n>>16&255,n>>8&255,255&n]}return u}(),af.transparent=[0,0,0,0]);const t=af[n.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:4===t.length?t[3]:255}}function hu(n,t,i){if(n){let r=le(n);r[t]=Math.max(0,Math.min(r[t]+r[t]*i,0===t?360:1));r=ve(r);n.r=r[0];n.g=r[1];n.b=r[2]}}function bh(n,t){return n?Object.assign(t||{},n):n}function kh(n){var t={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(t={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(t.a=kt(n[3]))):(t=bh(n,{r:0,g:0,b:0,a:1})).a=kt(t.a),t}function ow(n){return"r"===n.charAt(0)?function(n){const t=gk.exec(n);let i,r,u,f=255;if(t){if(t[7]!==i){const n=+t[7];f=t[8]?cr(n):fi(255*n,0,255)}return i=+t[1],r=+t[3],u=+t[5],i=255&(t[2]?cr(i):fi(i,0,255)),r=255&(t[4]?cr(r):fi(r,0,255)),u=255&(t[6]?cr(u):fi(u,0,255)),{r:i,g:r,b:u,a:f}}}(n):fw(n)}function cu(n){if(n&&"object"==typeof n){const t=n.toString();return"[object CanvasPattern]"===t||"[object CanvasGradient]"===t}return!1}function ye(n){return cu(n)?n:new vf(n)}function lu(n){return cu(n)?n:new vf(n).saturate(.5).darken(.1).hexString()}function di(n,t,i){return function(n,t){t=t||{};const r=n+JSON.stringify(t);let i=wy.get(r);return i||(i=new Intl.NumberFormat(n,t),wy.set(r,i)),i}(t,i).format(n)}function lr(n,t){if(!t)return n;const i=t.split(".");for(let t=0,r=i.length;t<r;++t){const r=i[t];n=n[r]||(n[r]=Object.create(null))}return n}function pe(n,t,i){return"string"==typeof t?pi(lr(n,t),i):pi(lr(n,""),t)}function au(){return"undefined"!=typeof window&&"undefined"!=typeof document}function vu(n){let t=n.parentNode;return t&&"[object ShadowRoot]"===t.toString()&&(t=t.host),t}function yu(n,t,i){let r;return"string"==typeof n?(r=parseInt(n,10),-1!==n.indexOf("%")&&(r=r/100*t.parentNode[i])):r=n,r}function dh(n,t){return yf(n).getPropertyValue(t)}function si(n,t,i){const r={};i=i?"-"+i:"";for(let u=0;u<4;u++){const f=rd[u];r[f]=parseFloat(n[t+"-"+f+i])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}function dt(n,t){if("native"in n)return n;const{canvas:i,currentDevicePixelRatio:e}=t,f=yf(i),c="border-box"===f.boxSizing,r=si(f,"padding"),u=si(f,"border","width"),{x:l,y:a,box:o}=function(n,t){const i=n.touches,r=i&&i.length?i[0]:n,{offsetX:e,offsetY:o}=r;let u,f,s=!1;if(ud(e,o,n.target))u=e,f=o;else{const n=t.getBoundingClientRect();u=r.clientX-n.left;f=r.clientY-n.top;s=!0}return{x:u,y:f,box:s}}(n,i),v=r.left+(o&&u.left),y=r.top+(o&&u.top);let{width:s,height:h}=t;return c&&(s-=r.width+u.width,h-=r.height+u.height),{x:Math.round((l-v)/s*i.width/e),y:Math.round((a-y)/h*i.height/e)}}function gh(n,t,i,r){const e=yf(n),s=si(e,"margin"),h=yu(e.maxWidth,n,"clientWidth")||nu,c=yu(e.maxHeight,n,"clientHeight")||nu,o=function(n,t,i){let r,u;if(void 0===t||void 0===i){const f=n&&vu(n);if(f){const e=f.getBoundingClientRect(),n=yf(f),o=si(n,"border","width"),s=si(n,"padding");t=e.width-s.width-o.width;i=e.height-s.height-o.height;r=yu(n.maxWidth,f,"clientWidth");u=yu(n.maxHeight,f,"clientHeight")}else t=n.clientWidth,i=n.clientHeight}return{width:t,height:i,maxWidth:r||nu,maxHeight:u||nu}}(n,t,i);let{width:f,height:u}=o;if("content-box"===e.boxSizing){const n=si(e,"border","width"),t=si(e,"padding");f-=t.width+n.width;u-=t.height+n.height}return f=Math.max(0,f-s.width),u=Math.max(0,r?f/r:u-s.height),f=ei(Math.min(f,h,o.maxWidth)),u=ei(Math.min(u,c,o.maxHeight)),f&&!u&&(u=ei(f/2)),(void 0!==t||void 0!==i)&&r&&o.height&&u>o.height&&(u=o.height,f=ei(Math.floor(u*r))),{width:f,height:u}}function we(n,t,i){const u=t||1,f=ei(n.height*u),e=ei(n.width*u);n.height=ei(n.height);n.width=ei(n.width);const r=n.canvas;return r.style&&(i||!r.style.height&&!r.style.width)&&(r.style.height=`${n.height}px`,r.style.width=`${n.width}px`),(n.currentDevicePixelRatio!==u||r.height!==f||r.width!==e)&&(n.currentDevicePixelRatio=u,r.height=f,r.width=e,n.ctx.setTransform(u,0,0,u,0,0),!0)}function be(n,t){const i=dh(n,t),r=i&&i.match(/^(\d+)(\.\d+)?px$/);if(r)return+r[1]}function nc(n){return!n||t(n.size)||t(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function ar(n,t,i,r,u){let f=t[u];return f||(f=t[u]=n.measureText(u).width,i.push(u)),f>r&&(r=f),r}function tc(n,t,i,r){let h=(r=r||{}).data=r.data||{},o=r.garbageCollect=r.garbageCollect||[];r.font!==t&&(h=r.data={},o=r.garbageCollect=[],r.font=t);n.save();n.font=t;let s=0;const y=i.length;let u,c,v,f,l;for(u=0;u<y;u++)if(f=i[u],null==f||e(f)){if(e(f))for(c=0,v=f.length;c<v;c++)l=f[c],null==l||e(l)||(s=ar(n,h,o,s,l))}else s=ar(n,h,o,s,f);n.restore();const a=o.length/2;if(a>i.length){for(u=0;u<a;u++)delete h[o[u]];o.splice(0,a)}return s}function gt(n,t,i){const r=n.currentDevicePixelRatio,u=0!==i?Math.max(i/2,.5):0;return Math.round((t-u)*r)/r+u}function ke(n,t){(t||n)&&((t=t||n.getContext("2d")).save(),t.resetTransform(),t.clearRect(0,0,n.width,n.height),t.restore())}function pu(n,t,i,r){de(n,t,i,r,null)}function de(n,t,i,u,f){let k,h,l,y,w,b,a,v;const p=t.pointStyle,d=t.rotation,s=t.radius;let e=(d||0)*cy;if(p&&"object"==typeof p&&(k=p.toString(),"[object HTMLImageElement]"===k||"[object HTMLCanvasElement]"===k))return n.save(),n.translate(i,u),n.rotate(e),n.drawImage(p,-p.width/2,-p.height/2,p.width,p.height),void n.restore();if(!(isNaN(s)||s<=0)){switch(n.beginPath(),p){default:f?n.ellipse(i,u,f/2,s,0,0,o):n.arc(i,u,s,0,o);n.closePath();break;case"triangle":b=f?f/2:s;n.moveTo(i+Math.sin(e)*b,u-Math.cos(e)*s);e+=cs;n.lineTo(i+Math.sin(e)*b,u-Math.cos(e)*s);e+=cs;n.lineTo(i+Math.sin(e)*b,u-Math.cos(e)*s);n.closePath();break;case"rectRounded":w=.516*s;y=s-w;h=Math.cos(e+ui)*y;a=Math.cos(e+ui)*(f?f/2-w:y);l=Math.sin(e+ui)*y;v=Math.sin(e+ui)*(f?f/2-w:y);n.arc(i-a,u-l,w,e-r,e-c);n.arc(i+v,u-h,w,e-c,e);n.arc(i+a,u+l,w,e,e+c);n.arc(i-v,u+h,w,e+c,e+r);n.closePath();break;case"rect":if(!d){y=Math.SQRT1_2*s;b=f?f/2:y;n.rect(i-b,u-y,2*b,2*y);break}e+=ui;case"rectRot":a=Math.cos(e)*(f?f/2:s);h=Math.cos(e)*s;l=Math.sin(e)*s;v=Math.sin(e)*(f?f/2:s);n.moveTo(i-a,u-l);n.lineTo(i+v,u-h);n.lineTo(i+a,u+l);n.lineTo(i-v,u+h);n.closePath();break;case"crossRot":e+=ui;case"cross":a=Math.cos(e)*(f?f/2:s);h=Math.cos(e)*s;l=Math.sin(e)*s;v=Math.sin(e)*(f?f/2:s);n.moveTo(i-a,u-l);n.lineTo(i+a,u+l);n.moveTo(i+v,u-h);n.lineTo(i-v,u+h);break;case"star":a=Math.cos(e)*(f?f/2:s);h=Math.cos(e)*s;l=Math.sin(e)*s;v=Math.sin(e)*(f?f/2:s);n.moveTo(i-a,u-l);n.lineTo(i+a,u+l);n.moveTo(i+v,u-h);n.lineTo(i-v,u+h);e+=ui;a=Math.cos(e)*(f?f/2:s);h=Math.cos(e)*s;l=Math.sin(e)*s;v=Math.sin(e)*(f?f/2:s);n.moveTo(i-a,u-l);n.lineTo(i+a,u+l);n.moveTo(i+v,u-h);n.lineTo(i-v,u+h);break;case"line":h=f?f/2:Math.cos(e)*s;l=Math.sin(e)*s;n.moveTo(i-h,u-l);n.lineTo(i+h,u+l);break;case"dash":n.moveTo(i,u);n.lineTo(i+Math.cos(e)*(f?f/2:s),u+Math.sin(e)*s);break;case!1:n.closePath()}n.fill();t.borderWidth>0&&n.stroke()}}function ot(n,t,i){return i=i||.5,!t||n&&n.x>t.left-i&&n.x<t.right+i&&n.y>t.top-i&&n.y<t.bottom+i}function vr(n,t){n.save();n.beginPath();n.rect(t.left,t.top,t.right-t.left,t.bottom-t.top);n.clip()}function yr(n){n.restore()}function ic(n,t,i,r,u){if(!t)return n.lineTo(i.x,i.y);if("middle"===u){const r=(t.x+i.x)/2;n.lineTo(r,t.y);n.lineTo(r,i.y)}else"after"===u!=!!r?n.lineTo(t.x,i.y):n.lineTo(i.x,t.y);n.lineTo(i.x,i.y)}function rc(n,t,i,r){if(!t)return n.lineTo(i.x,i.y);n.bezierCurveTo(r?t.cp1x:t.cp2x,r?t.cp1y:t.cp2y,r?i.cp2x:i.cp1x,r?i.cp2y:i.cp1y,i.x,i.y)}function sw(n,t,i,r,u){if(u.strikethrough||u.underline){const f=n.measureText(r),s=t-f.actualBoundingBoxLeft,h=t+f.actualBoundingBoxRight,c=i-f.actualBoundingBoxAscent,e=i+f.actualBoundingBoxDescent,o=u.strikethrough?(c+e)/2:e;n.strokeStyle=n.fillStyle;n.beginPath();n.lineWidth=u.decorationWidth||2;n.moveTo(s,o);n.lineTo(h,o);n.stroke()}}function hw(n,t){const i=n.fillStyle;n.fillStyle=t.color;n.fillRect(t.left,t.top,t.width,t.height);n.fillStyle=i}function ni(n,i,r,u,f,o={}){const c=e(i)?i:[i],l=o.strokeWidth>0&&""!==o.strokeColor;let s,h;for(n.save(),n.font=f.string,function(n,i){i.translation&&n.translate(i.translation[0],i.translation[1]);t(i.rotation)||n.rotate(i.rotation);i.color&&(n.fillStyle=i.color);i.textAlign&&(n.textAlign=i.textAlign);i.textBaseline&&(n.textBaseline=i.textBaseline)}(n,o),s=0;s<c.length;++s)h=c[s],o.backdrop&&hw(n,o.backdrop),l&&(o.strokeColor&&(n.strokeStyle=o.strokeColor),t(o.strokeWidth)||(n.lineWidth=o.strokeWidth),n.strokeText(h,r,u,o.maxWidth)),n.fillText(h,r,u,o.maxWidth),sw(n,r,u,h,o),u+=Number(f.lineHeight);n.restore()}function gi(n,t){const{x:u,y:f,w:e,h:o,radius:i}=t;n.arc(u+i.topLeft,f+i.topLeft,i.topLeft,1.5*r,r,!0);n.lineTo(u,f+o-i.bottomLeft);n.arc(u+i.bottomLeft,f+o-i.bottomLeft,i.bottomLeft,r,c,!0);n.lineTo(u+e-i.bottomRight,f+o);n.arc(u+e-i.bottomRight,f+o-i.bottomRight,i.bottomRight,c,0,!0);n.lineTo(u+e,f+i.topRight);n.arc(u+e-i.topRight,f+i.topRight,i.topRight,0,-c,!0);n.lineTo(u+i.topLeft,f)}function wu(n,t=[""],i,r,u=()=>n[0]){const f=i||n;void 0===r&&(r=oc("_fallback",n));const e={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:f,_fallback:r,_getTarget:u,override:i=>wu([i,...n],t,f,r)};return new Proxy(e,{deleteProperty:(t,i)=>(delete t[i],delete t._keys,delete n[0][i],!0),get:(i,r)=>uc(i,r,()=>function(n,t,i,r){let u;for(const f of t)if(u=oc(fd(f,n),i),void 0!==u)return ps(n,u)?no(i,r,n,u):u}(r,t,n,i)),getOwnPropertyDescriptor:(n,t)=>Reflect.getOwnPropertyDescriptor(n._scopes[0],t),getPrototypeOf:()=>Reflect.getPrototypeOf(n[0]),has:(n,t)=>sc(n).includes(t),ownKeys:n=>sc(n),set(n,t,i){const r=n._storage||(n._storage=u());return n[t]=r[t]=i,delete n._keys,!0}})}function hi(n,t,r,u){const f={_cacheable:!1,_proxy:n,_context:t,_subProxy:r,_stack:new Set,_descriptors:ge(n,u),setContext:t=>hi(n,t,r,u),override:i=>hi(n.override(i),t,r,u)};return new Proxy(f,{deleteProperty:(t,i)=>(delete t[i],delete n[i],!0),get:(n,t,r)=>uc(n,t,()=>function(n,t,r){const{_proxy:s,_context:h,_subProxy:o,_descriptors:f}=n;let u=s[t];return pt(u)&&f.isScriptable(t)&&(u=function(n,t,i,r){const{_proxy:e,_context:o,_subProxy:s,_stack:u}=i;if(u.has(n))throw new Error("Recursion detected: "+Array.from(u).join("->")+"->"+n);u.add(n);let f=t(o,s||r);return u.delete(n),ps(n,f)&&(f=no(e._scopes,e,n,f)),f}(t,u,n,r)),e(u)&&u.length&&(u=function(n,t,r,u){const{_proxy:e,_context:f,_subProxy:o,_descriptors:s}=r;if(void 0!==f.index&&u(n))return t[f.index%t.length];if(i(t[0])){const i=t,r=e._scopes.filter(n=>n!==i);t=[];for(const u of i){const i=no(r,e,n,u);t.push(hi(i,f,o&&o[n],s))}}return t}(t,u,n,f.isIndexable)),ps(t,u)&&(u=hi(u,h,o&&o[t],f)),u}(n,t,r)),getOwnPropertyDescriptor:(t,i)=>t._descriptors.allKeys?Reflect.has(n,i)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,i),getPrototypeOf:()=>Reflect.getPrototypeOf(n),has:(t,i)=>Reflect.has(n,i),ownKeys:()=>Reflect.ownKeys(n),set:(t,i,r)=>(n[i]=r,delete t[i],!0)})}function ge(n){const{_scriptable:t=e.scriptable,_indexable:i=e.indexable,_allKeys:r=e.allKeys}=n;return{allKeys:r,scriptable:t,indexable:i,isScriptable:pt(t)?t:()=>t,isIndexable:pt(i)?i:()=>i}}function uc(n,t,i){if(Object.prototype.hasOwnProperty.call(n,t)||"constructor"===t)return n[t];const r=i();return n[t]=r,r}function fc(n,t,i){return pt(n)?n(t,i):n}function cw(n,t,i,r,u){for(const f of t){const t=ed(i,f);if(t){n.add(t);const f=fc(t._fallback,i,u);if(void 0!==f&&f!==i&&f!==r)return f}else if(!1===t&&void 0!==r&&i!==r)return null}return!1}function no(n,t,r,u){const h=t._rootScopes,f=fc(t._fallback,r,u),c=[...n,...h],o=new Set;o.add(u);let s=ec(o,c,r,f||r,u);return null!==s&&(void 0===f||f===r||(s=ec(o,c,f,s,u),null!==s))&&wu(Array.from(o),[""],h,f,()=>function(n,t,r){const u=n._getTarget();t in u||(u[t]={});const f=u[t];return e(f)&&i(r)?r:f||{}}(t,r,u))}function ec(n,t,i,r,u){for(;i;)i=cw(n,t,i,r,u);return i}function oc(n,t){for(const i of t)if(i){const t=i[n];if(void 0!==t)return t}}function sc(n){let t=n._keys;return t||(t=n._keys=function(n){const t=new Set;for(const i of n)for(const n of Object.keys(i).filter(n=>!n.startsWith("_")))t.add(n);return Array.from(t)}(n._scopes)),t}function to(n,t,i,r){const{iScale:h}=n,{key:c="r"}=this._parsing,e=new Array(r);let u,o,f,s;for(u=0,o=r;u<o;++u)f=u+i,s=t[f],e[u]={r:h.parse(lt(s,c),f)};return e}function hc(n,t,i,r){const f=n.skip?t:n,u=t,e=i.skip?t:i,h=ou(u,f),c=ou(e,u);let o=h/(h+c),s=c/(h+c);o=isNaN(o)?0:o;s=isNaN(s)?0:s;const l=r*o,a=r*s;return{previous:{x:u.x-l*(e.x-f.x),y:u.y-l*(e.y-f.y)},next:{x:u.x+a*(e.x-f.x),y:u.y+a*(e.y-f.y)}}}function cc(n,t="x"){const s=dy(t),e=n.length,r=Array(e).fill(0),o=Array(e);let i,h,f,u=fr(n,0);for(i=0;i<e;++i)if(h=f,f=u,u=fr(n,i+1),f){if(u){const n=u[t]-f[t];r[i]=0!==n?(u[s]-f[s])/n:0}o[i]=h?u?ut(r[i-1])!==ut(r[i])?0:(r[i-1]+r[i])/2:r[i-1]:r[i]}!function(n,t,i){const h=n.length;let r,u,f,e,s,o=fr(n,0);for(let c=0;c<h-1;++c)s=o,o=fr(n,c+1),s&&o&&(bi(t[c],0,od)?i[c]=i[c+1]=0:(r=i[c]/t[c],u=i[c+1]/t[c],e=Math.pow(r,2)+Math.pow(u,2),e<=9||(f=3/Math.sqrt(e),i[c]=r*f*t[c],i[c+1]=u*f*t[c])))}(n,r,o),function(n,t,i="x"){const e=dy(i),s=n.length;let u,o,r,f=fr(n,0);for(let h=0;h<s;++h)if(o=r,r=f,f=fr(n,h+1),r){const n=r[i],s=r[e];o&&(u=(n-o[i])/3,r[`cp1${i}`]=n-u,r[`cp1${e}`]=s-u*t[h]);f&&(u=(f[i]-n)/3,r[`cp2${i}`]=n+u,r[`cp2${e}`]=s+u*t[h])}}(n,o,t)}function bu(n,t,i){return Math.max(Math.min(n,i),t)}function lc(n,t,i,r,u){let e,s,f,o;if(t.spanGaps&&(n=n.filter(n=>!n.skip)),"monotone"===t.cubicInterpolationMode)cc(n,u);else{let i=r?n[n.length-1]:n[0];for(e=0,s=n.length;e<s;++e)f=n[e],o=hc(i,f,n[Math.min(e+1,s-(r?0:1))%s],t.tension),f.cp1x=o.previous.x,f.cp1y=o.previous.y,f.cp2x=o.next.x,f.cp2y=o.next.y,i=f}t.capBezierPoints&&function(n,t){let r,u,i,f,o,e=ot(n[0],t);for(r=0,u=n.length;r<u;++r)o=f,f=e,e=r<u-1&&ot(n[r+1],t),f&&(i=n[r],o&&(i.cp1x=bu(i.cp1x,t.left,t.right),i.cp1y=bu(i.cp1y,t.top,t.bottom)),e&&(i.cp2x=bu(i.cp2x,t.left,t.right),i.cp2y=bu(i.cp2y,t.top,t.bottom)))}(n,i)}function ti(n,t,i){return{x:n.x+i*(t.x-n.x),y:n.y+i*(t.y-n.y)}}function ac(n,t,i,r){return{x:n.x+i*(t.x-n.x),y:"middle"===r?i<.5?n.y:t.y:"after"===r?i<1?n.y:t.y:i>0?t.y:n.y}}function vc(n,t,i){const r={x:n.cp2x,y:n.cp2y},u={x:t.cp1x,y:t.cp1y},e=ti(n,r,i),f=ti(r,u,i),o=ti(u,t,i),s=ti(e,f,i),h=ti(f,o,i);return ti(s,h,i)}function yc(n,t){const i=(""+n).match(sd);if(!i||"normal"===i[1])return 1.2*t;switch(n=+i[2],i[3]){case"px":return n;case"%":n/=100}return t*n}function ku(t,r){const u={},f=i(r),e=f?Object.keys(r):r,o=i(t)?f?i=>n(t[i],t[r[i]]):n=>t[n]:()=>t;for(const n of e)u[n]=cd(o(n));return u}function io(n){return ku(n,{top:"y",right:"x",bottom:"y",left:"x"})}function ii(n){return ku(n,["topLeft","topRight","bottomLeft","bottomRight"])}function w(n){const t=io(n);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function a(t,i){t=t||{};i=i||s.font;let r=n(t.size,i.size);"string"==typeof r&&(r=parseInt(r,10));let u=n(t.style,i.style);u&&!(""+u).match(hd)&&(console.warn('Invalid font style specified: "'+u+'"'),u=void 0);const f={family:n(t.family,i.family),lineHeight:yc(n(t.lineHeight,i.lineHeight),r),size:r,style:u,weight:n(t.weight,i.weight),string:""};return f.string=nc(f),f}function nr(n,t,i,r){let f,s,u,o=!0;for(f=0,s=n.length;f<s;++f)if(u=n[f],void 0!==u&&(void 0!==t&&"function"==typeof u&&(u=u(t),o=!1),void 0!==i&&e(u)&&(u=u[i%u.length],o=!1),void 0!==u))return r&&!o&&(r.cacheable=!1),u}function pc(n,t,i){const{min:r,max:u}=n,f=ss(t,(u-r)/2),e=(n,t)=>i&&0===n?0:n+t;return{min:e(r,-Math.abs(f)),max:e(u,f)}}function vt(n,t){return Object.assign(Object.create(n),t)}function ci(n,t,i){return n?function(n,t){return{x:i=>n+n+t-i,setWidth(n){t=n},textAlign:n=>"center"===n?n:"right"===n?"left":"right",xPlus:(n,t)=>n-t,leftForLtr:(n,t)=>n-t}}(t,i):{x:n=>n,setWidth(){},textAlign:n=>n,xPlus:(n,t)=>n+t,leftForLtr:n=>n}}function ro(n,t){let i,r;"ltr"!==t&&"rtl"!==t||(i=n.canvas.style,r=[i.getPropertyValue("direction"),i.getPropertyPriority("direction"),],i.setProperty("direction",t,"important"),n.prevTextDirection=r)}function uo(n,t){void 0!==t&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",t[0],t[1]))}function wc(n){return"angle"===n?{between:ki,compare:hh,normalize:p}:{between:et,compare:(n,t)=>n-t,normalize:n=>n}}function bc({start:u,end:t,count:r,loop:i,style:n}){return{start:u%r,end:t%r,loop:i&&(t-u+1)%r==0,style:n}}function fo(n,t,i){if(!i)return[n];const{property:y,start:e,end:o}=i,s=t.length,{compare:h,between:c,normalize:d}=wc(y),{start:p,end:w,loop:b,style:k}=function(n,t,i){const{property:o,start:c,end:l}=i,{between:a,normalize:v}=wc(o),r=t.length;let e,s,{start:u,end:f,loop:h}=n;if(h){for(u+=r,f+=r,e=0,s=r;e<s&&a(v(t[u%r][o]),c,l);++e)u--,f--;u%=r;f%=r}return f<u&&(f+=r),{start:u,end:f,loop:h,style:n.style}}(n,t,i),l=[];let r,a,f,v=!1,u=null;const g=()=>v||c(e,f,r)&&0!==h(e,f),nt=()=>!v||0===h(o,r)||c(o,f,r);for(let n=p,i=p;n<=w;++n)a=t[n%s],a.skip||(r=d(a[y]),r!==f&&(v=c(r,e,o),null===u&&g()&&(u=0===h(r,e)?n:i),null!==u&&nt()&&(l.push(bc({start:u,end:n,loop:b,count:s,style:k})),u=null),i=n,f=r));return null!==u&&l.push(bc({start:u,end:w,loop:b,count:s,style:k})),l}function eo(n,t){const i=[],r=n.segments;for(let u=0;u<r.length;u++){const f=fo(r[u],n.points,t);f.length&&i.push(...f)}return i}function kc(n,t){const i=n.points,e=n.options.spanGaps,u=i.length;if(!u)return[];const o=!!n._loop,{start:f,end:r}=function(n,t,i,r){let u=0,f=t-1;if(i&&!r)for(;u<t&&!n[u].skip;)u++;for(;u<t&&n[u].skip;)u++;for(u%=t,i&&(f+=u);f>u&&n[f%t].skip;)f--;return f%=t,{start:u,end:f}}(i,u,o,e);return!0===e?dc(n,[{start:f,end:r,loop:o}],i,t):dc(n,function(n,t,i,r){const f=n.length,o=[];let u,e=t,s=n[t];for(u=t+1;u<=i;++u){const i=n[u%f];i.skip||i.stop?s.skip||(r=!1,o.push({start:t%f,end:(u-1)%f,loop:r}),t=e=i.stop?u:null):(e=u,s.skip&&(t=u));s=i}return null!==e&&o.push({start:t%f,end:e%f,loop:r}),o}(i,f,r<f?r+u:r,!!n._fullLoop&&0===f&&r===u-1),i,t)}function dc(n,t,i,r){return r&&r.setContext&&i?function(n,t,i,r){function s(n,t,r,e){const s=h?-1:1;if(n!==t){for(n+=u;i[n%u].skip;)n-=s;for(;i[t%u].skip;)t+=s;n%u!=t%u&&(c.push({start:n%u,end:t%u,loop:r,style:e}),o=e,f=t%u)}}const l=n._chart.getContext(),a=gc(n.options),{_datasetIndex:v,options:{spanGaps:h}}=n,u=i.length,c=[];let o=a,f=t[0].start,e=f;for(const n of t){f=h?f:n.start;let t,c=i[f%u];for(e=f+1;e<=n.end;e++){const h=i[e%u];t=gc(r.setContext(vt(l,{type:"segment",p0:c,p1:h,p0DataIndex:(e-1)%u,p1DataIndex:e%u,datasetIndex:v})));lw(t,o)&&s(f,e-1,n.loop,o);c=h;o=t}f<e-1&&s(f,e-1,n.loop,o)}return c}(n,t,i,r):t}function gc(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function lw(n,t){if(!t)return!1;const i=[],r=function(n,t){return cu(t)?(i.includes(t)||i.push(t),i.indexOf(t)):t};return JSON.stringify(n,r)!==JSON.stringify(t,r)}function du(n,t,i){return n.options.clip?n[i]:t[i]}function oo(n,t){const i=t._clip;if(i.disabled)return!1;const r=function(n,t){const{xScale:i,yScale:r}=n;return i&&r?{left:du(i,t,"left"),right:du(i,t,"right"),top:du(r,t,"top"),bottom:du(r,t,"bottom")}:t}(t,n.chartArea);return{left:!1===i.left?0:r.left-(!0===i.left?0:i.left),right:!1===i.right?n.width:r.right+(!0===i.right?0:i.right),top:!1===i.top?0:r.top-(!0===i.top?0:i.top),bottom:!1===i.bottom?n.height:r.bottom+(!0===i.bottom?0:i.bottom)}}function aw(n,i,r,u){const{controller:e,data:f,_sorted:s}=n,o=e._cachedMeta.iScale,h=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null;if(o&&i===o.axis&&"r"!==i&&s&&f.length){const s=o._reversePixels?ly:ht;if(!u){const u=s(f,i,r);if(h){const{vScale:i}=e._cachedMeta,{_parsed:r}=n,f=r.slice(0,u.lo+1).reverse().findIndex(n=>!t(n[i.axis]));u.lo-=Math.max(0,f);const o=r.slice(u.hi).findIndex(n=>!t(n[i.axis]));u.hi+=Math.max(0,o)}return u}if(e._sharedOptions){const t=f[0],n="function"==typeof t.getRange&&t.getRange(i);if(n){const t=s(f,i,r-n),u=s(f,i,r+n);return{lo:t.lo,hi:u.hi}}}}return{lo:0,hi:f.length-1}}function pr(n,t,i,r,u){const f=n.getSortedVisibleDatasetMetas(),e=i[t];for(let n=0,i=f.length;n<i;++n){const{index:i,data:o}=f[n],{lo:s,hi:h}=aw(f[n],t,e,u);for(let n=s;n<=h;++n){const t=o[n];t.skip||r(t,i,n)}}}function so(n,t,i,r,u){const f=[];return!u&&!n.isPointInArea(t)?f:(pr(n,i,t,function(i,e,o){(u||ot(i,n.chartArea,0))&&i.inRange(t.x,t.y,r)&&f.push({element:i,datasetIndex:e,index:o})},!0),f)}function vw(n,t,i,r,u,f){let e=[];const s=function(n){const t=-1!==n.indexOf("x"),i=-1!==n.indexOf("y");return function(n,r){const u=t?Math.abs(n.x-r.x):0,f=i?Math.abs(n.y-r.y):0;return Math.sqrt(Math.pow(u,2)+Math.pow(f,2))}}(i);let o=Number.POSITIVE_INFINITY;return pr(n,i,t,function(i,h,c){const l=i.inRange(t.x,t.y,u);if(!r||l){const r=i.getCenterPoint(u);if(!!f||n.isPointInArea(r)||l){const n=s(t,r);n<o?(e=[{element:i,datasetIndex:h,index:c}],o=n):n===o&&e.push({element:i,datasetIndex:h,index:c})}}}),e}function ho(n,t,i,r,u,f){return f||n.isPointInArea(t)?"r"!==i||r?vw(n,t,i,r,u,f):function(n,t,i,r){let u=[];return pr(n,i,t,function(n,i,f){const{startAngle:e,endAngle:o}=n.getProps(["startAngle","endAngle"],r),{angle:s}=fe(n,{x:t.x,y:t.y});ki(s,e,o)&&u.push({element:n,datasetIndex:i,index:f})}),u}(n,t,i,u):[]}function nl(n,t,i,r,u){const e=[],o="x"===i?"inXRange":"inYRange";let f=!1;return pr(n,i,t,(n,r,s)=>{n[o]&&n[o](t[i],u)&&(e.push({element:n,datasetIndex:r,index:s}),f=f||n.inRange(t.x,t.y,u))}),r&&!f?[]:e}function wr(n,t){return n.filter(n=>n.pos===t)}function tl(n,t){return n.filter(n=>-1===tp.indexOf(n.pos)&&n.box.axis===t)}function br(n,t){return n.sort((n,i)=>{const r=t?i:n,u=t?n:i;return r.weight===u.weight?r.index-u.index:r.weight-u.weight})}function yw(n,t){const u=function(n){const t={};for(const i of n){const{stack:n,pos:r,stackWeight:u}=i;if(n&&tp.includes(r)){const i=t[n]||(t[n]={count:0,placed:0,weight:0,size:0});i.count++;i.weight+=u}}return t}(n),{vBoxMaxWidth:f,hBoxMaxHeight:e}=t;let r,o,i;for(r=0,o=n.length;r<o;++r){i=n[r];const{fullSize:s}=i.box,h=u[i.stack],o=h&&i.stackWeight/h.weight;i.horizontal?(i.width=o?o*f:s&&t.availableWidth,i.height=e):(i.width=f,i.height=o?o*e:s&&t.availableHeight)}return u}function il(n,t,i,r){return Math.max(n[i],t[i])+Math.max(n[r],t[r])}function rl(n,t){n.top=Math.max(n.top,t.top);n.left=Math.max(n.left,t.left);n.bottom=Math.max(n.bottom,t.bottom);n.right=Math.max(n.right,t.right)}function pw(n,t,r,u){const{pos:e,box:f}=r,o=n.maxPadding;if(!i(e)){r.size&&(n[e]-=r.size);const t=u[r.stack]||{size:0,count:1};t.size=Math.max(t.size,r.horizontal?f.height:f.width);r.size=t.size/t.count;n[e]+=r.size}f.getPadding&&rl(o,f.getPadding());const s=Math.max(0,t.outerWidth-il(o,n,"left","right")),h=Math.max(0,t.outerHeight-il(o,n,"top","bottom")),c=s!==n.w,l=h!==n.h;return n.w=s,n.h=h,r.horizontal?{same:c,other:l}:{same:l,other:c}}function ww(n,t){function i(n){const i={left:0,top:0,right:0,bottom:0};return n.forEach(n=>{i[n]=Math.max(t[n],r[n])}),i}const r=t.maxPadding;return i(n?["left","right"]:["top","bottom"])}function kr(n,t,i,r){const e=[];let f,c,u,o,s,h;for(f=0,c=n.length,s=0;f<c;++f){u=n[f];o=u.box;o.update(u.width||t.w,u.height||t.h,ww(u.horizontal,t));const{same:c,other:l}=pw(t,i,u,r);s|=c&&e.length;h=h||l;o.fullSize||e.push(u)}return s&&kr(e,t,i,r)||h}function gu(n,t,i,r,u){n.top=i;n.left=t;n.right=t+r;n.bottom=i+u;n.width=r;n.height=u}function ul(n,t,i,r){const u=i.padding;let{x:f,y:e}=t;for(const o of n){const s=o.box,n=r[o.stack]||{count:1,placed:0,weight:1},h=o.stackWeight/n.weight||1;if(o.horizontal){const r=t.w*h,f=n.size||s.height;rr(n.start)&&(e=n.start);s.fullSize?gu(s,u.left,e,i.outerWidth-u.right-u.left,f):gu(s,t.left+n.placed,e,r,f);n.start=e;n.placed+=r;e=s.bottom}else{const r=t.h*h,e=n.size||s.width;rr(n.start)&&(f=n.start);s.fullSize?gu(s,f,u.top,e,i.outerHeight-u.bottom-u.top):gu(s,f,t.top+n.placed,e,r);n.start=f;n.placed+=r;f=s.right}}t.x=f;t.y=e}function bw(n,t,i){n&&n.canvas&&n.canvas.removeEventListener(t,i,up)}function nf(n,t){for(const i of n)if(i===t||i.contains(t))return!0}function kw(n,t,i){const r=n.canvas,u=new MutationObserver(n=>{let t=!1;for(const i of n)t=t||nf(i.addedNodes,r),t=t&&!nf(i.removedNodes,r);t&&i()});return u.observe(document,{childList:!0,subtree:!0}),u}function dw(n,t,i){const r=n.canvas,u=new MutationObserver(n=>{let t=!1;for(const i of n)t=t||nf(i.removedNodes,r),t=t&&!nf(i.addedNodes,r);t&&i()});return u.observe(document,{childList:!0,subtree:!0}),u}function fl(){const n=window.devicePixelRatio;n!==fp&&(fp=n,tu.forEach((t,i)=>{i.currentDevicePixelRatio!==n&&t()}))}function gw(n,t,i){const u=n.canvas,r=u&&vu(u);if(r){const t=se((n,t)=>{const u=r.clientWidth;i(n,t);u<r.clientWidth&&i()},window),u=new ResizeObserver(n=>{const i=n[0],r=i.contentRect.width,u=i.contentRect.height;0===r&&0===u||t(r,u)});return u.observe(r),function(n,t){tu.size||window.addEventListener("resize",fl);tu.set(n,t)}(n,t),u}}function co(n,t,i){i&&i.disconnect();"resize"===t&&function(n){tu.delete(n);tu.size||window.removeEventListener("resize",fl)}(n)}function nb(n,t,i){const u=n.canvas,r=se(t=>{null!==n.ctx&&i(function(n,t){const u=ld[n.type]||n.type,{x:i,y:r}=dt(n,t);return{type:u,chart:t,"native":n,x:void 0!==i?i:null,y:void 0!==r?r:null}}(t,n))},n);return function(n,t,i){n&&n.addEventListener(t,i,up)}(u,t,r),r}function el(n){return!au()||"undefined"!=typeof OffscreenCanvas&&n instanceof OffscreenCanvas?ip:ep}function ol(n,t){const i=n&&n.options||{},r=i.reverse,u=void 0===i.min?t:0,f=void 0===i.max?t:0;return{start:r?f:u,end:r?u:f}}function sl(n,t){const r=[],u=n._getSortedDatasetMetas(t);let i,f;for(i=0,f=u.length;i<f;++i)r.push(u[i].index);return r}function hl(n,t,i,r={}){const o=n.keys,c="single"===r.mode;let u,s,e,f;if(null!==t){let l=!1;for(u=0,s=o.length;u<s;++u){if(e=+o[u],e===i){if(l=!0,r.all)continue;break}f=n.values[e];h(f)&&(c||0===t||ut(t)===ut(f))&&(t+=f)}return l||r.all?t:0}}function lo(n,t){const i=n&&n.options.stacked;return i||void 0===i&&void 0!==t.stack}function tb(n,t,i){const r=n[t]||(n[t]={});return r[i]||(r[i]={})}function cl(n,t,i,r){for(const u of t.getMatchingVisibleMetas(r).reverse()){const t=n[u.index];if(i&&t>0||!i&&t<0)return u.index}return null}function ll(n,t){const{chart:f,_cachedMeta:r}=n,s=f._stacks||(f._stacks={}),{iScale:e,vScale:u,index:o}=r,a=e.axis,h=u.axis,c=function(n,t,i){return`${n.id}.${t.id}.${i.stack||i.type}`}(e,u,r),l=t.length;let i;for(let n=0;n<l;++n){const f=t[n],{[l]:l,[h]:e}=f;i=(f._stacks||(f._stacks={}))[h]=tb(s,c,l);i[o]=e;i._top=cl(i,u,!0,r.type);i._bottom=cl(i,u,!1,r.type);(i._visualValues||(i._visualValues={}))[o]=e}}function ao(n,t){const i=n.scales;return Object.keys(i).filter(n=>i[n].axis===t).shift()}function dr(n,t){const r=n.controller.index,i=n.vScale&&n.vScale.axis;if(i){t=t||n._parsed;for(const n of t){const t=n._stacks;if(!t||void 0===t[i]||void 0===t[i][r])return;delete t[i][r];void 0!==t[i]._visualValues&&void 0!==t[i]._visualValues[r]&&delete t[i]._visualValues[r]}}}function ib(n,i){const c=n.options.ticks,l=function(n){const i=n.options.offset,t=n._tickSize(),r=n._length/t+(i?0:1),u=n._maxLength/t;return Math.floor(Math.min(r,u))}(n),o=Math.min(c.maxTicksLimit||l,l),u=c.major.enabled?function(n){const i=[];let t,r;for(t=0,r=n.length;t<r;t++)n[t].major&&i.push(t);return i}(i):[],f=u.length,s=u[0],h=u[f-1],r=[];if(f>o)return function(n,t,i,r){let u,f=0,e=i[0];for(r=Math.ceil(r),u=0;u<n.length;u++)u===e&&(t.push(n[u]),f++,e=i[f*r])}(i,r,u,f/o),r;const e=function(n,t,i){const u=function(n){const r=n.length;let t,i;if(r<2)return!1;for(i=n[0],t=1;t<r;++t)if(n[t]-n[t-1]!==i)return!1;return i}(n),r=t.length/i;if(!u)return Math.max(r,1);const f=oh(u);for(let n=0,t=f.length-1;n<t;n++){const t=f[n];if(t>r)return t}return Math.max(r,1)}(u,i,o);if(f>0){let n,c;const o=f>1?Math.round((h-s)/(f-1)):null;for(tf(i,r,e,t(o)?0:s-o,s),n=0,c=f-1;n<c;n++)tf(i,r,e,u[n],u[n+1]);return tf(i,r,e,h,t(o)?i.length:h+o),r}return tf(i,r,e),r}function tf(t,i,r,u,f){const s=n(u,0),l=Math.min(n(f,t.length),t.length);let c,e,o,h=0;for(r=Math.ceil(r),f&&(c=f-u,r=c/Math.floor(c/r)),o=s;o<0;)h++,o=Math.round(s+h*r);for(e=Math.max(s,0);e<l;e++)e===o&&(i.push(t[e]),h++,o=Math.round(s+h*r))}function al(n,t){const r=[],u=n.length/t,f=n.length;let i=0;for(;i<f;i+=u)r.push(n[Math.floor(i)]);return r}function rb(n,t,i){const e=n.ticks.length,u=Math.min(t,e-1),o=n._startPixel,s=n._endPixel,h=1e-6;let f,r=n.getPixelForTick(u);if(!(i&&(f=1===e?Math.max(r-o,s-r):0===t?(n.getPixelForTick(1)-r)/2:(r-n.getPixelForTick(u-1))/2,r+=u<t?f:-f,r<o-h||r>s+h)))return r}function gr(n){return n.drawTicks?n.tickLength:0}function vl(n,t){if(!n.display)return 0;const i=a(n.font,t),r=w(n.padding);return(e(n.text)?n.text.length:1)*i.lineHeight+r.height}function ub(n,t,i){let r=cf(n);return(i&&"right"!==t||!i&&"right"===t)&&(r=(n=>"left"===n?"right":"right"===n?"left":n)(r)),r}function fb(n,t){return t||!1!==n?!0===n?{}:n:null}function eb(n,{plugin:i,local:t},r,u){const e=n.pluginScopeKeys(i),f=n.getOptionScopes(r,e);return t&&i.defaults&&f.push(i.defaults),n.createResolver(f,u,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function vo(n,t){const i=s.datasets[n]||{};return((t.datasets||{})[n]||{}).indexAxis||t.indexAxis||i.indexAxis||"x"}function yl(n){if("x"===n||"y"===n||"r"===n)return n}function yo(n,...t){if(yl(n))return n;for(const r of t){const t=r.axis||("top"===(i=r.position)||"bottom"===i?"x":"left"===i||"right"===i?"y":void 0)||n.length>1&&yl(n[0].toLowerCase());if(t)return t}var i;throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`);}function pl(n,t,i){if(i[t+"AxisID"]===n)return{axis:t}}function ob(n,t){const f=ai[n.type]||{scales:{}},u=t.scales||{},e=vo(n.type,t),r=Object.create(null);return Object.keys(u).forEach(t=>{const o=u[t];if(!i(o))return console.error(`Invalid scale configuration for scale: ${t}`);if(o._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${t}`);const h=yo(t,o,function(n,t){if(t.data&&t.data.datasets){const i=t.data.datasets.filter(t=>t.xAxisID===n||t.yAxisID===n);if(i.length)return pl(n,"x",i[0])||pl(n,"y",i[0])}return{}}(t,n),s.scales[o.type]),l=function(n,t){return n===t?"_index_":"_value_"}(h,e),c=f.scales||{};r[t]=wi(Object.create(null),[{axis:h},o,c[h],c[l]])}),n.data.datasets.forEach(i=>{const f=i.type||n.type,o=i.indexAxis||vo(f,t),e=(ai[f]||{}).scales||{};Object.keys(e).forEach(n=>{const f=function(n,t){let i=n;return"_index_"===n?i=t:"_value_"===n&&(i="x"===t?"y":"x"),i}(n,o),t=i[f+"AxisID"]||f;r[t]=r[t]||Object.create(null);wi(r[t],[{axis:f},u[t],e[n]])})}),Object.keys(r).forEach(n=>{const t=r[n];wi(t,[s.scales[t.type],s.scale])}),r}function wl(t){const i=t.options||(t.options={});i.plugins=n(i.plugins,{});i.scales=ob(t,i)}function bl(n){return(n=n||{}).datasets=n.datasets||[],n.labels=n.labels||[],n}function rf(n,t){let i=ap.get(n);return i||(i=t(),ap.set(n,i),vp.add(i)),i}function kl(n,t,i){let r=n.get(t);r||(r=new Map,n.set(t,r));const f=i.join();let u=r.get(f);return u||(u={resolver:wu(t,i),subPrefixes:i.filter(n=>!n.toLowerCase().includes("hover"))},r.set(f,u)),u}function dl(n,t){return"top"===n||"bottom"===n||-1===bd.indexOf(n)&&"x"===t}function gl(n,t){return function(i,r){return i[n]===r[n]?i[t]-r[t]:i[n]-r[n]}}function na(n){const t=n.chart,i=t.options.animation;t.notifyPlugins("afterRender");f(i&&i.onComplete,[n],t)}function sb(n){const t=n.chart,i=t.options.animation;f(i&&i.onProgress,[n],t)}function ta(n){return au()&&"string"==typeof n?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}function hb(n,t,i){const r=Object.keys(n);for(const u of r){const r=+u;if(r>=t){const f=n[u];delete n[u];(i>0||r>t)&&(n[r+i]=f)}}}function ia(){return u(l.instances,n=>n._plugins.invalidate())}function li(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.");}function cb(n){const r=n.iScale,o=function(n,t){if(!n._cache.$bar){const r=n.getMatchingVisibleMetas(t);let i=[];for(let t=0,u=r.length;t<u;t++)i=i.concat(r[t].controller.getAllParsedValues(n));n._cache.$bar=oe(i.sort((n,t)=>n-t))}return n._cache.$bar}(r,n.type);let t,u,i,f,e=r._length;const s=()=>{32767!==i&&-32768!==i&&(rr(f)&&(e=Math.min(e,Math.abs(i-f)||e)),f=i)};for(t=0,u=o.length;t<u;++t)i=r.getPixelForValue(o[t]),s();for(f=void 0,t=0,u=r.ticks.length;t<u;++t)i=r.getPixelForTick(t),s();return e}function ra(n,t,i,r){return e(n)?function(n,t,i,r){const e=i.parse(n[0],r),o=i.parse(n[1],r),u=Math.min(e,o),f=Math.max(e,o);let h=u,s=f;Math.abs(u)>Math.abs(f)&&(h=f,s=u);t[i.axis]=s;t._custom={barStart:h,barEnd:s,start:e,end:o,min:u,max:f}}(n,t,i,r):t[i.axis]=i.parse(n,r),t}function ua(n,t,i,r){const f=n.iScale,o=n.vScale,l=f.getLabels(),a=f===o,s=[];let u,h,e,c;for(u=i,h=i+r;u<h;++u)c=t[u],e={},e[f.axis]=a||f.parse(l[u],u),s.push(ra(c,e,o,u));return s}function po(n){return n&&void 0!==n.barStart&&void 0!==n.barEnd}function lb(n,t,i,r){let u=t.borderSkipped;const f={};if(!u)return void(n.borderSkipped=f);if(!0===u)return void(n.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:e,end:o,reverse:s,top:h,bottom:c}=function(n){let t,i,r,u,f;return n.horizontal?(t=n.base>n.x,i="left",r="right"):(t=n.base<n.y,i="bottom",r="top"),t?(u="end",f="start"):(u="start",f="end"),{start:i,end:r,reverse:t,top:u,bottom:f}}(n);"middle"===u&&i&&(n.enableBorderRadius=!0,(i._top||0)===r?u=h:(i._bottom||0)===r?u=c:(f[fa(c,e,o,s)]=!0,u=h));f[fa(u,e,o,s)]=!0;n.borderSkipped=f}function fa(n,t,i,r){var u,e,f;return r?(f=i,n=ea(n=(u=n)===(e=t)?f:u===f?e:u,i,t)):n=ea(n,t,i),n}function ea(n,t,i){return"start"===n?t:"end"===n?i:n}function ab(n,{inflateAmount:t},i){n.inflateAmount="auto"===t?1===i?.33:0:t}function vb(n,t,i,r){const u=ku(n.options.borderRadius,["outerStart","outerEnd","innerStart","innerEnd",]),f=(i-t)/2,e=Math.min(f,r*t/2),o=n=>{const t=(i-Math.min(f,n))*r/2;return v(n,0,Math.min(f,t))};return{outerStart:o(u.outerStart),outerEnd:o(u.outerEnd),innerStart:v(u.innerStart,0,e),innerEnd:v(u.innerEnd,0,e)}}function tr(n,t,i,r){return{x:i+n*Math.cos(t),y:r+n*Math.sin(t)}}function uf(n,t,i,u,f,e){const{x:o,y:s,startAngle:ut,pixelMargin:ft,innerRadius:d}=t,h=Math.max(t.outerRadius+u+i-ft,0),l=d>0?d+u+i+ft:0;let tt=0;const k=f-ut;if(u){const n=((d>0?d-u:0)+(h>0?h-u:0))/2;tt=(k-(0!==n?k*n/(n+u):k))/2}const et=(k-Math.max(.001,k*h-i/r)/h)/2,a=ut+et+tt,v=f-et-tt,{outerStart:g,outerEnd:nt,innerStart:y,innerEnd:p}=vb(t,l,h,v-a),it=h-g,ot=h-nt,w=a+g/it,b=v-nt/ot,st=l+y,rt=l+p,ht=a+y/st,ct=v-p/rt;if(n.beginPath(),e){const t=(w+b)/2;if(n.arc(o,s,h,w,t),n.arc(o,s,h,t,b),nt>0){const t=tr(ot,b,o,s);n.arc(t.x,t.y,nt,b,v+c)}const i=tr(rt,v,o,s);if(n.lineTo(i.x,i.y),p>0){const t=tr(rt,ct,o,s);n.arc(t.x,t.y,p,v+c,ct+Math.PI)}const r=(v-p/l+(a+y/l))/2;if(n.arc(o,s,l,v-p/l,r,!0),n.arc(o,s,l,r,a+y/l,!0),y>0){const t=tr(st,ht,o,s);n.arc(t.x,t.y,y,ht+Math.PI,a-c)}const u=tr(it,a,o,s);if(n.lineTo(u.x,u.y),g>0){const t=tr(it,w,o,s);n.arc(t.x,t.y,g,a-c,w)}}else{n.moveTo(o,s);const t=Math.cos(w)*h+o,i=Math.sin(w)*h+s;n.lineTo(t,i);const r=Math.cos(b)*h+o,u=Math.sin(b)*h+s;n.lineTo(r,u)}n.closePath()}function yb(n,t,i,u,f){const{fullCircles:e,startAngle:a,circumference:v,options:s}=t,{borderWidth:h,borderJoinStyle:l,borderDash:w,borderDashOffset:b,borderRadius:k}=s,y="inner"===s.borderAlign;if(h){n.setLineDash(w||[]);n.lineDashOffset=b;y?(n.lineWidth=2*h,n.lineJoin=l||"round"):(n.lineWidth=h,n.lineJoin=l||"bevel");let d=t.endAngle;if(e){uf(n,t,i,u,d,f);for(let t=0;t<e;++t)n.stroke();isNaN(v)||(d=a+(v%o||o))}y&&function(n,t,i){const{startAngle:f,pixelMargin:u,x:e,y:o,outerRadius:h,innerRadius:s}=t;let r=u/h;n.beginPath();n.arc(e,o,h,f-r,i+r);s>u?(r=u/s,n.arc(e,o,s,i+r,f-r,!0)):n.arc(e,o,u,i+c,f-c);n.closePath();n.clip()}(n,t,d);s.selfJoin&&d-a>=r&&0===k&&"miter"!==l&&function(n,t,i){const{startAngle:u,x:f,y:e,outerRadius:s,innerRadius:h,options:a}=t,{borderWidth:o,borderJoinStyle:c}=a,l=Math.min(o/s,p(u-i));if(n.beginPath(),n.arc(f,e,s-o/2,u+l/2,i-l/2),h>0){const t=Math.min(o/h,p(u-i));n.arc(f,e,h+o/2,i-t/2,u+t/2,!0)}else{const t=Math.min(o/2,s*p(u-i));if("round"===c)n.arc(f,e,t,i-r/2,u+r/2,!0);else if("bevel"===c){const o=2*t*t,s=-o*Math.cos(i+r/2)+f,h=-o*Math.sin(i+r/2)+e,c=o*Math.cos(u+r/2)+f,l=o*Math.sin(u+r/2)+e;n.lineTo(s,h);n.lineTo(c,l)}}n.closePath();n.moveTo(0,0);n.rect(0,0,n.canvas.width,n.canvas.height);n.clip("evenodd")}(n,t,d);e||(uf(n,t,i,u,d,f),n.stroke())}}function oa(t,i,r=i){t.lineCap=n(r.borderCapStyle,i.borderCapStyle);t.setLineDash(n(r.borderDash,i.borderDash));t.lineDashOffset=n(r.borderDashOffset,i.borderDashOffset);t.lineJoin=n(r.borderJoinStyle,i.borderJoinStyle);t.lineWidth=n(r.borderWidth,i.borderWidth);t.strokeStyle=n(r.borderColor,i.borderColor)}function pb(n,t,i){n.lineTo(i.x,i.y)}function sa(n,t,i={}){const h=n.length,{start:u=0,end:f=s-1}=i,{start:e,end:o}=t,r=Math.max(u,e),s=Math.min(f,o),c=u<e&&f<e||u>o&&f>o;return{count:h,start:r,loop:t.loop,ilen:s<r&&!c?h+s-r:s-r}}function wb(n,t,i,r){const{points:o,options:s}=t,{count:l,start:a,loop:v,ilen:h}=sa(o,i,r),y=function(n){return n.stepped?ic:n.tension||"monotone"===n.cubicInterpolationMode?rc:pb}(s);let f,u,c,{move:p=!0,reverse:e}=r||{};for(f=0;f<=h;++f)u=o[(a+(e?h-f:f))%l],u.skip||(p?(n.moveTo(u.x,u.y),p=!1):y(n,c,u,e,s.stepped),c=u);return v&&(u=o[(a+(e?h:0))%l],y(n,c,u,e,s.stepped)),!!v}function bb(n,t,i,r){const h=t.points,{count:w,start:b,ilen:l}=sa(h,i,r),{move:k=!0,reverse:d}=r||{};let s,u,a,f,e,v,o=0,c=0;const y=n=>(b+(d?l-n:n))%w,p=()=>{f!==e&&(n.lineTo(o,e),n.lineTo(o,f),n.lineTo(o,v))};for(k&&(u=h[y(0)],n.moveTo(u.x,u.y)),s=0;s<=l;++s)if(u=h[y(s)],!u.skip){const i=u.x,t=u.y,r=0|i;r===a?(t<f?f=t:t>e&&(e=t),o=(c*o+i)/++c):(p(),n.lineTo(i,t),a=r,c=0,f=e=t);v=t}p()}function wo(n){const t=n.options,i=t.borderDash&&t.borderDash.length;return n._decimated||n._loop||t.tension||"monotone"===t.cubicInterpolationMode||t.stepped||i?wb:bb}function kb(n,t,i,r){kd&&!t.options.segment?function(n,t,i,r){let u=t._path;u||(u=t._path=new Path2D,t.path(u,i,r)&&u.closePath());oa(n,t.options);n.stroke(u)}(n,t,i,r):function(n,t,i,r){const{segments:u,options:f}=t,e=wo(t);for(const o of u)oa(n,f,o.style),n.beginPath(),e(n,t,o,{start:i,end:i+r-1})&&n.closePath(),n.stroke()}(n,t,i,r)}function ha(n,t,i,r){const u=n.options,{[i]:f}=n.getProps([i],r);return Math.abs(t-f)<u.radius+u.hitRadius}function ca(n,t){const{x:r,y:u,base:f,width:c,height:l}=n.getProps(["x","y","base","width","height"],t);let e,o,s,h,i;return n.horizontal?(i=l/2,e=Math.min(r,f),o=Math.max(r,f),s=u-i,h=u+i):(i=c/2,e=r-i,o=r+i,s=Math.min(u,f),h=Math.max(u,f)),{left:e,top:s,right:o,bottom:h}}function ri(n,t,i,r){return n?0:v(t,i,r)}function db(n){const r=ca(n),f=r.right-r.left,e=r.bottom-r.top,t=function(n,t,i){const f=n.options.borderWidth,r=n.borderSkipped,u=io(f);return{t:ri(r.top,u.top,0,i),r:ri(r.right,u.right,0,t),b:ri(r.bottom,u.bottom,0,i),l:ri(r.left,u.left,0,t)}}(n,f/2,e/2),u=function(n,t,r){const{enableBorderRadius:h}=n.getProps(["enableBorderRadius",]),s=n.options.borderRadius,f=ii(s),e=Math.min(t,r),u=n.borderSkipped,o=h||i(s);return{topLeft:ri(!o||u.top||u.left,f.topLeft,0,e),topRight:ri(!o||u.top||u.right,f.topRight,0,e),bottomLeft:ri(!o||u.bottom||u.left,f.bottomLeft,0,e),bottomRight:ri(!o||u.bottom||u.right,f.bottomRight,0,e)}}(n,f/2,e/2);return{outer:{x:r.left,y:r.top,w:f,h:e,radius:u},inner:{x:r.left+t.l,y:r.top+t.t,w:f-t.l-t.r,h:e-t.t-t.b,radius:{topLeft:Math.max(0,u.topLeft-Math.max(t.t,t.l)),topRight:Math.max(0,u.topRight-Math.max(t.t,t.r)),bottomLeft:Math.max(0,u.bottomLeft-Math.max(t.b,t.l)),bottomRight:Math.max(0,u.bottomRight-Math.max(t.b,t.r))}}}}function bo(n,t,i,r){const f=null===t,e=null===i,u=n&&!(f&&e)&&ca(n,r);return u&&(f||et(t,u.left,u.right))&&(e||et(i,u.top,u.bottom))}function gb(n,t){n.rect(t.x,t.y,t.w,t.h)}function ko(n,t,i={}){const r=n.x!==i.x?-t:0,u=n.y!==i.y?-t:0,f=(n.x+n.w!==i.x+i.w?t:0)-r,e=(n.y+n.h!==i.y+i.h?t:0)-u;return{x:n.x+r,y:n.y+u,w:n.w+f,h:n.h+e,radius:n.radius}}function nk(n,t,i,r){const u=n.indexOf(t);return-1===u?((n,t,i,r)=>("string"==typeof t?(i=n.push(t)-1,r.unshift({index:i,label:t})):isNaN(t)&&(i=null),i))(n,t,i,r):u!==n.lastIndexOf(t)?i:u}function la(n){const t=this.getLabels();return n>=0&&n<t.length?t[n]:n}function aa(n,t,{horizontal:i,minRotation:r}){const u=nt(r),f=(i?Math.sin(u):Math.cos(u))||.001,e=.75*t*(""+n).length;return Math.min(t/f,e)}function va(n){return 1==n/Math.pow(10,ru(n))}function ya(n,t,i){const r=Math.pow(10,i),u=Math.floor(n/r);return Math.ceil(t/r)-u}function tk(n,{min:i,max:t}){i=k(n.min,i);const s=[],c=ru(i);let u=function(n,t){let i=ru(t-n);for(;ya(n,t,i)>10;)i++;for(;ya(n,t,i)<10;)i--;return Math.min(i,ru(n))}(i,t),f=u<0?Math.pow(10,Math.abs(u)):1;const l=Math.pow(10,u),o=c>u?Math.pow(10,c):0,v=Math.round((i-o)*f)/f,h=Math.floor((i-o)/l/10)*l*10;let r=Math.floor((v-h)/Math.pow(10,u)),e=k(n.min,Math.round((o+h+r*Math.pow(10,u))*f)/f);for(;e<t;)s.push({value:e,major:va(e),significand:r}),r>=10?r=r<15?15:20:r++,r>=20&&(u++,r=2,f=u>=0?1:f),e=Math.round((o+h+r*Math.pow(10,u))*f)/f;const a=k(n.max,e);return s.push({value:a,major:va(a),significand:r}),s}function go(t){const i=t.ticks;if(i.display&&t.display){const t=w(i.backdropPadding);return n(i.font&&i.font.size,s.font.size)+t.height}return 0}function pa(n,t,i,r,u){return n===r||n===u?{start:t-i/2,end:t+i/2}:n<r||n>u?{start:t-i,end:t}:{start:t,end:t+i}}function ik(n){const t={l:n.left+n._padding.left,r:n.right-n._padding.right,t:n.top+n._padding.top,b:n.bottom-n._padding.bottom},u=Object.assign({},t),s=[],f=[],h=n._pointLabels.length,c=n.options.pointLabels,l=c.centerPointLabels?r/h:0;for(let r=0;r<h;r++){const y=c.setContext(n.getPointLabelContext(r));f[r]=y.padding;const w=n.getPointPosition(r,n.drawingArea+f[r],l),d=a(y.font),h=(v=n.ctx,o=d,i=e(i=n._pointLabels[r])?i:[i],{w:tc(v,o.string,i),h:i.length*o.lineHeight});s[r]=h;const b=p(n.getIndexAngle(r)+l),k=Math.round(eu(b));rk(u,t,b,pa(k,w.x,h.w,0,180),pa(k,w.y,h.h,90,270))}var v,o,i;n.setCenterPoint(t.l-u.l,u.r-t.r,t.t-u.t,u.b-t.b);n._pointLabelItems=function(n,t,i){const f=[],e=n._pointLabels.length,o=n.options,{centerPointLabels:h,display:c}=o.pointLabels,u={extra:go(o)/2,additionalAngle:h?r/e:0};let s;for(let r=0;r<e;r++){u.padding=i[r];u.size=t[r];const e=uk(n,r,u);f.push(e);"auto"===c&&(e.visible=fk(e,s),e.visible&&(s=e))}return f}(n,s,f)}function rk(n,t,i,r,u){const o=Math.abs(Math.sin(i)),s=Math.abs(Math.cos(i));let f=0,e=0;r.start<t.l?(f=(t.l-r.start)/o,n.l=Math.min(n.l,t.l-f)):r.end>t.r&&(f=(r.end-t.r)/o,n.r=Math.max(n.r,t.r+f));u.start<t.t?(e=(t.t-u.start)/s,n.t=Math.min(n.t,t.t-e)):u.end>t.b&&(e=(u.end-t.b)/s,n.b=Math.max(n.b,t.b+e))}function uk(n,t,i){const h=n.drawingArea,{extra:l,additionalAngle:a,padding:v,size:r}=i,u=n.getPointPosition(t,h+l+v,a),e=Math.round(eu(p(u.angle+c))),f=function(n,t,i){return 90===i||270===i?n-=t/2:(i>270||i<90)&&(n-=t),n}(u.y,r.h,e),o=function(n){return 0===n||180===n?"center":n<180?"left":"right"}(e),s=function(n,t,i){return"right"===i?n-=t:"center"===i&&(n-=t/2),n}(u.x,r.w,o);return{visible:!0,x:u.x,y:f,textAlign:o,left:s,top:f,right:s+r.w,bottom:f+r.h}}function fk(n,t){if(!t)return!0;const{left:i,top:r,right:u,bottom:f}=n;return!(ot({x:i,y:r},t)||ot({x:i,y:f},t)||ot({x:u,y:r},t)||ot({x:u,y:f},t))}function ek(n,i,r){const{left:u,top:f,right:o,bottom:s}=r,{backdropColor:e}=i;if(!t(e)){const r=ii(i.borderRadius),t=w(i.backdropPadding);n.fillStyle=e;const h=u-t.left,c=f-t.top,l=o-u+t.width,a=s-f+t.height;Object.values(r).some(n=>0!==n)?(n.beginPath(),gi(n,{x:h,y:c,w:l,h:a,radius:r}),n.fill()):n.fillRect(h,c,l,a)}}function wa(n,t,i,r){const{ctx:u}=n;if(i)u.arc(n.xCenter,n.yCenter,t,0,o);else{let i=n.getPointPosition(0,t);u.moveTo(i.x,i.y);for(let f=1;f<r;f++)i=n.getPointPosition(f,t),u.lineTo(i.x,i.y)}}function ba(n,t){return n-t}function ka(n,i){if(t(i))return null;const u=n._adapter,{parser:f,round:e,isoWeekday:o}=n._parseOpts;let r=i;return"function"==typeof f&&(r=f(r)),h(r)||(r="string"==typeof f?u.parse(r,f):u.parse(r)),null===r?null:(e&&(r="week"!==e||!oi(o)&&!0!==o?u.startOf(r,e):u.startOf(r,"isoWeek",o)),+r)}function da(n,t,i,r){const u=g.length;for(let f=g.indexOf(n);f<u-1;++f){const n=ne[g[f]],u=n.steps?n.steps:Number.MAX_SAFE_INTEGER;if(n.common&&Math.ceil((i-t)/(u*n.size))<=r)return g[f]}return g[u-1]}function ga(n,t,i){if(i){if(i.length){const{lo:r,hi:u}=su(i,t);n[i[r]>=t?i[r]:i[u]]=!0}}else n[t]=!0}function nv(n,t,i){const u=[],e={},o=t.length;let r,f;for(r=0;r<o;++r)f=t[r],e[f]=r,u.push({value:f,major:!1});return 0!==o&&i?function(n,t,i,r){const e=n._adapter,o=+e.startOf(t[0].value,r),s=t[t.length-1].value;let u,f;for(u=o;u<=s;u=+e.add(u,1,r))f=i[u],f>=0&&(t[f].major=!0);return t}(n,u,e,i):u}function ff(n,t,i){let e,o,f,s,r=0,u=n.length-1;i?(t>=n[r].pos&&t<=n[u].pos&&({lo:r,hi:u}=ht(n,"pos",t)),{pos:e,time:f}=n[r],{pos:o,time:s}=n[u]):(t>=n[r].time&&t<=n[u].time&&({lo:r,hi:u}=ht(n,"time",t)),{time:e,pos:f}=n[r],{time:o,pos:s}=n[u]);const h=o-e;return h?f+(s-f)*(t-e)/h:f}function tv(n){return nh[n%nh.length]}function iv(n){return bp[n%bp.length]}function ok(n){let t=0;return(i,r)=>{const u=n.getDatasetMeta(r).controller;u instanceof ds?t=function(n,t){return n.backgroundColor=n.data.map(()=>tv(t++)),t}(i,t):u instanceof wp?t=function(n,t){return n.backgroundColor=n.data.map(()=>iv(t++)),t}(i,t):u&&(t=function(n,t){return n.borderColor=tv(t),n.backgroundColor=iv(t),++t}(i,t))}}function rv(n){let t;for(t in n)if(n[t].borderColor||n[t].backgroundColor)return!0;return!1}function uv(n){if(n._decimated){const t=n._data;delete n._decimated;delete n._data;Object.defineProperty(n,"data",{configurable:!0,enumerable:!0,writable:!0,value:t})}}function fv(n){n.data.datasets.forEach(n=>{uv(n)})}function ns(n,t,i,r){if(!r){let r=t[n],u=i[n];return"angle"===n&&(r=p(r),u=p(u)),{property:n,start:r,end:u}}}function ef(n,t,i){for(;t>n;t--){const n=i[t];if(!isNaN(n.x)&&!isNaN(n.y))break}return t}function ev(n,t,i,r){return n&&t?r(n[i],t[i]):n?n[i]:t?t[i]:0}function ov(n,t){let i=[],r=!1;return e(n)?(r=!0,i=n):i=function(n,t){const{x:r=null,y:u=null}=n||{},f=t.points,i=[];return t.segments.forEach(({start:t,end:n})=>{n=ef(t,n,f);const e=f[t],o=f[n];null!==u?(i.push({x:e.x,y:u}),i.push({x:o.x,y:u})):null!==r&&(i.push({x:r,y:e.y}),i.push({x:r,y:o.y}))}),i}(n,t),i.length?new df({points:i,options:{tension:0},_loop:r,_fullLoop:r}):null}function sv(n){return n&&!1!==n.fill}function sk(n,t,i){let r=n[t].fill;const f=[t];let u;if(!i)return r;for(;!1!==r&&-1===f.indexOf(r);){if(!h(r))return r;if(u=n[r],!u)return!1;if(u.visible)return r;f.push(r);r=u.fill}return!1}function hk(t,r,u){const f=function(t){const u=t.options,r=u.fill;let i=n(r&&r.target,r);return(void 0===i&&(i=!!u.backgroundColor),!1===i||null===i)?!1:!0===i?"origin":i}(t);if(i(f))return!isNaN(f.value)&&f;let e=parseFloat(f);return h(e)&&Math.floor(e)===e?function(n,t,i,r){return("-"!==n&&"+"!==n||(i=t+i),i===t||i<0||i>=r)?!1:i}(f[0],r,e,u):["origin","start","end","stack","shape"].indexOf(f)>=0&&f}function ck(n,t,i){const r=[];for(let u=0;u<i.length;u++){const s=i[u],{first:e,last:o,point:f}=lk(s,t,"x");if(!(!f||e&&o))if(e)r.unshift(f);else if(n.push(f),!o)break}n.push(...r)}function lk(n,t,i){const r=n.interpolate(t,i);if(!r)return{};const u=r[i],f=n.segments,e=n.points;let o=!1,s=!1;for(let n=0;n<f.length;n++){const t=f[n],r=e[t.start][i],h=e[t.end][i];if(et(u,r,h)){o=u===r;s=u===h;break}}return{first:o,last:s,point:r}}function ak(n){const{chart:u,fill:t,line:f}=n;if(h(t))return function(n,t){const i=n.getDatasetMeta(t),r=i&&n.isDatasetVisible(t);return r?i.dataset:null}(u,t);if("stack"===t)return function(n){const{scale:i,index:e,line:t}=n,r=[],u=t.segments,o=t.points,f=function(n,t){const i=[],r=n.getMatchingVisibleMetas("line");for(let n=0;n<r.length;n++){const u=r[n];if(u.index===t)break;u.hidden||i.unshift(u.dataset)}return i}(i,e);f.push(ov({x:null,y:i.bottom},t));for(let n=0;n<u.length;n++){const t=u[n];for(let n=t.start;n<=t.end;n++)ck(r,o[n],f)}return new df({points:r,options:{}})}(n);if("shape"===t)return!0;const r=function(n){const t=n.scale||{};return t.getPointPositionForValue?function(n){const{scale:t,fill:o}=n,r=t.options,s=t.getLabels().length,u=r.reverse?t.max:t.min,f=function(n,t,r){let u;return u="start"===n?r:"end"===n?t.options.reverse?t.min:t.max:i(n)?n.value:t.getBaseValue(),u}(o,t,u),e=[];if(r.grid.circular){const n=t.getPointPositionForValue(0,u);return new kp({x:n.x,y:n.y,radius:t.getDistanceFromCenterForValue(f)})}for(let n=0;n<s;++n)e.push(t.getPointPositionForValue(n,f));return e}(n):function(n){const{scale:r={},fill:u}=n,t=function(n,t){let r=null;return"start"===n?r=t.bottom:"end"===n?r=t.top:i(n)?r=t.getPixelForValue(n.value):t.getBasePixel&&(r=t.getBasePixel()),r}(u,r);if(h(t)){const n=r.isHorizontal();return{x:n?t:null,y:n?null:t}}return null}(n)}(n);return r instanceof kp?r:ov(r,f)}function ts(n,t,i){const u=ak(t),{chart:f,index:o,line:r,scale:s,axis:h}=t,e=r.options,c=e.fill,p=e.backgroundColor,{above:l=d,below:a=d}=c||{},v=f.getDatasetMeta(o),y=oo(f,v);u&&r.points.length&&(vr(n,i),function(n,t){const{line:u,target:i,above:e,below:o,area:f,scale:s,clip:h}=t,r=u._loop?"angle":t.axis;n.save();let c=o;o!==e&&("x"===r?(hv(n,i,f.top),is(n,{line:u,target:i,color:e,scale:s,property:r,clip:h}),n.restore(),n.save(),hv(n,i,f.bottom)):"y"===r&&(cv(n,i,f.left),is(n,{line:u,target:i,color:o,scale:s,property:r,clip:h}),n.restore(),n.save(),cv(n,i,f.right),c=e));is(n,{line:u,target:i,color:c,scale:s,property:r,clip:h});n.restore()}(n,{line:r,target:u,above:l,below:a,area:i,scale:s,axis:h,clip:y}),yr(n))}function hv(n,t,i){const{segments:e,points:r}=t;let f=!0,u=!1;n.beginPath();for(const o of e){const{start:s,end:h}=o,e=r[s],c=r[ef(s,h,r)];f?(n.moveTo(e.x,e.y),f=!1):(n.lineTo(e.x,i),n.lineTo(e.x,e.y));u=!!t.pathSegment(n,o,{move:u});u?n.closePath():n.lineTo(c.x,i)}n.lineTo(t.first().x,i);n.closePath();n.clip()}function cv(n,t,i){const{segments:e,points:r}=t;let f=!0,u=!1;n.beginPath();for(const o of e){const{start:s,end:h}=o,e=r[s],c=r[ef(s,h,r)];f?(n.moveTo(e.x,e.y),f=!1):(n.lineTo(i,e.y),n.lineTo(e.x,e.y));u=!!t.pathSegment(n,o,{move:u});u?n.closePath():n.lineTo(i,c.y)}n.lineTo(i,t.first().y);n.closePath();n.clip()}function is(n,t){const{line:u,target:i,property:r,scale:f,clip:e}=t,o=function(n,t,i){const e=n.segments,r=n.points,f=t.points,u=[];for(const n of e){let{start:s,end:e}=n;e=ef(s,e,r);const o=ns(i,r[s],r[e],n.loop);if(!t.segments){u.push({source:n,target:o,start:r[s],end:r[e]});continue}const h=eo(t,o);for(const t of h){const e=ns(i,f[t.start],f[t.end],t.loop),s=fo(n,r,e);for(const n of s)u.push({source:n,target:t,start:{[i]:ev(o,e,"start",Math.max)},end:{[i]:ev(o,e,"end",Math.min)}})}}return u}(u,i,r);for(const{source:t,target:c,start:s,end:h}of o){const{style:{backgroundColor:v=o}={}}=t,a=!0!==i;n.save();n.fillStyle=v;vk(n,f,e,a&&ns(r,s,h));n.beginPath();const o=!!u.pathSegment(n,t);let l;if(a){o?n.closePath():lv(n,i,h,r);const t=!!i.pathSegment(n,c,{move:o,reverse:!0});l=o&&t;l||lv(n,i,s,r)}n.closePath();n.fill(l?"evenodd":"nonzero");n.restore()}}function vk(n,t,i,r){const u=t.chart.chartArea,{property:f,start:e,end:o}=r||{};if("x"===f||"y"===f){let t,r,s,h;"x"===f?(t=e,r=u.top,s=o,h=u.bottom):(t=u.left,r=e,s=u.right,h=o);n.beginPath();i&&(t=Math.max(t,i.left),s=Math.min(s,i.right),r=Math.max(r,i.top),h=Math.min(h,i.bottom));n.rect(t,r,s-t,h-r);n.clip()}}function lv(n,t,i,r){const u=t.interpolate(i,r);u&&n.lineTo(u.x,u.y)}function av(n,t){return t*(n.text?n.text.length:0)}function st(n,t){return t&&(e(t)?Array.prototype.push.apply(n,t):n.push(t)),n}function yt(n){return("string"==typeof n||n instanceof String)&&n.indexOf("\n")>-1?n.split("\n"):n}function yk(n,t){const{element:f,datasetIndex:r,index:i}=t,u=n.getDatasetMeta(r).controller,{label:e,value:o}=u.getLabelAndValue(i);return{chart:n,label:e,parsed:u.getParsed(i),raw:n.data.datasets[r].data[i],formattedValue:o,dataset:u.getDataset(),dataIndex:i,datasetIndex:r,element:f}}function vv(n,t){const i=n.chart.ctx,{body:h,footer:d,title:g}=n,{boxWidth:nt,boxHeight:tt}=t,f=a(t.bodyFont),y=a(t.titleFont),p=a(t.footerFont),c=g.length,l=d.length,b=h.length,k=w(t.padding);let e=k.height,o=0,s=h.reduce((n,t)=>n+t.before.length+t.lines.length+t.after.length,0);(s+=n.beforeBody.length+n.afterBody.length,c&&(e+=c*y.lineHeight+(c-1)*t.titleSpacing+t.titleMarginBottom),s)&&(e+=b*(t.displayColors?Math.max(tt,f.lineHeight):f.lineHeight)+(s-b)*f.lineHeight+(s-1)*t.bodySpacing);l&&(e+=t.footerMarginTop+l*p.lineHeight+(l-1)*t.footerSpacing);let v=0;const r=function(n){o=Math.max(o,i.measureText(n).width+v)};return i.save(),i.font=y.string,u(n.title,r),i.font=f.string,u(n.beforeBody.concat(n.afterBody),r),v=t.displayColors?nt+2+t.boxPadding:0,u(h,n=>{u(n.before,r),u(n.lines,r),u(n.after,r)}),v=0,i.font=p.string,u(n.footer,r),i.restore(),o+=k.width,{width:o,height:e}}function pk(n,t,i,r){const{x:f,width:e}=i,{width:o,chartArea:{left:s,right:h}}=n;let u="center";return"center"===r?u=f<=(s+h)/2?"left":"right":f<=e/2?u="left":f>=o-e/2&&(u="right"),function(n,t,i,r){const{x:u,width:f}=r,e=i.caretSize+i.caretPadding;return"left"===n&&u+f+e>t.width||"right"===n&&u-f-e<0||void 0}(u,n,t,i)&&(u="center"),u}function yv(n,t,i){const r=i.yAlign||t.yAlign||function(n,t){const{y:i,height:r}=t;return i<r/2?"top":i>n.height-r/2?"bottom":"center"}(n,i);return{xAlign:i.xAlign||t.xAlign||pk(n,t,i,r),yAlign:r}}function pv(n,t,i,r){const{caretSize:e,caretPadding:h,cornerRadius:c}=n,{xAlign:u,yAlign:s}=i,o=e+h,{topLeft:l,topRight:a,bottomLeft:y,bottomRight:p}=ii(c);let f=function(n,t){let{x:i,width:r}=n;return"right"===t?i-=r:"center"===t&&(i-=r/2),i}(t,u);const w=function(n,t,i){let{y:r,height:u}=n;return"top"===t?r+=i:r-="bottom"===t?u+i:u/2,r}(t,s,o);return"center"===s?"left"===u?f+=o:"right"===u&&(f-=o):"left"===u?f-=Math.max(l,y)+e:"right"===u&&(f+=Math.max(a,p)+e),{x:v(f,0,r.width-t.width),y:v(w,0,r.height-t.height)}}function sf(n,t,i){const r=w(i.padding);return"center"===t?n.x+n.width/2:"right"===t?n.x+n.width-r.right:n.x+r.left}function wv(n){return st([],yt(n))}function bv(n,t){const i=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return i?n.override(i):n}function d(n,t,i,r){const u=n[t].call(i,r);return void 0===u?nw[t].call(i,r):u}var kv=Object.freeze({__proto__:null,get Colors(){return gv},get Decimation(){return ny},get Filler(){return ty},get Legend(){return iy},get SubTitle(){return uy},get Title(){return ry},get Tooltip(){return fy}}),rt,ir,s,dv,rs,y,us,tt,fs,es,hf,os,gv,ny,ty,iy,ry,uy,fy;const ey=(()=>{let n=0;return()=>n++})(),oy=(n,t)=>"string"==typeof n&&n.endsWith("%")?parseFloat(n)/100:+n/t,ss=(n,t)=>"string"==typeof n&&n.endsWith("%")?parseFloat(n)/100*t:+n,sy={"":n=>n,x:n=>n.x,y:n=>n.y},rr=n=>void 0!==n,pt=n=>"function"==typeof n,hs=(n,t)=>{if(n.size!==t.size)return!1;for(const i of n)if(!t.has(i))return!1;return!0},r=Math.PI,o=2*r,hy=o+r,nu=Number.POSITIVE_INFINITY,cy=r/180,c=r/2,ui=r/4,cs=2*r/3,wt=Math.log10,ut=Math.sign,ht=(n,t,i,r)=>su(n,i,r?r=>{const u=n[r][t];return u<i||u===i&&n[r+1][t]===i}:r=>n[r][t]<i),ly=(n,t,i)=>su(n,i,r=>n[r][t]>=i),ay=["push","pop","shift","splice","unshift"],ls="undefined"==typeof window?function(n){return n()}:window.requestAnimationFrame,cf=n=>"start"===n?"left":"end"===n?"right":"center",b=(n,t,i)=>"start"===n?t:"end"===n?i:(t+i)/2,vy=(n,t,i,r)=>n===(r?"left":"right")?i:"center"===n?(t+i)/2:t;class wk{constructor(){this._request=null;this._charts=new Map;this._running=!1;this._lastDate=void 0}_notify(n,t,i,r){const f=t.listeners[r],u=t.duration;f.forEach(r=>r({chart:n,initial:t.initial,numSteps:u,currentStep:Math.min(i-t.start,u)}))}_refresh(){this._request||(this._running=!0,this._request=ls.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(n=Date.now()){let t=0;this._charts.forEach((i,r)=>{if(i.running&&i.items.length){const u=i.items;let f,e=u.length-1,o=!1;for(;e>=0;--e)f=u[e],f._active?(f._total>i.duration&&(i.duration=f._total),f.tick(n),o=!0):(u[e]=u[u.length-1],u.pop());o&&(r.draw(),this._notify(r,i,n,"progress"));u.length||(i.running=!1,this._notify(r,i,n,"complete"),i.initial=!1);t+=u.length}});this._lastDate=n;0===t&&(this._running=!1)}_getAnims(n){const i=this._charts;let t=i.get(n);return t||(t={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},i.set(n,t)),t}listen(n,t,i){this._getAnims(n).listeners[t].push(i)}add(n,t){t&&t.length&&this._getAnims(n).items.push(...t)}has(n){return this._getAnims(n).items.length>0}start(n){const t=this._charts.get(n);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((n,t)=>Math.max(n,t._duration),0),this._refresh())}running(n){if(!this._running)return!1;const t=this._charts.get(n);return!!(t&&t.running&&t.items.length)}stop(n){const t=this._charts.get(n);if(t&&t.items.length){const r=t.items;let i=r.length-1;for(;i>=0;--i)r[i].cancel();t.items=[];this._notify(n,t,Date.now(),"complete")}}remove(n){return this._charts.delete(n)}}rt=new wk;
/*!
    * @kurkle/color v0.3.2
    * https://github.com/kurkle/color#readme
    * (c) 2023 Jukka Kurkela
    * Released under the MIT License
    */
const fi=(n,t,i)=>Math.max(Math.min(n,i),t),it={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},as=[..."0123456789ABCDEF"],bk=n=>as[15&n],kk=n=>as[(240&n)>>4]+as[15&n],lf=n=>(240&n)>>4==(15&n),dk=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/,yy={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},py={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let af;const gk=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/,vs=n=>n<=.0031308?12.92*n:1.055*Math.pow(n,1/2.4)-.055,ur=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);class vf{constructor(n){if(n instanceof vf)return n;const f=typeof n;let r;var t,u,i;"object"===f?r=kh(n):"string"===f&&(i=(t=n).length,"#"===t[0]&&(4===i||5===i?u={r:255&17*it[t[1]],g:255&17*it[t[2]],b:255&17*it[t[3]],a:5===i?17*it[t[4]]:255}:7!==i&&9!==i||(u={r:it[t[1]]<<4|it[t[2]],g:it[t[3]]<<4|it[t[4]],b:it[t[5]]<<4|it[t[6]],a:9===i?it[t[7]]<<4|it[t[8]]:255})),r=u||ew(n)||ow(n));this._rgb=r;this._valid=!!r}get valid(){return this._valid}get rgb(){var n=bh(this._rgb);return n&&(n.a=at(n.a)),n}set rgb(n){this._rgb=kh(n)}rgbString(){return this._valid?(n=this._rgb)&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${at(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`):void 0;var n}hexString(){if(this._valid)return iw(this._rgb)}hslString(){if(this._valid)return function(n){if(n){const t=le(n),i=t[0],r=yh(t[1]),u=yh(t[2]);return n.a<255?`hsla(${i}, ${r}%, ${u}%, ${at(n.a)})`:`hsl(${i}, ${r}%, ${u}%)`}}(this._rgb)}mix(n,t){if(n){const i=this.rgb,r=n.rgb;let u;const o=t===u?.5:t,f=2*o-1,s=i.a-r.a,e=((f*s==-1?f:(f+s)/(1+f*s))+1)/2;u=1-e;i.r=255&e*i.r+u*r.r+.5;i.g=255&e*i.g+u*r.g+.5;i.b=255&e*i.b+u*r.b+.5;i.a=o*i.a+(1-o)*r.a;this.rgb=i}return this}interpolate(n,t){return n&&(this._rgb=function(n,t,i){const r=ur(at(n.r)),u=ur(at(n.g)),f=ur(at(n.b));return{r:kt(vs(r+i*(ur(at(t.r))-r))),g:kt(vs(u+i*(ur(at(t.g))-u))),b:kt(vs(f+i*(ur(at(t.b))-f))),a:n.a+i*(t.a-n.a)}}(this._rgb,n._rgb,t)),this}clone(){return new vf(this.rgb)}alpha(n){return this._rgb.a=kt(n),this}clearer(n){return this._rgb.a*=1-n,this}greyscale(){const n=this._rgb,t=hr(.3*n.r+.59*n.g+.11*n.b);return n.r=n.g=n.b=t,this}opaquer(n){return this._rgb.a*=1+n,this}negate(){const n=this._rgb;return n.r=255-n.r,n.g=255-n.g,n.b=255-n.b,this}lighten(n){return hu(this._rgb,2,n),this}darken(n){return hu(this._rgb,2,-n),this}saturate(n){return hu(this._rgb,1,n),this}desaturate(n){return hu(this._rgb,1,-n),this}rotate(n){return function(n,t){var i=le(n);i[0]=wh(i[0]+t);i=ve(i);n.r=i[0];n.g=i[1];n.b=i[2]}(this._rgb,n),this}}const nd=["x","y","borderWidth","radius","tension"],td=["color","borderColor","backgroundColor"],wy=new Map,by={values:n=>e(n)?n:""+n,numeric(n,t,i){if(0===n)return"0";const s=this.chart.options.locale;let r,u=n;if(i.length>1){const t=Math.max(Math.abs(i[0].value),Math.abs(i[i.length-1].value));(t<.0001||t>1e15)&&(r="scientific");u=function(n,t){let i=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(i)>=1&&n!==Math.floor(n)&&(i=n-Math.floor(n)),i}(n,i)}const f=wt(Math.abs(u)),e=isNaN(f)?1:Math.max(Math.min(-1*Math.floor(f),20),0),o={notation:r,minimumFractionDigits:e,maximumFractionDigits:e};return Object.assign(o,this.options.ticks.format),di(n,s,o)},logarithmic(n,t,i){if(0===n)return"0";const r=i[t].significand||n/Math.pow(10,Math.floor(wt(n)));return[1,2,3,5,10,15].includes(r)||t>.8*i.length?by.numeric.call(this,n,t,i):""}};ir={formatters:by};const ai=Object.create(null),ys=Object.create(null);class id{constructor(n,t){this.animation=void 0;this.backgroundColor="rgba(0,0,0,0.1)";this.borderColor="rgba(0,0,0,0.1)";this.color="#666";this.datasets={};this.devicePixelRatio=n=>n.chart.platform.getDevicePixelRatio();this.elements={};this.events=["mousemove","mouseout","click","touchstart","touchmove",];this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null};this.hover={};this.hoverBackgroundColor=(n,t)=>lu(t.backgroundColor);this.hoverBorderColor=(n,t)=>lu(t.borderColor);this.hoverColor=(n,t)=>lu(t.color);this.indexAxis="x";this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1};this.maintainAspectRatio=!0;this.onHover=null;this.onClick=null;this.parsing=!0;this.plugins={};this.responsive=!0;this.scale=void 0;this.scales={};this.showLine=!0;this.drawActiveElementsOnTop=!0;this.describe(n);this.apply(t)}set(n,t){return pe(this,n,t)}get(n){return lr(this,n)}describe(n,t){return pe(ys,n,t)}override(n,t){return pe(ai,n,t)}route(t,r,u,f){const o=lr(this,t),s=lr(this,u),e="_"+r;Object.defineProperties(o,{[e]:{value:o[r],writable:!0},[r]:{enumerable:!0,get(){const t=this[e],r=s[f];return i(t)?Object.assign({},r,t):n(t,r)},set(n){this[e]=n}}})}apply(n){n.forEach(n=>n(this))}}s=new id({_scriptable:n=>!n.startsWith("on"),_indexable:n=>"events"!==n,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0});n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:n=>"onProgress"!==n&&"onComplete"!==n&&"fn"!==n});n.set("animations",{colors:{type:"color",properties:td},numbers:{type:"number",properties:nd}});n.describe("animations",{_fallback:"animation"});n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:n=>0|n}}}})},function(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(n,t)=>t.lineWidth,tickColor:(n,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:ir.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}});n.route("scale.ticks","color","","color");n.route("scale.grid","color","","borderColor");n.route("scale.border","color","","borderColor");n.route("scale.title","color","","color");n.describe("scale",{_fallback:!1,_scriptable:n=>!n.startsWith("before")&&!n.startsWith("after")&&"callback"!==n&&"parser"!==n,_indexable:n=>"borderDash"!==n&&"tickBorderDash"!==n&&"dash"!==n});n.describe("scales",{_fallback:"scale"});n.describe("scale.ticks",{_scriptable:n=>"backdropPadding"!==n&&"callback"!==n,_indexable:n=>"backdropPadding"!==n})},]);const yf=n=>n.ownerDocument.defaultView.getComputedStyle(n,null),rd=["top","right","bottom","left"],ud=(n,t,i)=>(n>0||t>0)&&(!i||!i.shadowRoot),ei=n=>Math.round(10*n)/10,ky=function(){let n=!1;try{const t={get passive(){return n=!0,!1}};au()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch(n){}return n}(),fd=(n,t)=>n?n+fu(t):t,ps=(n,t)=>i(t)&&"adapters"!==n&&(null===Object.getPrototypeOf(t)||t.constructor===Object),ed=(n,t)=>!0===n?t:"string"==typeof n?lt(t,n):void 0,od=Number.EPSILON||1e-14,fr=(n,t)=>t<n.length&&!n[t].skip&&n[t],dy=n=>"x"===n?"y":"x",pf=n=>0===n||1===n,gy=(n,t,i)=>-Math.pow(2,10*(n-=1))*Math.sin((n-t)*o/i),np=(n,t,i)=>Math.pow(2,-10*n)*Math.sin((n-t)*o/i)+1,er={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>1-Math.cos(n*c),easeOutSine:n=>Math.sin(n*c),easeInOutSine:n=>-.5*(Math.cos(r*n)-1),easeInExpo:n=>0===n?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>1===n?1:1-Math.pow(2,-10*n),easeInOutExpo:n=>pf(n)?n:n<.5?.5*Math.pow(2,10*(2*n-1)):.5*(2-Math.pow(2,-10*(2*n-1))),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>pf(n)?n:gy(n,.075,.3),easeOutElastic:n=>pf(n)?n:np(n,.075,.3),easeInOutElastic(n){const t=.1125;return pf(n)?n:n<.5?.5*gy(2*n,t,.45):.5+.5*np(2*n-1,t,.45)},easeInBack(n){const t=1.70158;return n*n*((t+1)*n-t)},easeOutBack(n){const t=1.70158;return(n-=1)*n*((t+1)*n+t)+1},easeInOutBack(n){let t=1.70158;return(n/=.5)<1?n*n*((1+(t*=1.525))*n-t)*.5:.5*((n-=2)*n*((1+(t*=1.525))*n+t)+2)},easeInBounce:n=>1-er.easeOutBounce(1-n),easeOutBounce(n){const i=7.5625,t=2.75;return n<1/t?i*n*n:n<2/t?i*(n-=1.5/t)*n+.75:n<2.5/t?i*(n-=2.25/t)*n+.9375:i*(n-=2.625/t)*n+.984375},easeInOutBounce:n=>n<.5?.5*er.easeInBounce(2*n):.5*er.easeOutBounce(2*n-1)+.5},sd=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,hd=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/,cd=n=>+n||0;dv=Object.freeze({__proto__:null,HALF_PI:c,INFINITY:nu,PI:r,PITAU:hy,QUARTER_PI:ui,RAD_PER_DEG:cy,TAU:o,TWO_THIRDS_PI:cs,_addGrace:pc,_alignPixel:gt,_alignStartEnd:b,_angleBetween:ki,_angleDiff:hh,_arrayUnique:oe,_attachContext:hi,_bezierCurveTo:rc,_bezierInterpolation:vc,_boundSegment:fo,_boundSegments:eo,_capitalize:fu,_computeSegments:kc,_createResolver:wu,_decimalPlaces:ue,_deprecated:function(n,t,i,r){void 0!==t&&console.warn(n+': "'+i+'" is deprecated. Please use "'+r+'" instead')},_descriptors:ge,_elementsEqual:or,_factorize:oh,_filterBetween:lh,_getParentNode:vu,_getStartAndCountOfVisiblePoints:he,_int16Range:ch,_isBetween:et,_isClickEvent:eh,_isDomSupported:au,_isPointInArea:ot,_limitValue:v,_longestText:tc,_lookup:su,_lookupByKey:ht,_measureText:ar,_merger:rh,_mergerIf:uh,_normalizeAngle:p,_parseObjectDataRadialScale:to,_pointInLine:ti,_readValueToProps:ku,_rlookupByKey:ly,_scaleRangesChanged:ce,_setMinAndMaxByKey:re,_splitKey:fh,_steppedInterpolation:ac,_steppedLineTo:ic,_textX:vy,_toLeftRightCenter:cf,_updateBezierControlPoints:lc,addRoundedRectPath:gi,almostEquals:bi,almostWhole:sh,callback:f,clearCanvas:ke,clipArea:vr,clone:sr,color:ye,createContext:vt,debounce:vh,defined:rr,distanceBetweenPoints:ou,drawPoint:pu,drawPointLegend:de,each:u,easingEffects:er,finiteOrDefault:k,fontString:function(n,t,i){return t+" "+n+"px "+i},formatNumber:di,getAngleFromPoint:fe,getDatasetClipArea:oo,getHoverColor:lu,getMaximumSize:gh,getRelativePosition:dt,getRtlAdapter:ci,getStyle:dh,isArray:e,isFinite:h,isFunction:pt,isNullOrUndef:t,isNumber:oi,isObject:i,isPatternOrGradient:cu,listenArrayEvents:ah,log10:wt,merge:pi,mergeIf:wi,niceNum:ie,noop:ft,overrideTextDirection:ro,readUsedSize:be,renderText:ni,requestAnimFrame:ls,resolve:nr,resolveObjectKey:lt,restoreTextDirection:uo,retinaScale:we,setsEqual:hs,sign:ut,splineCurve:hc,splineCurveMonotone:cc,supportsEventListenerOptions:ky,throttled:se,toDegrees:eu,toDimension:ss,toFont:a,toFontString:nc,toLineHeight:yc,toPadding:w,toPercentage:oy,toRadians:nt,toTRBL:io,toTRBLCorners:ii,uid:ey,unclipArea:yr,unlistenArrayEvents:ee,valueOrDefault:n});rs={evaluateInteractionItems:pr,modes:{index(n,t,i,r){const u=dt(t,n),f=i.axis||"x",e=i.includeInvisible||!1,o=i.intersect?so(n,u,f,r,e):ho(n,u,f,!1,r,e),s=[];return o.length?(n.getSortedVisibleDatasetMetas().forEach(n=>{const i=o[0].index,t=n.data[i];t&&!t.skip&&s.push({element:t,datasetIndex:n.index,index:i})}),s):[]},dataset(n,t,i,r){const f=dt(t,n),e=i.axis||"xy",o=i.includeInvisible||!1;let u=i.intersect?so(n,f,e,r,o):ho(n,f,e,!1,r,o);if(u.length>0){const t=u[0].datasetIndex,i=n.getDatasetMeta(t).data;u=[];for(let n=0;n<i.length;++n)u.push({element:i[n],datasetIndex:t,index:n})}return u},point:(n,t,i,r)=>so(n,dt(t,n),i.axis||"xy",r,i.includeInvisible||!1),nearest(n,t,i,r){const u=dt(t,n),f=i.axis||"xy",e=i.includeInvisible||!1;return ho(n,u,f,i.intersect,r,e)},x:(n,t,i,r)=>nl(n,dt(t,n),"x",i.intersect,r),y:(n,t,i,r)=>nl(n,dt(t,n),"y",i.intersect,r)}};const tp=["left","top","right","bottom"];y={addBox(n,t){n.boxes||(n.boxes=[]);t.fullSize=t.fullSize||!1;t.position=t.position||"top";t.weight=t.weight||0;t._layers=t._layers||function(){return[{z:0,draw(n){t.draw(n)}},]};n.boxes.push(t)},removeBox(n,t){const i=n.boxes?n.boxes.indexOf(t):-1;-1!==i&&n.boxes.splice(i,1)},configure(n,t,i){t.fullSize=i.fullSize;t.position=i.position;t.weight=i.weight},update(n,t,i,r){if(n){const e=w(n.options.layout.padding),l=Math.max(t-e.width,0),a=Math.max(i-e.height,0),s=function(n){const t=function(n){const f=[];let t,e,i,r,u,o;for(t=0,e=(n||[]).length;t<e;++t)i=n[t],{position:r,options:{stack:u,stackWeight:o=1}}=i,f.push({index:t,box:i,pos:r,horizontal:i.isHorizontal(),weight:i.weight,stack:u&&r+u,stackWeight:o});return f}(n),s=br(t.filter(n=>n.box.fullSize),!0),i=br(wr(t,"left"),!0),r=br(wr(t,"right")),u=br(wr(t,"top"),!0),f=br(wr(t,"bottom")),e=tl(t,"x"),o=tl(t,"y");return{fullSize:s,leftAndTop:i.concat(u),rightAndBottom:r.concat(o).concat(f).concat(e),chartArea:wr(t,"chartArea"),vertical:i.concat(r).concat(o),horizontal:u.concat(f).concat(e)}}(n.boxes),c=s.vertical,v=s.horizontal;u(n.boxes,n=>{"function"==typeof n.beforeLayout&&n.beforeLayout()});const p=c.reduce((n,t)=>t.box.options&&!1===t.box.options.display?n:n+1,0)||1,o=Object.freeze({outerWidth:t,outerHeight:i,padding:e,availableWidth:l,availableHeight:a,vBoxMaxWidth:l/2/p,hBoxMaxHeight:a/2}),y=Object.assign({},e);rl(y,w(r));const f=Object.assign({maxPadding:y,w:l,h:a,x:e.left,y:e.top},e),h=yw(c.concat(v),o);kr(s.fullSize,f,o,h);kr(c,f,o,h);kr(v,f,o,h)&&kr(c,f,o,h),function(n){function t(t){const r=Math.max(i[t]-n[t],0);return n[t]+=r,r}const i=n.maxPadding;n.y+=t("top");n.x+=t("left");t("right");t("bottom")}(f);ul(s.leftAndTop,f,o,h);f.x+=f.w;f.y+=f.h;ul(s.rightAndBottom,f,o,h);n.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w};u(s.chartArea,t=>{const i=t.box;Object.assign(i,n.chartArea);i.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})})}}};class ws{acquireContext(){}releaseContext(){return!1}addEventListener(){}removeEventListener(){}getDevicePixelRatio(){return 1}getMaximumSize(n,t,i,r){return t=Math.max(0,t||n.width),i=i||n.height,{width:t,height:Math.max(0,r?Math.floor(t/r):i)}}isAttached(){return!0}updateConfig(){}}class ip extends ws{acquireContext(n){return n&&n.getContext&&n.getContext("2d")||null}updateConfig(n){n.options.animation=!1}}const wf="$chartjs",ld={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},rp=n=>null===n||""===n,up=!!ky&&{passive:!0},tu=new Map;let fp=0;class ep extends ws{acquireContext(n,t){const i=n&&n.getContext&&n.getContext("2d");return i&&i.canvas===n?(function(n,t){const i=n.style,r=n.getAttribute("height"),u=n.getAttribute("width");if(n[wf]={initial:{height:r,width:u,style:{display:i.display,height:i.height,width:i.width}}},i.display=i.display||"block",i.boxSizing=i.boxSizing||"border-box",rp(u)){const t=be(n,"width");void 0!==t&&(n.width=t)}if(rp(r))if(""===n.style.height)n.height=n.width/(t||2);else{const t=be(n,"height");void 0!==t&&(n.height=t)}}(n,t),i):null}releaseContext(n){const i=n.canvas;if(!i[wf])return!1;const r=i[wf].initial;["height","width"].forEach(n=>{const u=r[n];t(u)?i.removeAttribute(n):i.setAttribute(n,u)});const u=r.style||{};return Object.keys(u).forEach(n=>{i.style[n]=u[n]}),i.width=i.width,delete i[wf],!0}addEventListener(n,t,i){this.removeEventListener(n,t);const r=n.$proxies||(n.$proxies={}),u={attach:kw,detach:dw,resize:gw}[t]||nb;r[t]=u(n,t,i)}removeEventListener(n,t){const i=n.$proxies||(n.$proxies={}),r=i[t];r&&(({attach:co,detach:co,resize:co}[t]||bw)(n,t,r),i[t]=void 0)}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(n,t,i,r){return gh(n,t,i,r)}isAttached(n){const t=n&&vu(n);return!(!t||!t.isConnected)}}us=Object.freeze({__proto__:null,BasePlatform:ws,BasicPlatform:ip,DomPlatform:ep,_detectPlatform:el});const op="transparent",ad={boolean:(n,t,i)=>i>.5?t:n,color(n,t,i){const u=ye(n||op),r=u.valid&&ye(t||op);return r&&r.valid?r.mix(u,i).hexString():t},number:(n,t,i)=>n+(t-n)*i};class sp{constructor(n,t,i,r){const u=t[i];r=nr([n.to,r,u,n.from]);const f=nr([n.from,u,r]);this._active=!0;this._fn=n.fn||ad[n.type||typeof f];this._easing=er[n.easing]||er.linear;this._start=Math.floor(Date.now()+(n.delay||0));this._duration=this._total=Math.floor(n.duration);this._loop=!!n.loop;this._target=t;this._prop=i;this._from=f;this._to=r;this._promises=void 0}active(){return this._active}update(n,t,i){if(this._active){this._notify(!1);const r=this._target[this._prop],u=i-this._start,f=this._duration-u;this._start=i;this._duration=Math.floor(Math.max(f,n.duration));this._total+=u;this._loop=!!n.loop;this._to=nr([n.to,t,r,n.from]);this._from=nr([n.from,r,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(n){const i=n-this._start,e=this._duration,r=this._prop,u=this._from,o=this._loop,f=this._to;let t;if(this._active=u!==f&&(o||i<e),!this._active)return this._target[r]=f,void this._notify(!0);i<0?this._target[r]=u:(t=i/e%2,t=o&&t>1?2-t:t,t=this._easing(Math.min(1,Math.max(0,t))),this._target[r]=this._fn(u,f,t))}wait(){const n=this._promises||(this._promises=[]);return new Promise((t,i)=>{n.push({res:t,rej:i})})}_notify(n){const i=n?"res":"rej",t=this._promises||[];for(let n=0;n<t.length;n++)t[n][i]()}}class bs{constructor(n,t){this._chart=n;this._properties=new Map;this.configure(t)}configure(n){if(i(n)){const r=Object.keys(s.animation),t=this._properties;Object.getOwnPropertyNames(n).forEach(u=>{const f=n[u];if(i(f)){const n={};for(const t of r)n[t]=f[t];(e(f.properties)&&f.properties||[u]).forEach(i=>{i!==u&&t.has(i)||t.set(i,n)})}})}}_animateOptions(n,t){const i=t.options,r=function(n,t){if(t){let i=n.options;return i?(i.$shared&&(n.options=i=Object.assign({},i,{$shared:!1,$animations:{}})),i):void(n.options=t)}}(n,i);if(!r)return[];const u=this._createAnimations(r,i);return i.$shared&&function(n,t){const i=[],r=Object.keys(t);for(let t=0;t<r.length;t++){const u=n[r[t]];u&&u.active()&&i.push(u.wait())}return Promise.all(i)}(n.options.$animations,i).then(()=>{n.options=i},()=>{}),u}_createAnimations(n,t){const e=this._properties,r=[],u=n.$animations||(n.$animations={}),f=Object.keys(t),o=Date.now();let i;for(i=f.length-1;i>=0;--i){const s=f[i];if("$"!==s.charAt(0)){if("options"===s){r.push(...this._animateOptions(n,t));continue}const h=t[s];let i=u[s];const f=e.get(s);if(i){if(f&&i.active()){i.update(f,h,o);continue}i.cancel()}f&&f.duration?(u[s]=i=new sp(f,n,s,h),r.push(i)):n[s]=h}}return r}update(n,t){if(0===this._properties.size)return void Object.assign(n,t);const i=this._createAnimations(n,t);if(i.length)return rt.add(this._chart,i),!0}}const ks=n=>"reset"===n||"none"===n,hp=(n,t)=>t?n:Object.assign({},n);class bt{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(n,t){this.chart=n;this._ctx=n.ctx;this.index=t;this._cachedDataOpts={};this._cachedMeta=this.getMeta();this._type=this._cachedMeta.type;this.options=void 0;this._parsing=!1;this._data=void 0;this._objectData=void 0;this._sharedOptions=void 0;this._drawStart=void 0;this._drawCount=void 0;this.enableOptionSharing=!1;this.supportsDecimation=!1;this.$context=void 0;this._syncList=[];this.datasetElementType=new.target.datasetElementType;this.dataElementType=new.target.dataElementType;this.initialize()}initialize(){const n=this._cachedMeta;this.configure();this.linkScales();n._stacked=lo(n.vScale,n);this.addElements();this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(n){this.index!==n&&dr(this._cachedMeta);this.index=n}linkScales(){const i=this.chart,t=this._cachedMeta,r=this.getDataset(),o=(n,t,i,r)=>"x"===n?t:"r"===n?r:i,u=t.xAxisID=n(r.xAxisID,ao(i,"x")),f=t.yAxisID=n(r.yAxisID,ao(i,"y")),e=t.rAxisID=n(r.rAxisID,ao(i,"r")),s=t.indexAxis,h=t.iAxisID=o(s,u,f,e),c=t.vAxisID=o(s,f,u,e);t.xScale=this.getScaleForId(u);t.yScale=this.getScaleForId(f);t.rScale=this.getScaleForId(e);t.iScale=this.getScaleForId(h);t.vScale=this.getScaleForId(c)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(n){return this.chart.scales[n]}_getOtherScale(n){const t=this._cachedMeta;return n===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const n=this._cachedMeta;this._data&&ee(this._data,this);n._stacked&&dr(n)}_dataCheck(){const r=this.getDataset(),n=r.data||(r.data=[]),t=this._data;if(i(n)){const t=this._cachedMeta;this._data=function(n,t){const{iScale:o,vScale:s}=t,h="x"===o.axis?"x":"y",c="x"===s.axis?"x":"y",r=Object.keys(n),f=new Array(r.length);let i,e,u;for(i=0,e=r.length;i<e;++i)u=r[i],f[i]={[h]:u,[c]:n[u]};return f}(n,t)}else if(t!==n){if(t){ee(t,this);const n=this._cachedMeta;dr(n);n._parsed=[]}n&&Object.isExtensible(n)&&ah(n,this);this._syncList=[];this._data=n}}addElements(){const n=this._cachedMeta;this._dataCheck();this.datasetElementType&&(n.dataset=new this.datasetElementType)}buildOrUpdateElements(n){const t=this._cachedMeta,i=this.getDataset();let r=!1;this._dataCheck();const u=t._stacked;t._stacked=lo(t.vScale,t);t.stack!==i.stack&&(r=!0,dr(t),t.stack=i.stack);this._resyncElements(n);(r||u!==t._stacked)&&(ll(this,t._parsed),t._stacked=lo(t.vScale,t))}configure(){const n=this.chart.config,t=n.datasetScopeKeys(this._type),i=n.getOptionScopes(this.getDataset(),t,!0);this.options=n.createResolver(i,this.getContext());this._parsing=this.options.parsing;this._cachedDataOpts={}}parse(n,t){const{_cachedMeta:r,_data:u}=this,{iScale:a,_stacked:v}=r,h=a.axis;let f,o,s,c=0===n&&t===u.length||r._sorted,l=n>0&&r._parsed[n-1];if(!1===this._parsing)r._parsed=u,r._sorted=!0,s=u;else{s=e(u[n])?this.parseArrayData(r,u,n,t):i(u[n])?this.parseObjectData(r,u,n,t):this.parsePrimitiveData(r,u,n,t);const a=()=>null===o[h]||l&&o[h]<l[h];for(f=0;f<t;++f)r._parsed[f+n]=o=s[f],c&&(a()&&(c=!1),l=o);r._sorted=c}v&&ll(this,s)}parsePrimitiveData(n,t,i,r){const{iScale:e,vScale:o}=n,c=e.axis,l=o.axis,a=e.getLabels(),v=e===o,s=new Array(r);let u,h,f;for(u=0,h=r;u<h;++u)f=u+i,s[u]={[c]:v||e.parse(a[f],f),[l]:o.parse(t[f],f)};return s}parseArrayData(n,t,i,r){const{xScale:h,yScale:c}=n,o=new Array(r);let u,s,f,e;for(u=0,s=r;u<s;++u)f=u+i,e=t[f],o[u]={x:h.parse(e[0],f),y:c.parse(e[1],f)};return o}parseObjectData(n,t,i,r){const{xScale:h,yScale:c}=n,{xAxisKey:l="x",yAxisKey:a="y"}=this._parsing,o=new Array(r);let u,s,f,e;for(u=0,s=r;u<s;++u)f=u+i,e=t[f],o[u]={x:h.parse(lt(e,l),f),y:c.parse(lt(e,a),f)};return o}getParsed(n){return this._cachedMeta._parsed[n]}getDataElement(n){return this._cachedMeta.data[n]}applyStack(n,t,i){const r=this.chart,u=this._cachedMeta,f=t[n.axis];return hl({keys:sl(r,!0),values:t._stacks[n.axis]._visualValues},f,u.index,{mode:i})}updateRangeFromParsed(n,t,i,r){const u=i[t.axis];let f=null===u?NaN:u;const e=r&&i._stacks[t.axis];r&&e&&(r.values=e,f=hl(r,u,this._cachedMeta.index));n.min=Math.min(n.min,f);n.max=Math.max(n.max,f)}getMinMax(n,t){function e(){r=o[i];const t=r[l.axis];return!h(r[n.axis])||v>t||y<t}const u=this._cachedMeta,o=u._parsed,s=u._sorted&&n===u.iScale,c=o.length,l=this._getOtherScale(n),a=((n,t,i)=>n&&!t.hidden&&t._stacked&&{keys:sl(i,!0),values:null})(t,u,this.chart),f={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:v,max:y}=function(n){const{min:t,max:i,minDefined:r,maxDefined:u}=n.getUserBounds();return{min:r?t:Number.NEGATIVE_INFINITY,max:u?i:Number.POSITIVE_INFINITY}}(l);let i,r;for(i=0;i<c&&(e()||(this.updateRangeFromParsed(f,n,r,a),!s));++i);if(s)for(i=c-1;i>=0;--i)if(!e()){this.updateRangeFromParsed(f,n,r,a);break}return f}getAllParsedValues(n){const r=this._cachedMeta._parsed,u=[];let t,f,i;for(t=0,f=r.length;t<f;++t)i=r[t][n.axis],h(i)&&u.push(i);return u}getMaxOverflow(){return!1}getLabelAndValue(n){const r=this._cachedMeta,t=r.iScale,i=r.vScale,u=this.getParsed(n);return{label:t?""+t.getLabelForValue(u[t.axis]):"",value:i?""+i.getLabelForValue(u[i.axis]):""}}_update(t){const r=this._cachedMeta;this.update(t||"default");r._clip=function(n){let t,r,u,f;return i(n)?(t=n.top,r=n.right,u=n.bottom,f=n.left):t=r=u=f=n,{top:t,right:r,bottom:u,left:f,disabled:!1===n}}(n(this.options.clip,function(n,t,i){if(!1===i)return!1;const r=ol(n,i),u=ol(t,i);return{top:u.end,right:r.end,bottom:u.start,left:r.start}}(r.xScale,r.yScale,this.getMaxOverflow())))}update(){}draw(){const i=this._ctx,s=this.chart,r=this._cachedMeta,e=r.data||[],u=s.chartArea,f=[],t=this._drawStart||0,o=this._drawCount||e.length-t,h=this.options.drawActiveElementsOnTop;let n;for(r.dataset&&r.dataset.draw(i,u,t,o),n=t;n<t+o;++n){const t=e[n];t.hidden||(t.active&&h?f.push(t):t.draw(i,u))}for(n=0;n<f.length;++n)f[n].draw(i,u)}getStyle(n,t){const i=t?"active":"default";return void 0===n&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(n||0,i)}getContext(n,t,i){const u=this.getDataset();let r;if(n>=0&&n<this._cachedMeta.data.length){const t=this._cachedMeta.data[n];r=t.$context||(t.$context=function(n,t,i){return vt(n,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:i,index:t,mode:"default",type:"data"})}(this.getContext(),n,t));r.parsed=this.getParsed(n);r.raw=u.data[n];r.index=r.dataIndex=n}else r=this.$context||(this.$context=function(n,t){return vt(n,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),r.dataset=u,r.index=r.datasetIndex=this.index;return r.active=!!t,r.mode=i,r}resolveDatasetElementOptions(n){return this._resolveElementOptions(this.datasetElementType.id,n)}resolveDataElementOptions(n,t){return this._resolveElementOptions(this.dataElementType.id,t,n)}_resolveElementOptions(n,t="default",i){const e="active"===t,o=this._cachedDataOpts,h=n+"-"+t,c=o[h],u=this.enableOptionSharing&&rr(i);if(c)return hp(c,u);const f=this.chart.config,l=f.datasetElementScopeKeys(this._type,n),a=e?[`${n}Hover`,"hover",n,""]:[n,""],v=f.getOptionScopes(this.getDataset(),l),y=Object.keys(s.elements[n]),r=f.resolveNamedOptions(v,y,()=>this.getContext(i,e,t),a);return r.$shared&&(r.$shared=u,o[h]=Object.freeze(hp(r,u))),r}_resolveAnimations(n,t,i){const u=this.chart,f=this._cachedDataOpts,e=`animation-${t}`,o=f[e];if(o)return o;let r;if(!1!==u.options.animation){const u=this.chart.config,f=u.datasetAnimationScopeKeys(this._type,t),e=u.getOptionScopes(this.getDataset(),f);r=u.createResolver(e,this.getContext(n,i,t))}const s=new bs(u,r&&r.animations);return r&&r._cacheable&&(f[e]=Object.freeze(s)),s}getSharedOptions(n){if(n.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},n))}includeOptions(n,t){return!t||ks(n)||this.chart._animationsDisabled}_getSharedOptions(n,t){const r=this.resolveDataElementOptions(n,t),u=this._sharedOptions,i=this.getSharedOptions(r),f=this.includeOptions(t,i)||i!==u;return this.updateSharedOptions(i,t,r),{sharedOptions:i,includeOptions:f}}updateElement(n,t,i,r){ks(r)?Object.assign(n,i):this._resolveAnimations(t,r).update(n,i)}updateSharedOptions(n,t,i){n&&!ks(t)&&this._resolveAnimations(void 0,t).update(n,i)}_setStyle(n,t,i,r){n.active=r;const u=this.getStyle(t,r);this._resolveAnimations(t,i,r).update(n,{options:!r&&this.getSharedOptions(u)||u})}removeHoverStyle(n,t,i){this._setStyle(n,i,"active",!1)}setHoverStyle(n,t,i){this._setStyle(n,i,"active",!0)}_removeDatasetHoverStyle(){const n=this._cachedMeta.dataset;n&&this._setStyle(n,void 0,"active",!1)}_setDatasetHoverStyle(){const n=this._cachedMeta.dataset;n&&this._setStyle(n,void 0,"active",!0)}_resyncElements(n){const u=this._data,f=this._cachedMeta.data;for(const[n,t,i]of this._syncList)this[n](t,i);this._syncList=[];const t=f.length,i=u.length,r=Math.min(i,t);r&&this.parse(0,r);i>t?this._insertElements(t,i-t,n):i<t&&this._removeElements(i,t-i)}_insertElements(n,t,i=!0){const f=this._cachedMeta,u=f.data,e=n+t;let r;const o=n=>{for(n.length+=t,r=n.length-1;r>=e;r--)n[r]=n[r-t]};for(o(u),r=n;r<e;++r)u[r]=new this.dataElementType;this._parsing&&o(f._parsed);this.parse(n,t);i&&this.updateElements(u,n,t,"reset")}updateElements(){}_removeElements(n,t){const i=this._cachedMeta;if(this._parsing){const r=i._parsed.splice(n,t);i._stacked&&dr(i,r)}i.data.splice(n,t)}_sync(n){if(this._parsing)this._syncList.push(n);else{const[t,i,r]=n;this[t](i,r)}this.chart._dataChanges.push([this.index,...n])}_onDataPush(){const n=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-n,n])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(n,t){t&&this._sync(["_removeElements",n,t]);const i=arguments.length-2;i&&this._sync(["_insertElements",n,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}class ct{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(n){const{x:t,y:i}=this.getProps(["x","y"],n);return{x:t,y:i}}hasValue(){return oi(this.x)&&oi(this.y)}getProps(n,t){const i=this.$animations;if(!t||!i)return this;const r={};return n.forEach(n=>{r[n]=i[n]&&i[n].active()?i[n]._to:this[n]}),r}}const cp=(n,t,i)=>"top"===t||"left"===t?n[t]+i:n[t]-i,lp=(n,t)=>Math.min(t||n,n);class vi extends ct{constructor(n){super();this.id=n.id;this.type=n.type;this.options=void 0;this.ctx=n.ctx;this.chart=n.chart;this.top=void 0;this.bottom=void 0;this.left=void 0;this.right=void 0;this.width=void 0;this.height=void 0;this._margins={left:0,right:0,top:0,bottom:0};this.maxWidth=void 0;this.maxHeight=void 0;this.paddingTop=void 0;this.paddingBottom=void 0;this.paddingLeft=void 0;this.paddingRight=void 0;this.axis=void 0;this.labelRotation=void 0;this.min=void 0;this.max=void 0;this._range=void 0;this.ticks=[];this._gridLineItems=null;this._labelItems=null;this._labelSizes=null;this._length=0;this._maxLength=0;this._longestTextCache={};this._startPixel=void 0;this._endPixel=void 0;this._reversePixels=!1;this._userMax=void 0;this._userMin=void 0;this._suggestedMax=void 0;this._suggestedMin=void 0;this._ticksLength=0;this._borderValue=0;this._cache={};this._dataLimitsCached=!1;this.$context=void 0}init(n){this.options=n.setContext(this.getContext());this.axis=n.axis;this._userMin=this.parse(n.min);this._userMax=this.parse(n.max);this._suggestedMin=this.parse(n.suggestedMin);this._suggestedMax=this.parse(n.suggestedMax)}parse(n){return n}getUserBounds(){let{_userMin:n,_userMax:t,_suggestedMin:i,_suggestedMax:r}=this;return n=k(n,Number.POSITIVE_INFINITY),t=k(t,Number.NEGATIVE_INFINITY),i=k(i,Number.POSITIVE_INFINITY),r=k(r,Number.NEGATIVE_INFINITY),{min:k(n,i),max:k(t,r),minDefined:h(n),maxDefined:h(t)}}getMinMax(n){let r,{min:t,max:i,minDefined:u,maxDefined:f}=this.getUserBounds();if(u&&f)return{min:t,max:i};const e=this.getMatchingVisibleMetas();for(let o=0,s=e.length;o<s;++o)r=e[o].controller.getMinMax(this,n),u||(t=Math.min(t,r.min)),f||(i=Math.max(i,r.max));return t=f&&t>i?i:t,i=u&&t>i?t:i,{min:k(t,k(i,t)),max:k(i,k(t,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const n=this.chart.data;return this.options.labels||(this.isHorizontal()?n.xLabels:n.yLabels)||n.labels||[]}getLabelItems(n=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(n))}beforeLayout(){this._cache={};this._dataLimitsCached=!1}beforeUpdate(){f(this.options.beforeUpdate,[this])}update(n,t,i){const{beginAtZero:e,grace:o,ticks:r}=this.options,u=r.sampleSize;this.beforeUpdate();this.maxWidth=n;this.maxHeight=t;this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i);this.ticks=null;this._labelSizes=null;this._gridLineItems=null;this._labelItems=null;this.beforeSetDimensions();this.setDimensions();this.afterSetDimensions();this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom;this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=pc(this,o,e),this._dataLimitsCached=!0);this.beforeBuildTicks();this.ticks=this.buildTicks()||[];this.afterBuildTicks();const f=u<this.ticks.length;this._convertTicksToLabels(f?al(this.ticks,u):this.ticks);this.configure();this.beforeCalculateLabelRotation();this.calculateLabelRotation();this.afterCalculateLabelRotation();r.display&&(r.autoSkip||"auto"===r.source)&&(this.ticks=ib(this,this.ticks),this._labelSizes=null,this.afterAutoSkip());f&&this._convertTicksToLabels(this.ticks);this.beforeFit();this.fit();this.afterFit();this.afterUpdate()}configure(){let n,t,i=this.options.reverse;this.isHorizontal()?(n=this.left,t=this.right):(n=this.top,t=this.bottom,i=!i);this._startPixel=n;this._endPixel=t;this._reversePixels=i;this._length=t-n;this._alignToPixels=this.options.alignToPixels}afterUpdate(){f(this.options.afterUpdate,[this])}beforeSetDimensions(){f(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height);this.paddingLeft=0;this.paddingTop=0;this.paddingRight=0;this.paddingBottom=0}afterSetDimensions(){f(this.options.afterSetDimensions,[this])}_callHooks(n){this.chart.notifyPlugins(n,this.getContext());f(this.options[n],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){f(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(n){const u=this.options.ticks;let t,r,i;for(t=0,r=n.length;t<r;t++)i=n[t],i.label=f(u.callback,[i.value,t,n],this)}afterTickToLabelConversion(){f(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){f(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const n=this.options,t=n.ticks,i=lp(this.ticks.length,n.ticks.maxTicksLimit),r=t.minRotation||0,c=t.maxRotation;let u,l,o,f=r;if(!this._isVisible()||!t.display||r>=c||i<=1||!this.isHorizontal())return void(this.labelRotation=r);const s=this._getLabelSizes(),e=s.widest.width,h=s.highest.height,a=v(this.chart.width-e,0,this.maxWidth);u=n.offset?this.maxWidth/i:a/(i-1);e+6>u&&(u=a/(i-(n.offset?.5:1)),l=this.maxHeight-gr(n.grid)-t.padding-vl(n.title,this.chart.options.font),o=Math.sqrt(e*e+h*h),f=eu(Math.min(Math.asin(v((s.highest.height+6)/u,-1,1)),Math.asin(v(l/o,-1,1))-Math.asin(v(h/o,-1,1)))),f=Math.max(r,Math.min(c,f)));this.labelRotation=f}afterCalculateLabelRotation(){f(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){f(this.options.beforeFit,[this])}fit(){const n={width:0,height:0},{chart:i,options:{ticks:t,title:f,grid:u}}=this,e=this._isVisible(),r=this.isHorizontal();if(e){const e=vl(f,i.options.font);if(r?(n.width=this.maxWidth,n.height=gr(u)+e):(n.height=this.maxHeight,n.width=gr(u)+e),t.display&&this.ticks.length){const{first:h,last:c,widest:f,highest:e}=this._getLabelSizes(),o=2*t.padding,s=nt(this.labelRotation),i=Math.cos(s),u=Math.sin(s);if(r){const r=t.mirror?0:u*f.width+i*e.height;n.height=Math.min(this.maxHeight,n.height+r+o)}else{const r=t.mirror?0:i*f.width+u*e.height;n.width=Math.min(this.maxWidth,n.width+r+o)}this._calculatePadding(h,c,u,i)}}this._handleMargins();r?(this.width=this._length=i.width-this._margins.left-this._margins.right,this.height=n.height):(this.width=n.width,this.height=this._length=i.height-this._margins.top-this._margins.bottom)}_calculatePadding(n,t,i,r){const{ticks:{align:u,padding:f},position:e}=this.options,o=0!==this.labelRotation,s="top"!==e&&"x"===this.axis;if(this.isHorizontal()){const c=this.getPixelForTick(0)-this.left,l=this.right-this.getPixelForTick(this.ticks.length-1);let e=0,h=0;o?s?(e=r*n.width,h=i*t.height):(e=i*n.height,h=r*t.width):"start"===u?h=t.width:"end"===u?e=n.width:"inner"!==u&&(e=n.width/2,h=t.width/2);this.paddingLeft=Math.max((e-c+f)*this.width/(this.width-c),0);this.paddingRight=Math.max((h-l+f)*this.width/(this.width-l),0)}else{let i=t.height/2,r=n.height/2;"start"===u?(i=0,r=n.height):"end"===u&&(i=t.height,r=0);this.paddingTop=i+f;this.paddingBottom=r+f}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){f(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:n}=this.options;return"top"===n||"bottom"===n||"x"===t}isFullSize(){return this.options.fullSize}_convertTicksToLabels(n){let i,r;for(this.beforeTickToLabelConversion(),this.generateTickLabels(n),i=0,r=n.length;i<r;i++)t(n[i].label)&&(n.splice(i,1),r--,i--);this.afterTickToLabelConversion()}_getLabelSizes(){let n=this._labelSizes;if(!n){const i=this.options.ticks.sampleSize;let t=this.ticks;i<t.length&&(t=al(t,i));this._labelSizes=n=this._computeLabelSizes(t,t.length,this.options.ticks.maxTicksLimit)}return n}_computeLabelSizes(n,i,r){const{ctx:w,_longestTextCache:b}=this,l=[],a=[],rt=Math.floor(i/lp(i,r));let s,v,it,f,k,d,h,g,o,c,y,nt=0,tt=0;for(s=0;s<i;s+=rt){if(f=n[s].label,k=this._resolveTickFontOptions(s),w.font=d=k.string,h=b[d]=b[d]||{data:{},gc:[]},g=k.lineHeight,o=c=0,t(f)||e(f)){if(e(f))for(v=0,it=f.length;v<it;++v)y=f[v],t(y)||e(y)||(o=ar(w,h.data,h.gc,o,y),c+=g)}else o=ar(w,h.data,h.gc,o,f),c=g;l.push(o);a.push(c);nt=Math.max(o,nt);tt=Math.max(c,tt)}!function(n,t){u(n,n=>{const r=n.gc,u=r.length/2;let i;if(u>t){for(i=0;i<u;++i)delete n.data[r[i]];r.splice(0,u)}})}(b,i);const ut=l.indexOf(nt),ft=a.indexOf(tt),p=n=>({width:l[n]||0,height:a[n]||0});return{first:p(0),last:p(i-1),widest:p(ut),highest:p(ft),widths:l,heights:a}}getLabelForValue(n){return n}getPixelForValue(){return NaN}getValueForPixel(){}getPixelForTick(n){const t=this.ticks;return n<0||n>t.length-1?null:this.getPixelForValue(t[n].value)}getPixelForDecimal(n){this._reversePixels&&(n=1-n);const t=this._startPixel+n*this._length;return ch(this._alignToPixels?gt(this.chart,t,0):t)}getDecimalForPixel(n){const t=(n-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:n,max:t}=this;return n<0&&t<0?t:n>0&&t>0?n:0}getContext(n){const t=this.ticks||[];if(n>=0&&n<t.length){const i=t[n];return i.$context||(i.$context=function(n,t,i){return vt(n,{tick:i,index:t,type:"tick"})}(this.getContext(),n,i))}return this.$context||(this.$context=vt(this.chart.getContext(),{scale:this,type:"scale"}))}_tickSize(){const o=this.options.ticks,f=nt(this.labelRotation),n=Math.abs(Math.cos(f)),t=Math.abs(Math.sin(f)),i=this._getLabelSizes(),e=o.autoSkipPadding||0,r=i?i.widest.width+e:0,u=i?i.highest.height+e:0;return this.isHorizontal()?u*n>r*t?r/n:u/t:u*t<r*n?u/n:r/t}_isVisible(){const n=this.options.display;return"auto"!==n?!!n:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const nt=this.axis,tt=this.chart,it=this.options,{grid:k,position:u,border:rt}=it,ut=k.offset,st=this.isHorizontal(),b=this.ticks.length+(ut?1:0),o=gr(k),ft=[],et=rt.setContext(this.getContext()),ot=et.display?et.width:0,e=ot/2,f=function(n){return gt(tt,n,ot)};let r,c,d,g,s,h,l,a,v,y,p,w;if("top"===u)r=f(this.bottom),h=this.bottom-o,a=r-e,y=f(t.top)+e,w=t.bottom;else if("bottom"===u)r=f(this.top),y=t.top,w=f(t.bottom)-e,h=r+e,a=this.top+o;else if("left"===u)r=f(this.right),s=this.right-o,l=r-e,v=f(t.left)+e,p=t.right;else if("right"===u)r=f(this.left),v=t.left,p=f(t.right)-e,s=r+e,l=this.left+o;else if("x"===nt){if("center"===u)r=f((t.top+t.bottom)/2+.5);else if(i(u)){const n=Object.keys(u)[0],t=u[n];r=f(this.chart.scales[n].getPixelForValue(t))}y=t.top;w=t.bottom;h=r+e;a=h+o}else if("y"===nt){if("center"===u)r=f((t.left+t.right)/2);else if(i(u)){const n=Object.keys(u)[0],t=u[n];r=f(this.chart.scales[n].getPixelForValue(t))}s=r-e;l=s-o;v=t.left;p=t.right}const ht=n(it.ticks.maxTicksLimit,b),ct=Math.max(1,Math.ceil(b/ht));for(c=0;c<b;c+=ct){const t=this.getContext(c),n=k.setContext(t),i=rt.setContext(t),r=n.lineWidth,u=n.color,f=i.dash||[],e=i.dashOffset,o=n.tickWidth,b=n.tickColor,nt=n.tickBorderDash||[],it=n.tickBorderDashOffset;d=rb(this,c,ut);void 0!==d&&(g=gt(tt,d,r),st?s=l=v=p=g:h=a=y=w=g,ft.push({tx1:s,ty1:h,tx2:l,ty2:a,x1:v,y1:y,x2:p,y2:w,width:r,color:u,borderDash:f,borderDashOffset:e,tickWidth:o,tickColor:b,tickBorderDash:nt,tickBorderDashOffset:it}))}return this._ticksLength=b,this._borderValue=r,ft}_computeLabelItems(n){const g=this.axis,ut=this.options,{position:t,ticks:tt}=ut,at=this.isHorizontal(),ft=this.ticks,{align:et,crossAlign:v,padding:ot,mirror:st}=tt,y=gr(ut.grid),p=y+ot,ht=st?-ot:p,c=-nt(this.labelRotation),ct=[];let r,b,lt,k,o,s,f,it,rt,u,l,a,d="middle";if("top"===t)s=this.bottom-ht,f=this._getXAxisLabelAlignment();else if("bottom"===t)s=this.top+ht,f=this._getXAxisLabelAlignment();else if("left"===t){const n=this._getYAxisLabelAlignment(y);f=n.textAlign;o=n.x}else if("right"===t){const n=this._getYAxisLabelAlignment(y);f=n.textAlign;o=n.x}else if("x"===g){if("center"===t)s=(n.top+n.bottom)/2+p;else if(i(t)){const n=Object.keys(t)[0],i=t[n];s=this.chart.scales[n].getPixelForValue(i)+p}f=this._getXAxisLabelAlignment()}else if("y"===g){if("center"===t)o=(n.left+n.right)/2-p;else if(i(t)){const n=Object.keys(t)[0],i=t[n];o=this.chart.scales[n].getPixelForValue(i)}f=this._getYAxisLabelAlignment(y).textAlign}"y"===g&&("start"===et?d="top":"end"===et&&(d="bottom"));const h=this._getLabelSizes();for(r=0,b=ft.length;r<b;++r){lt=ft[r];k=lt.label;const n=tt.setContext(this.getContext(r));it=this.getPixelForTick(r)+tt.labelOffset;rt=this._resolveTickFontOptions(r);u=rt.lineHeight;l=e(k)?k.length:1;const i=l/2,g=n.color,nt=n.textStrokeColor,ut=n.textStrokeWidth;let y,p=f;if(at?(o=it,"inner"===f&&(p=r===b-1?this.options.reverse?"left":"right":0===r?this.options.reverse?"right":"left":"center"),a="top"===t?"near"===v||0!==c?-l*u+u/2:"center"===v?-h.highest.height/2-i*u+u:-h.highest.height+u/2:"near"===v||0!==c?u/2:"center"===v?h.highest.height/2-i*u:h.highest.height-l*u,st&&(a*=-1),0===c||n.showLabelBackdrop||(o+=u/2*Math.sin(c))):(s=it,a=(1-l)*u/2),n.showLabelBackdrop){const u=w(n.backdropPadding),e=h.heights[r],t=h.widths[r];let o=a-u.top,i=0-u.left;switch(d){case"middle":o-=e/2;break;case"bottom":o-=e}switch(f){case"center":i-=t/2;break;case"right":i-=t;break;case"inner":r===b-1?i-=t:r>0&&(i-=t/2)}y={left:i,top:o,width:t+u.width,height:e+u.height,color:n.backdropColor}}ct.push({label:k,font:rt,textOffset:a,options:{rotation:c,color:g,strokeColor:nt,strokeWidth:ut,textAlign:p,textBaseline:d,translation:[o,s],backdrop:y}})}return ct}_getXAxisLabelAlignment(){const{position:i,ticks:t}=this.options;if(-nt(this.labelRotation))return"top"===i?"left":"right";let n="center";return"start"===t.align?n="left":"end"===t.align?n="right":"inner"===t.align&&(n="inner"),n}_getYAxisLabelAlignment(n){const{position:e,ticks:{crossAlign:r,mirror:o,padding:f}}=this.options,s=n+f,u=this._getLabelSizes().widest.width;let t,i;return"left"===e?o?(i=this.right+f,"near"===r?t="left":"center"===r?(t="center",i+=u/2):(t="right",i+=u)):(i=this.right-s,"near"===r?t="right":"center"===r?(t="center",i-=u/2):(t="left",i=this.left)):"right"===e?o?(i=this.left+f,"near"===r?t="right":"center"===r?(t="center",i-=u/2):(t="left",i-=u)):(i=this.left+s,"near"===r?t="left":"center"===r?(t="center",i+=u/2):(t="right",i=this.right)):t="right",{textAlign:t,x:i}}_computeLabelArea(){if(!this.options.ticks.mirror){const t=this.chart,n=this.options.position;return"left"===n||"right"===n?{top:0,left:this.left,bottom:t.height,right:this.right}:"top"===n||"bottom"===n?{top:this.top,left:0,bottom:this.bottom,right:t.width}:void 0}}drawBackground(){const{ctx:n,options:{backgroundColor:t},left:i,top:r,width:u,height:f}=this;t&&(n.save(),n.fillStyle=t,n.fillRect(i,r,u,f),n.restore())}getLineWidthForValue(n){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const i=this.ticks.findIndex(t=>t.value===n);return i>=0?t.setContext(this.getContext(i)).lineWidth:0}drawGrid(n){const r=this.options.grid,t=this.ctx,u=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(n));let i,f;const e=(n,i,r)=>{r.width&&r.color&&(t.save(),t.lineWidth=r.width,t.strokeStyle=r.color,t.setLineDash(r.borderDash||[]),t.lineDashOffset=r.borderDashOffset,t.beginPath(),t.moveTo(n.x,n.y),t.lineTo(i.x,i.y),t.stroke(),t.restore())};if(r.display)for(i=0,f=u.length;i<f;++i){const n=u[i];r.drawOnChartArea&&e({x:n.x1,y:n.y1},{x:n.x2,y:n.y2},n);r.drawTicks&&e({x:n.tx1,y:n.ty1},{x:n.tx2,y:n.ty2},{color:n.tickColor,width:n.tickWidth,borderDash:n.tickBorderDash,borderDashOffset:n.tickBorderDashOffset})}}drawBorder(){const{chart:i,ctx:n,options:{border:u,grid:f}}=this,r=u.setContext(this.getContext()),t=u.display?r.width:0;if(t){const u=f.setContext(this.getContext(0)).lineWidth,c=this._borderValue;let e,o,s,h;this.isHorizontal()?(e=gt(i,this.left,t)-t/2,o=gt(i,this.right,u)+u/2,s=h=c):(s=gt(i,this.top,t)-t/2,h=gt(i,this.bottom,u)+u/2,e=o=c);n.save();n.lineWidth=r.width;n.strokeStyle=r.color;n.beginPath();n.moveTo(e,s);n.lineTo(o,h);n.stroke();n.restore()}}drawLabels(n){if(this.options.ticks.display){const t=this.ctx,i=this._computeLabelArea();i&&vr(t,i);const r=this.getLabelItems(n);for(const n of r){const i=n.options,r=n.font;ni(t,n.label,0,n.textOffset,r,i)}i&&yr(t)}}drawTitle(){const{ctx:r,options:{position:t,title:n,reverse:u}}=this;if(n.display){const o=a(n.font),s=w(n.padding),h=n.align;let f=o.lineHeight/2;"bottom"===t||"center"===t||i(t)?(f+=s.bottom,e(n.text)&&(f+=o.lineHeight*(n.text.length-1))):f+=s.top;const{titleX:l,titleY:v,maxWidth:y,rotation:p}=function(n,t,r,u){const{top:l,left:s,bottom:a,right:h,chart:d}=n,{chartArea:f,scales:v}=d;let y,e,o,p=0;const w=a-l,k=h-s;if(n.isHorizontal()){if(e=b(u,s,h),i(r)){const n=Object.keys(r)[0],i=r[n];o=v[n].getPixelForValue(i)+w-t}else o="center"===r?(f.bottom+f.top)/2+w-t:cp(n,r,t);y=h-s}else{if(i(r)){const n=Object.keys(r)[0],i=r[n];e=v[n].getPixelForValue(i)-k+t}else e="center"===r?(f.left+f.right)/2-k+t:cp(n,r,t);o=b(u,a,l);p="left"===r?-c:c}return{titleX:e,titleY:o,maxWidth:y,rotation:p}}(this,f,t,h);ni(r,n.text,0,0,o,{color:n.color,maxWidth:y,rotation:p,textAlign:ub(h,t,u),textBaseline:"middle",translation:[l,v]})}}draw(n){this._isVisible()&&(this.drawBackground(),this.drawGrid(n),this.drawBorder(),this.drawTitle(),this.drawLabels(n))}_layers(){const t=this.options,i=t.ticks&&t.ticks.z||0,r=n(t.grid&&t.grid.z,-1),u=n(t.border&&t.border.z,0);return this._isVisible()&&this.draw===vi.prototype.draw?[{z:r,draw:n=>{this.drawBackground(),this.drawGrid(n),this.drawTitle()}},{z:u,draw:()=>{this.drawBorder()}},{z:i,draw:n=>{this.drawLabels(n)}},]:[{z:i,draw:n=>{this.draw(n)}},]}getMatchingVisibleMetas(n){const i=this.chart.getSortedVisibleDatasetMetas(),f=this.axis+"AxisID",r=[];let t,u;for(t=0,u=i.length;t<u;++t){const u=i[t];u[f]!==this.id||n&&u.type!==n||r.push(u)}return r}_resolveTickFontOptions(n){return a(this.options.ticks.setContext(this.getContext(n)).font)}_maxDigits(){const n=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/n}}class bf{constructor(n,t,i){this.type=n;this.scope=t;this.override=i;this.items=Object.create(null)}isForType(n){return Object.prototype.isPrototypeOf.call(this.type.prototype,n.prototype)}register(n){const i=Object.getPrototypeOf(n);let r;(function(n){return"id"in n&&"defaults"in n})(i)&&(r=this.register(i));const u=this.items,t=n.id,f=this.scope+"."+t;if(!t)throw new Error("class does not have id: "+n);return t in u||(u[t]=n,function(n,t,i){const r=pi(Object.create(null),[i?s.get(i):{},s.get(t),n.defaults,]);s.set(t,r);n.defaultRoutes&&function(n,t){Object.keys(t).forEach(i=>{const r=i.split("."),f=r.pop(),e=[n].concat(r).join("."),u=t[i].split("."),o=u.pop(),h=u.join(".");s.route(e,f,h,o)})}(t,n.defaultRoutes);n.descriptors&&s.describe(t,n.descriptors)}(n,f,r),this.override&&s.override(n.id,n.overrides)),f}get(n){return this.items[n]}unregister(n){const r=this.items,t=n.id,i=this.scope;t in r&&delete r[t];i&&t in s[i]&&(delete s[i][t],this.override&&delete ai[t])}}class vd{constructor(){this.controllers=new bf(bt,"datasets",!0);this.elements=new bf(ct,"elements");this.plugins=new bf(Object,"plugins");this.scales=new bf(vi,"scales");this._typedRegistries=[this.controllers,this.scales,this.elements,]}add(...n){this._each("register",n)}remove(...n){this._each("unregister",n)}addControllers(...n){this._each("register",n,this.controllers)}addElements(...n){this._each("register",n,this.elements)}addPlugins(...n){this._each("register",n,this.plugins)}addScales(...n){this._each("register",n,this.scales)}getController(n){return this._get(n,this.controllers,"controller")}getElement(n){return this._get(n,this.elements,"element")}getPlugin(n){return this._get(n,this.plugins,"plugin")}getScale(n){return this._get(n,this.scales,"scale")}removeControllers(...n){this._each("unregister",n,this.controllers)}removeElements(...n){this._each("unregister",n,this.elements)}removePlugins(...n){this._each("unregister",n,this.plugins)}removeScales(...n){this._each("unregister",n,this.scales)}_each(n,t,i){[...t].forEach(t=>{const r=i||this._getRegistryForType(t);i||r.isForType(t)||r===this.plugins&&t.id?this._exec(n,r,t):u(t,t=>{const r=i||this._getRegistryForType(t);this._exec(n,r,t)})})}_exec(n,t,i){const r=fu(n);f(i["before"+r],[],i);t[n](i);f(i["after"+r],[],i)}_getRegistryForType(n){for(let t=0;t<this._typedRegistries.length;t++){const i=this._typedRegistries[t];if(i.isForType(n))return i}return this.plugins}_get(n,t,i){const r=t.get(n);if(void 0===r)throw new Error('"'+n+'" is not a registered '+i+".");return r}}tt=new vd;class yd{constructor(){this._init=void 0}notify(n,t,i,r){if("beforeInit"===t&&(this._init=this._createDescriptors(n,!0),this._notify(this._init,n,"install")),void 0!==this._init){const u=r?this._descriptors(n).filter(r):this._descriptors(n),f=this._notify(u,n,t,i);return"afterDestroy"===t&&(this._notify(u,n,"stop"),this._notify(this._init,n,"uninstall"),this._init=void 0),f}}_notify(n,t,i,r){r=r||{};for(const u of n){const n=u.plugin;if(!1===f(n[i],[t,r,u.options],n)&&r.cancelable)return!1}return!0}invalidate(){t(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(n){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(n);return this._notifyStateChanges(n),t}_createDescriptors(t,i){const r=t&&t.config,u=n(r.options&&r.options.plugins,{}),f=function(n){const i={},t=[],r=Object.keys(tt.plugins.items);for(let n=0;n<r.length;n++)t.push(tt.getPlugin(r[n]));const u=n.plugins||[];for(let n=0;n<u.length;n++){const r=u[n];-1===t.indexOf(r)&&(t.push(r),i[r.id]=!0)}return{plugins:t,localIds:i}}(r);return!1!==u||i?function(n,{plugins:i,localIds:t},r,u){const f=[],e=n.getContext();for(const o of i){const i=o.id,s=fb(r[i],u);null!==s&&f.push({plugin:o,options:eb(n.config,{plugin:o,local:t[i]},s,e)})}return f}(t,f,u,i):[]}_notifyStateChanges(n){const t=this._oldCache||[],i=this._cache,r=(n,t)=>n.filter(n=>!t.some(t=>n.plugin.id===t.plugin.id));this._notify(r(t,i),n,"stop");this._notify(r(i,t),n,"start")}}const ap=new Map,vp=new Set,iu=(n,t,i)=>{const r=lt(t,i);void 0!==r&&n.add(r)};class pd{constructor(n){this._config=function(n){return(n=n||{}).data=bl(n.data),wl(n),n}(n);this._scopeCache=new Map;this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(n){this._config.type=n}get data(){return this._config.data}set data(n){this._config.data=bl(n)}get options(){return this._config.options}set options(n){this._config.options=n}get plugins(){return this._config.plugins}update(){const n=this._config;this.clearCache();wl(n)}clearCache(){this._scopeCache.clear();this._resolverCache.clear()}datasetScopeKeys(n){return rf(n,()=>[[`datasets.${n}`,""]])}datasetAnimationScopeKeys(n,t){return rf(`${n}.transition.${t}`,()=>[[`datasets.${n}.transitions.${t}`,`transitions.${t}`],[`datasets.${n}`,""],])}datasetElementScopeKeys(n,t){return rf(`${n}-${t}`,()=>[[`datasets.${n}.elements.${t}`,`datasets.${n}`,`elements.${t}`,"",],])}pluginScopeKeys(n){const t=n.id;return rf(`${this.type}-plugin-${t}`,()=>[[`plugins.${t}`,...(n.additionalOptionScopes||[])],])}_cachedScopes(n,t){const r=this._scopeCache;let i=r.get(n);return i&&!t||(i=new Map,r.set(n,i)),i}getOptionScopes(n,t,i){const{options:o,type:h}=this,f=this._cachedScopes(n,i),e=f.get(t);if(e)return e;const r=new Set;t.forEach(t=>{n&&(r.add(n),t.forEach(t=>iu(r,n,t))),t.forEach(n=>iu(r,o,n)),t.forEach(n=>iu(r,ai[h]||{},n)),t.forEach(n=>iu(r,s,n)),t.forEach(n=>iu(r,ys,n))});const u=Array.from(r);return 0===u.length&&u.push(Object.create(null)),vp.has(t)&&f.set(t,u),u}chartOptionScopes(){const{options:t,type:n}=this;return[t,ai[n]||{},s.datasets[n]||{},{type:n},s,ys]}resolveNamedOptions(n,t,i,r=[""]){const u={$shared:!0},{resolver:f,subPrefixes:s}=kl(this._resolverCache,n,r);let o=f;(function(n,t){const{isScriptable:i,isIndexable:r}=ge(n);for(const u of t){const f=i(u),o=r(u),t=(o||f)&&n[u];if(f&&(pt(t)||wd(t))||o&&e(t))return!0}return!1})(f,t)&&(u.$shared=!1,o=hi(f,i=pt(i)?i():i,this.createResolver(n,i,s)));for(const n of t)u[n]=o[n];return u}createResolver(n,t,r=[""],u){const{resolver:f}=kl(this._resolverCache,n,r);return i(t)?hi(f,t,void 0,u):f}}const wd=n=>i(n)&&Object.getOwnPropertyNames(n).some(t=>pt(n[t])),bd=["top","bottom","left","right","chartArea"],kf={},yp=n=>{const t=ta(n);return Object.values(kf).filter(n=>n.canvas===t).pop()};class l{static defaults=s;static instances=kf;static overrides=ai;static registry=tt;static version="4.5.1";static getChart=yp;static register(...n){tt.add(...n);ia()}static unregister(...n){tt.remove(...n);ia()}constructor(n,t){const r=this.config=new pd(t),f=ta(n),e=yp(f);if(e)throw new Error("Canvas is already in use. Chart with ID '"+e.id+"' must be destroyed before the canvas with ID '"+e.canvas.id+"' can be reused.");const o=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||el(f));this.platform.updateConfig(r);const u=this.platform.acquireContext(f,o.aspectRatio),i=u&&u.canvas,s=i&&i.height,h=i&&i.width;this.id=ey();this.ctx=u;this.canvas=i;this.width=h;this.height=s;this._options=o;this._aspectRatio=this.aspectRatio;this._layers=[];this._metasets=[];this._stacks=void 0;this.boxes=[];this.currentDevicePixelRatio=void 0;this.chartArea=void 0;this._active=[];this._lastEvent=void 0;this._listeners={};this._responsiveListeners=void 0;this._sortedMetasets=[];this.scales={};this._plugins=new yd;this.$proxies={};this._hiddenIndices={};this.attached=!1;this._animationsDisabled=void 0;this.$context=void 0;this._doResize=vh(n=>this.update(n),o.resizeDelay||0);this._dataChanges=[];kf[this.id]=this;u&&i?(rt.listen(this,"complete",na),rt.listen(this,"progress",sb),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:n,maintainAspectRatio:u},width:f,height:i,_aspectRatio:r}=this;return t(n)?u&&r?r:i?f/i:null:n}get data(){return this.config.data}set data(n){this.config.data=n}get options(){return this._options}set options(n){this.config.options=n}get registry(){return tt}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():we(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return ke(this.canvas,this.ctx),this}stop(){return rt.stop(this),this}resize(n,t){rt.running(this)?this._resizeBeforeDraw={width:n,height:t}:this._resize(n,t)}_resize(n,t){const r=this.options,u=this.canvas,e=r.maintainAspectRatio&&this.aspectRatio,i=this.platform.getMaximumSize(u,n,t,e),o=r.devicePixelRatio||this.platform.getDevicePixelRatio(),s=this.width?"resize":"attach";this.width=i.width;this.height=i.height;this._aspectRatio=this.aspectRatio;we(this,o,!0)&&(this.notifyPlugins("resize",{size:i}),f(r.onResize,[this,i],this),this.attached&&this._doResize(s)&&this.render())}ensureScalesHaveIDs(){u(this.options.scales||{},(n,t)=>{n.id=t})}buildOrUpdateScales(){const f=this.options,i=f.scales,t=this.scales,e=Object.keys(t).reduce((n,t)=>(n[t]=!1,n),{});let r=[];i&&(r=r.concat(Object.keys(i).map(n=>{const t=i[n],r=yo(n,t),u="r"===r,f="x"===r;return{options:t,dposition:u?"chartArea":f?"bottom":"left",dtype:u?"radialLinear":f?"category":"linear"}})));u(r,i=>{const r=i.options,u=r.id,h=yo(u,r),s=n(r.type,i.dtype);void 0!==r.position&&dl(r.position,h)===dl(i.dposition)||(r.position=i.dposition);e[u]=!0;let o=null;u in t&&t[u].type===s?o=t[u]:(o=new(tt.getScale(s))({id:u,type:s,ctx:this.ctx,chart:this}),t[o.id]=o);o.init(r,f)});u(e,(n,i)=>{n||delete t[i]});u(t,n=>{y.configure(this,n,n.options),y.addBox(this,n)})}_updateMetasets(){const n=this._metasets,t=this.data.datasets.length,i=n.length;if(n.sort((n,t)=>n.index-t.index),i>t){for(let n=t;n<i;++n)this._destroyDatasetMeta(n);n.splice(t,i-t)}this._sortedMetasets=n.slice(0).sort(gl("order","index"))}_removeUnreferencedMetasets(){const{_metasets:n,data:{datasets:t}}=this;n.length>t.length&&delete this._stacks;n.forEach((n,i)=>{0===t.filter(t=>t===n._dataset).length&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const t=[],i=this.data.datasets;let n,r;for(this._removeUnreferencedMetasets(),n=0,r=i.length;n<r;n++){const f=i[n];let r=this.getDatasetMeta(n);const u=f.type||this.config.type;if(r.type&&r.type!==u&&(this._destroyDatasetMeta(n),r=this.getDatasetMeta(n)),r.type=u,r.indexAxis=f.indexAxis||vo(u,this.options),r.order=f.order||0,r.index=n,r.label=""+f.label,r.visible=this.isDatasetVisible(n),r.controller)r.controller.updateIndex(n),r.controller.linkScales();else{const i=tt.getController(u),{datasetElementType:f,dataElementType:e}=s.datasets[u];Object.assign(i,{dataElementType:tt.getElement(e),datasetElementType:f&&tt.getElement(f)});r.controller=new i(this,n);t.push(r.controller)}}return this._updateMetasets(),t}_resetElements(){u(this.data.datasets,(n,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements();this.notifyPlugins("reset")}update(n){const t=this.config;t.update();const i=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1!==this.notifyPlugins("beforeUpdate",{mode:n,cancelable:!0})){const e=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let t=0;for(let n=0,i=this.data.datasets.length;n<i;n++){const{controller:i}=this.getDatasetMeta(n),u=!r&&-1===e.indexOf(i);i.buildOrUpdateElements(u);t=Math.max(+i.getMaxOverflow(),t)}t=this._minPadding=i.layout.autoPadding?t:0;this._updateLayout(t);r||u(e,n=>{n.reset()});this._updateDatasets(n);this.notifyPlugins("afterUpdate",{mode:n});this._layers.sort(gl("z","_idx"));const{_active:f,_lastEvent:o}=this;o?this._eventHandler(o,!0):f.length&&this._updateHoverStyles(f,f,!0);this.render()}}_updateScales(){u(this.scales,n=>{y.removeBox(this,n)});this.ensureScalesHaveIDs();this.buildOrUpdateScales()}_checkEventBindings(){const n=this.options,t=new Set(Object.keys(this._listeners)),i=new Set(n.events);hs(t,i)&&!!this._responsiveListeners===n.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:n}=this,t=this._getUniformDataChanges()||[];for(const{method:r,start:u,count:i}of t)hb(n,u,"_removeElements"===r?-i:i)}_getUniformDataChanges(){const n=this._dataChanges;if(n&&n.length){this._dataChanges=[];const r=this.data.datasets.length,t=t=>new Set(n.filter(n=>n[0]===t).map((n,t)=>t+","+n.splice(1).join(","))),i=t(0);for(let n=1;n<r;n++)if(!hs(i,t(n)))return;return Array.from(i).map(n=>n.split(",")).map(n=>({method:n[1],start:+n[2],count:+n[3]}))}}_updateLayout(n){if(!1!==this.notifyPlugins("beforeLayout",{cancelable:!0})){y.update(this,this.width,this.height,n);const t=this.chartArea,i=t.width<=0||t.height<=0;this._layers=[];u(this.boxes,n=>{i&&"chartArea"===n.position||(n.configure&&n.configure(),this._layers.push(...n._layers()))},this);this._layers.forEach((n,t)=>{n._idx=t});this.notifyPlugins("afterLayout")}}_updateDatasets(n){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:n,cancelable:!0})){for(let n=0,t=this.data.datasets.length;n<t;++n)this.getDatasetMeta(n).controller.configure();for(let t=0,i=this.data.datasets.length;t<i;++t)this._updateDataset(t,pt(n)?n({datasetIndex:t}):n);this.notifyPlugins("afterDatasetsUpdate",{mode:n})}}_updateDataset(n,t){const r=this.getDatasetMeta(n),i={meta:r,index:n,mode:t,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",i)&&(r.controller._update(t),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(rt.has(this)?this.attached&&!rt.running(this)&&rt.start(this):(this.draw(),na({chart:this})))}draw(){let n;if(this._resizeBeforeDraw){const{width:n,height:t}=this._resizeBeforeDraw;this._resizeBeforeDraw=null;this._resize(n,t)}if((this.clear(),!(this.width<=0)&&!(this.height<=0))&&!1!==this.notifyPlugins("beforeDraw",{cancelable:!0})){const t=this._layers;for(n=0;n<t.length&&t[n].z<=0;++n)t[n].draw(this.chartArea);for(this._drawDatasets();n<t.length;++n)t[n].draw(this.chartArea);this.notifyPlugins("afterDraw")}}_getSortedDatasetMetas(n){const i=this._sortedMetasets,r=[];let t,u;for(t=0,u=i.length;t<u;++t){const u=i[t];n&&!u.visible||r.push(u)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1!==this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})){const n=this.getSortedVisibleDatasetMetas();for(let t=n.length-1;t>=0;--t)this._drawDataset(n[t]);this.notifyPlugins("afterDatasetsDraw")}}_drawDataset(n){const r=this.ctx,t={meta:n,index:n.index,cancelable:!0},i=oo(this,n);!1!==this.notifyPlugins("beforeDatasetDraw",t)&&(i&&vr(r,i),n.controller.draw(),i&&yr(r),t.cancelable=!1,this.notifyPlugins("afterDatasetDraw",t))}isPointInArea(n){return ot(n,this.chartArea,this._minPadding)}getElementsAtEventForMode(n,t,i,r){const u=rs.modes[t];return"function"==typeof u?u(this,n,i,r):[]}getDatasetMeta(n){const t=this.data.datasets[n],r=this._metasets;let i=r.filter(n=>n&&n._dataset===t).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:n,_dataset:t,_parsed:[],_sorted:!1},r.push(i)),i}getContext(){return this.$context||(this.$context=vt(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(n){const t=this.data.datasets[n];if(!t)return!1;const i=this.getDatasetMeta(n);return"boolean"==typeof i.hidden?!i.hidden:!t.hidden}setDatasetVisibility(n,t){this.getDatasetMeta(n).hidden=!t}toggleDataVisibility(n){this._hiddenIndices[n]=!this._hiddenIndices[n]}getDataVisibility(n){return!this._hiddenIndices[n]}_updateVisibility(n,t,i){const u=i?"show":"hide",r=this.getDatasetMeta(n),f=r.controller._resolveAnimations(void 0,u);rr(t)?(r.data[t].hidden=!i,this.update()):(this.setDatasetVisibility(n,i),f.update(r,{visible:i}),this.update(t=>t.datasetIndex===n?u:void 0))}hide(n,t){this._updateVisibility(n,t,!1)}show(n,t){this._updateVisibility(n,t,!0)}_destroyDatasetMeta(n){const t=this._metasets[n];t&&t.controller&&t.controller._destroy();delete this._metasets[n]}_stop(){let n,t;for(this.stop(),rt.remove(this),n=0,t=this.data.datasets.length;n<t;++n)this._destroyDatasetMeta(n)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:n,ctx:t}=this;this._stop();this.config.clearCache();n&&(this.unbindEvents(),ke(n,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null);delete kf[this.id];this.notifyPlugins("afterDestroy")}toBase64Image(...n){return this.canvas.toDataURL(...n)}bindEvents(){this.bindUserEvents();this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const n=this._listeners,t=this.platform,i=(i,r)=>{t.addEventListener(this,i,r),n[i]=r},r=(n,t,i)=>{n.offsetX=t,n.offsetY=i,this._eventHandler(n)};u(this.options.events,n=>i(n,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const n=this._responsiveListeners,t=this.platform,i=(i,r)=>{t.addEventListener(this,i,r),n[i]=r},f=(i,r)=>{n[i]&&(t.removeEventListener(this,i,r),delete n[i])},e=(n,t)=>{this.canvas&&this.resize(n,t)};let r;const u=()=>{f("attach",u),this.attached=!0,this.resize(),i("resize",e),i("detach",r)};r=()=>{this.attached=!1,f("resize",e),this._stop(),this._resize(0,0),i("attach",u)};t.isAttached(this.canvas)?u():r()}unbindEvents(){u(this._listeners,(n,t)=>{this.platform.removeEventListener(this,t,n)});this._listeners={};u(this._responsiveListeners,(n,t)=>{this.platform.removeEventListener(this,t,n)});this._responsiveListeners=void 0}updateHoverStyle(n,t,i){const f=i?"set":"remove";let e,r,u,o;for("dataset"===t&&(e=this.getDatasetMeta(n[0].datasetIndex),e.controller["_"+f+"DatasetHoverStyle"]()),u=0,o=n.length;u<o;++u){r=n[u];const t=r&&this.getDatasetMeta(r.datasetIndex).controller;t&&t[f+"HoverStyle"](r.element,r.datasetIndex,r.index)}}getActiveElements(){return this._active||[]}setActiveElements(n){const i=this._active||[],t=n.map(({datasetIndex:t,index:n})=>{const i=this.getDatasetMeta(t);if(!i)throw new Error("No dataset found at index "+t);return{datasetIndex:t,element:i.data[n],index:n}});or(t,i)||(this._active=t,this._lastEvent=null,this._updateHoverStyles(t,i))}notifyPlugins(n,t,i){return this._plugins.notify(this,n,t,i)}isPluginEnabled(n){return 1===this._plugins._cache.filter(t=>t.plugin.id===n).length}_updateHoverStyles(n,t,i){const r=this.options.hover,u=(n,t)=>n.filter(n=>!t.some(t=>n.datasetIndex===t.datasetIndex&&n.index===t.index)),f=u(t,n),e=i?n:u(n,t);f.length&&this.updateHoverStyle(f,r.mode,!1);e.length&&r.mode&&this.updateHoverStyle(e,r.mode,!0)}_eventHandler(n,t){const i={event:n,replay:t,cancelable:!0,inChartArea:this.isPointInArea(n)},r=t=>(t.options.events||this.options.events).includes(n.native.type);if(!1!==this.notifyPlugins("beforeEvent",i,r)){const u=this._handleEvent(n,t,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,r),(u||i.changed)&&this.render(),this}}_handleEvent(n,t,i){const{_active:u=[],options:e}=this,h=t,r=this._getActiveElements(n,u,i,h),o=eh(n),c=function(n,t,i,r){return i&&"mouseout"!==n.type?r?t:n:null}(n,this._lastEvent,i,o);i&&(this._lastEvent=null,f(e.onHover,[n,r,this],this),o&&f(e.onClick,[n,r,this],this));const s=!or(r,u);return(s||t)&&(this._active=r,this._updateHoverStyles(r,u,t)),this._lastEvent=c,s}_getActiveElements(n,t,i,r){if("mouseout"===n.type)return[];if(!i)return t;const u=this.options.hover;return this.getElementsAtEventForMode(n,u.mode,u,r)}}class pp{static override(n){Object.assign(pp.prototype,n)}options;constructor(n){this.options=n||{}}init(){}formats(){return li()}parse(){return li()}format(){return li()}add(){return li()}diff(){return li()}startOf(){return li()}endOf(){return li()}}fs={_date:pp};class ds extends bt{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing",]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:n=>"spacing"!==n,_indexable:n=>"spacing"!==n&&!n.startsWith("borderDash")&&!n.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(n){const t=n.data,{labels:{pointStyle:i,textAlign:r,color:u,useBorderRadius:f,borderRadius:e}}=n.legend.options;return t.labels.length&&t.datasets.length?t.labels.map((t,o)=>{const s=n.getDatasetMeta(0).controller.getStyle(o);return{text:t,fillStyle:s.backgroundColor,fontColor:u,hidden:!n.getDataVisibility(o),lineDash:s.borderDash,lineDashOffset:s.borderDashOffset,lineJoin:s.borderJoinStyle,lineWidth:s.borderWidth,strokeStyle:s.borderColor,textAlign:r,pointStyle:i,borderRadius:f&&(e||s.borderRadius),index:o}}):[]}},onClick(n,t,i){i.chart.toggleDataVisibility(t.index),i.chart.update()}}}};constructor(n,t){super(n,t);this.enableOptionSharing=!0;this.innerRadius=void 0;this.outerRadius=void 0;this.offsetX=void 0;this.offsetY=void 0}linkScales(){}parse(n,t){const r=this.getDataset().data,u=this._cachedMeta;if(!1===this._parsing)u._parsed=r;else{let f,e,o=n=>+r[n];if(i(r[n])){const{key:n="value"}=this._parsing;o=t=>+lt(r[t],n)}for(f=n,e=n+t;f<e;++f)u._parsed[f]=o(f)}}_getRotation(){return nt(this.options.rotation-90)}_getCircumference(){return nt(this.options.circumference)}_getRotationExtents(){let n=o,t=-o;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){const r=this.chart.getDatasetMeta(i).controller,u=r._getRotation(),f=r._getCircumference();n=Math.min(n,u);t=Math.max(t,u+f)}return{rotation:n,circumference:t-n}}update(n){const l=this.chart,{chartArea:i}=l,e=this._cachedMeta,u=e.data,f=this.getMaxBorderWidth()+this.getMaxOffset(u)+this.options.spacing,a=Math.max((Math.min(i.width,i.height)-f)/2,0),s=Math.min(oy(this.options.cutout,a),1),v=this._getRingWeight(this.index),{circumference:y,rotation:p}=this._getRotationExtents(),{ratioX:w,ratioY:b,offsetX:k,offsetY:d}=function(n,t,i){let u=1,f=1,e=0,s=0;if(t<o){const o=n,h=o+t,l=Math.cos(o),a=Math.sin(o),v=Math.cos(h),y=Math.sin(h),p=(n,t,r)=>ki(n,o,h,!0)?1:Math.max(t,t*i,r,r*i),w=(n,t,r)=>ki(n,o,h,!0)?-1:Math.min(t,t*i,r,r*i),b=p(0,l,v),k=p(c,a,y),d=w(r,l,v),g=w(r+c,a,y);u=(b-d)/2;f=(k-g)/2;e=-(b+d)/2;s=-(k+g)/2}return{ratioX:u,ratioY:f,offsetX:e,offsetY:s}}(p,y,s),g=(i.width-f)/w,nt=(i.height-f)/b,tt=Math.max(Math.min(g,nt)/2,0),t=ss(this.options.radius,tt),h=(t-Math.max(t*s,0))/this._getVisibleDatasetWeightTotal();this.offsetX=k*t;this.offsetY=d*t;e.total=this.calculateTotal();this.outerRadius=t-h*this._getRingWeightOffset(this.index);this.innerRadius=Math.max(this.outerRadius-h*v,0);this.updateElements(u,0,u.length,n)}_circumference(n,t){const r=this.options,i=this._cachedMeta,u=this._getCircumference();return t&&r.animation.animateRotate||!this.chart.getDataVisibility(n)||null===i._parsed[n]||i.data[n].hidden?0:this.calculateCircumference(i._parsed[n]*u/o)}updateElements(n,t,i,r){const o="reset"===r,s=this.chart,f=s.chartArea,c=s.options.animation,l=(f.left+f.right)/2,a=(f.top+f.bottom)/2,h=o&&c.animateScale,v=h?0:this.innerRadius,y=h?0:this.outerRadius,{sharedOptions:p,includeOptions:w}=this._getSharedOptions(t,r);let u,e=this._getRotation();for(u=0;u<t;++u)e+=this._circumference(u,o);for(u=t;u<t+i;++u){const t=this._circumference(u,o),i=n[u],f={x:l+this.offsetX,y:a+this.offsetY,startAngle:e,endAngle:e+t,circumference:t,outerRadius:y,innerRadius:v};w&&(f.options=p||this.resolveDataElementOptions(u,i.active?"active":r));e+=t;this.updateElement(i,u,f,r)}}calculateTotal(){const t=this._cachedMeta,i=t.data;let n,r=0;for(n=0;n<i.length;n++){const u=t._parsed[n];null===u||isNaN(u)||!this.chart.getDataVisibility(n)||i[n].hidden||(r+=Math.abs(u))}return r}calculateCircumference(n){const t=this._cachedMeta.total;return t>0&&!isNaN(n)?o*(Math.abs(n)/t):0}getLabelAndValue(n){const i=this._cachedMeta,t=this.chart,r=t.data.labels||[],u=di(i._parsed[n],t.options.locale);return{label:r[n]||"",value:u}}getMaxBorderWidth(n){let u=0;const f=this.chart;let t,i,e,o,r;if(!n)for(t=0,i=f.data.datasets.length;t<i;++t)if(f.isDatasetVisible(t)){e=f.getDatasetMeta(t);n=e.data;o=e.controller;break}if(!n)return 0;for(t=0,i=n.length;t<i;++t)r=o.resolveDataElementOptions(t),"inner"!==r.borderAlign&&(u=Math.max(u,r.borderWidth||0,r.hoverBorderWidth||0));return u}getMaxOffset(n){let t=0;for(let i=0,r=n.length;i<r;++i){const n=this.resolveDataElementOptions(i);t=Math.max(t,n.offset||0,n.hoverOffset||0)}return t}_getRingWeightOffset(n){let t=0;for(let i=0;i<n;++i)this.chart.isDatasetVisible(i)&&(t+=this._getRingWeight(i));return t}_getRingWeight(t){return Math.max(n(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class wp extends bt{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius",]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(n){const t=n.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:i,color:r}}=n.legend.options;return t.labels.map((t,u)=>{const f=n.getDatasetMeta(0).controller.getStyle(u);return{text:t,fillStyle:f.backgroundColor,strokeStyle:f.borderColor,fontColor:r,lineWidth:f.borderWidth,pointStyle:i,hidden:!n.getDataVisibility(u),index:u}})}return[]}},onClick(n,t,i){i.chart.toggleDataVisibility(t.index),i.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(n,t){super(n,t);this.innerRadius=void 0;this.outerRadius=void 0}getLabelAndValue(n){const i=this._cachedMeta,t=this.chart,r=t.data.labels||[],u=di(i._parsed[n].r,t.options.locale);return{label:r[n]||"",value:u}}parseObjectData(n,t,i,r){return to.bind(this)(n,t,i,r)}update(n){const t=this._cachedMeta.data;this._updateRadius();this.updateElements(t,0,t.length,n)}getMinMax(){const t=this._cachedMeta,n={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach((t,i)=>{const r=this.getParsed(i).r;!isNaN(r)&&this.chart.getDataVisibility(i)&&(r<n.min&&(n.min=r),r>n.max&&(n.max=r))}),n}_updateRadius(){const t=this.chart,n=t.chartArea,r=t.options,f=Math.min(n.right-n.left,n.bottom-n.top),i=Math.max(f/2,0),u=(i-Math.max(r.cutoutPercentage?i/100*r.cutoutPercentage:1,0))/t.getVisibleDatasetCount();this.outerRadius=i-u*this.index;this.innerRadius=this.outerRadius-u}updateElements(n,t,i,u){const a="reset"===u,s=this.chart,h=s.options.animation,e=this._cachedMeta.rScale,v=e.xCenter,y=e.yCenter,c=e.getIndexAngle(0)-.5*r;let f,o=c;const l=360/this.countVisibleElements();for(f=0;f<t;++f)o+=this._computeAngle(f,u,l);for(f=t;f<t+i;f++){const i=n[f];let r=o,t=o+this._computeAngle(f,u,l),p=s.getDataVisibility(f)?e.getDistanceFromCenterForValue(this.getParsed(f).r):0;o=t;a&&(h.animateScale&&(p=0),h.animateRotate&&(r=t=c));const w={x:v,y:y,innerRadius:0,outerRadius:p,startAngle:r,endAngle:t,options:this.resolveDataElementOptions(f,i.active?"active":u)};this.updateElement(i,f,w,u)}}countVisibleElements(){const t=this._cachedMeta;let n=0;return t.data.forEach((t,i)=>{!isNaN(this.getParsed(i).r)&&this.chart.getDataVisibility(i)&&n++}),n}_computeAngle(n,t,i){return this.chart.getDataVisibility(n)?nt(this.resolveDataElementOptions(n,t).angle||i):0}}es=Object.freeze({__proto__:null,BarController:class extends bt{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(n,t,i,r){return ua(n,t,i,r)}parseArrayData(n,t,i,r){return ua(n,t,i,r)}parseObjectData(n,t,i,r){const{iScale:f,vScale:s}=n,{xAxisKey:h="x",yAxisKey:c="y"}=this._parsing,v="x"===f.axis?h:c,y="x"===s.axis?h:c,l=[];let u,a,e,o;for(u=i,a=i+r;u<a;++u)o=t[u],e={},e[f.axis]=f.parse(lt(o,v),u),l.push(ra(lt(o,y),e,s,u));return l}updateRangeFromParsed(n,t,i,r){super.updateRangeFromParsed(n,t,i,r);const u=i._custom;u&&t===this._cachedMeta.vScale&&(n.min=Math.min(n.min,u.min),n.max=Math.max(n.max,u.max))}getMaxOverflow(){return 0}getLabelAndValue(n){const f=this._cachedMeta,{iScale:r,vScale:u}=f,t=this.getParsed(n),i=t._custom,e=po(i)?"["+i.start+", "+i.end+"]":""+u.getLabelForValue(t[u.axis]);return{label:""+r.getLabelForValue(t[r.axis]),value:e}}initialize(){this.enableOptionSharing=!0;super.initialize();this._cachedMeta.stack=this.getDataset().stack}update(n){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,n)}updateElements(n,i,r,u){const c="reset"===u,{index:o,_cachedMeta:{vScale:e}}=this,s=e.getBasePixel(),f=e.isHorizontal(),h=this._getRuler(),{sharedOptions:l,includeOptions:a}=this._getSharedOptions(i,u);for(let v=i;v<i+r;v++){const w=this.getParsed(v),i=c||t(w[e.axis])?{base:s,head:s}:this._calculateBarValuePixels(v),y=this._calculateBarIndexPixels(v,h),p=(w._stacks||{})[e.axis],r={horizontal:f,base:i.base,enableBorderRadius:!p||po(w._custom)||o===p._top||o===p._bottom,x:f?i.head:y.center,y:f?y.center:i.head,height:f?y.size:Math.abs(i.size),width:f?Math.abs(i.size):y.size};a&&(r.options=l||this.resolveDataElementOptions(v,n[v].active?"active":u));const b=r.options||n[v].options;lb(r,b,p,o);ab(r,b,h.ratio);this.updateElement(n[v],v,r,u)}}_getStacks(n,i){const{iScale:u}=this._cachedMeta,o=u.getMatchingVisibleMetas(this._type).filter(n=>n.controller.options.grouped),f=u.options.stacked,r=[],e=this._cachedMeta.controller.getParsed(i),s=e&&e[u.axis],h=n=>{const i=n._parsed.find(n=>n[u.axis]===s),r=i&&i[n.vScale.axis];if(t(r)||isNaN(r))return!0};for(const t of o)if((void 0===i||!h(t))&&((!1===f||-1===r.indexOf(t.stack)||void 0===f&&void 0===t.stack)&&r.push(t.stack),t.index===n))break;return r.length||r.push(void 0),r}_getStackCount(n){return this._getStacks(void 0,n).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const n=this.chart.scales,t=this.chart.options.indexAxis;return Object.keys(n).filter(i=>n[i].axis===t).shift()}_getAxis(){const t={},i=this.getFirstScaleIdForIndexAxis();for(const r of this.chart.data.datasets)t[n("x"===this.chart.options.indexAxis?r.xAxisID:r.yAxisID,i)]=!0;return Object.keys(t)}_getStackIndex(n,t,i){const r=this._getStacks(n,i),u=void 0!==t?r.indexOf(t):-1;return-1===u?r.length-1:u}_getRuler(){const i=this.options,r=this._cachedMeta,n=r.iScale,u=[];let t,f;for(t=0,f=r.data.length;t<f;++t)u.push(n.getPixelForValue(this.getParsed(t)[n.axis],t));const e=i.barThickness;return{min:e||cb(r),pixels:u,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:i.grouped,ratio:e?1:i.categoryPercentage*i.barPercentage}}_calculateBarValuePixels(n){const{_cachedMeta:{vScale:i,_stacked:a,index:w},options:{base:v,minBarLength:p}}=this,c=v||0,l=this.getParsed(n),o=l._custom,y=po(o);let e,r,f=l[i.axis],s=0,h=a?this.applyStack(i,l,a):f;h!==f&&(s=h-f,h=f);y&&(f=o.barStart,h=o.barEnd-o.barStart,0!==f&&ut(f)!==ut(o.barEnd)&&(s=0),s+=f);const b=t(v)||y?s:v;let u=i.getPixelForValue(b);if(e=this.chart.getDataVisibility(n)?i.getPixelForValue(s+h):u,r=e-u,Math.abs(r)<p){r=function(n,t,i){return 0!==n?ut(n):(t.isHorizontal()?1:-1)*(t.min>=i?1:-1)}(r,i,c)*p;f===c&&(u-=r/2);const n=i.getPixelForDecimal(0),t=i.getPixelForDecimal(1),o=Math.min(n,t),s=Math.max(n,t);u=Math.max(Math.min(u,s),o);e=u+r;a&&!y&&(l._stacks[i.axis]._visualValues[w]=i.getValueForPixel(e)-i.getValueForPixel(u))}if(u===i.getPixelForValue(c)){const n=ut(r)*i.getLineWidthForValue(c)/2;u+=n;r-=n}return{size:r,base:u,head:e,center:e+r/2}}_calculateBarIndexPixels(i,r){const o=r.scale,u=this.options,s=u.skipNull,h=n(u.maxBarThickness,1/0);let f,e;const c=this._getAxisCount();if(r.grouped){const l=s?this._getStackCount(i):r.stackCount,o="flex"===u.barThickness?function(n,t,i,r){const o=t.pixels,u=o[n];let e=n>0?o[n-1]:null,f=n<o.length-1?o[n+1]:null;const s=i.categoryPercentage;null===e&&(e=u-(null===f?t.end-t.start:f-u));null===f&&(f=u+u-e);const h=u-(u-Math.min(e,f))/2*s;return{chunk:Math.abs(f-e)/2*s/r,ratio:i.barPercentage,start:h}}(i,r,u,l*c):function(n,i,r,u){const o=r.barThickness;let f,e;return t(o)?(f=i.min*r.categoryPercentage,e=r.barPercentage):(f=o*u,e=1),{chunk:f/u,ratio:e,start:i.pixels[n]-f/2}}(i,r,u,l*c),a="x"===this.chart.options.indexAxis?this.getDataset().xAxisID:this.getDataset().yAxisID,v=this._getAxis().indexOf(n(a,this.getFirstScaleIdForIndexAxis())),y=this._getStackIndex(this.index,this._cachedMeta.stack,s?i:void 0)+v;f=o.start+o.chunk*y+o.chunk/2;e=Math.min(h,o.chunk*o.ratio)}else f=o.getPixelForValue(this.getParsed(i)[o.axis],i),e=Math.min(h,r.min*r.ratio);return{base:f-e/2,head:f+e/2,center:f,size:e}}draw(){const i=this._cachedMeta,r=i.vScale,t=i.data,u=t.length;let n=0;for(;n<u;++n)null===this.getParsed(n)[r.axis]||t[n].hidden||t[n].draw(this._ctx)}},BubbleController:class extends bt{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0;super.initialize()}parsePrimitiveData(n,t,i,r){const u=super.parsePrimitiveData(n,t,i,r);for(let n=0;n<u.length;n++)u[n]._custom=this.resolveDataElementOptions(n+i).radius;return u}parseArrayData(t,i,r,u){const f=super.parseArrayData(t,i,r,u);for(let t=0;t<f.length;t++){const u=i[r+t];f[t]._custom=n(u[2],this.resolveDataElementOptions(t+r).radius)}return f}parseObjectData(t,i,r,u){const f=super.parseObjectData(t,i,r,u);for(let t=0;t<f.length;t++){const u=i[r+t];f[t]._custom=n(u&&u.r&&+u.r,this.resolveDataElementOptions(t+r).radius)}return f}getMaxOverflow(){const t=this._cachedMeta.data;let n=0;for(let i=t.length-1;i>=0;--i)n=Math.max(n,t[i].size(this.resolveDataElementOptions(i))/2);return n>0&&n}getLabelAndValue(n){const r=this._cachedMeta,u=this.chart.data.labels||[],{xScale:f,yScale:e}=r,t=this.getParsed(n),o=f.getLabelForValue(t.x),s=e.getLabelForValue(t.y),i=t._custom;return{label:u[n]||"",value:"("+o+", "+s+(i?", "+i:"")+")"}}update(n){const t=this._cachedMeta.data;this.updateElements(t,0,t.length,n)}updateElements(n,t,i,r){const u="reset"===r,{iScale:f,vScale:e}=this._cachedMeta,{sharedOptions:h,includeOptions:c}=this._getSharedOptions(t,r),o=f.axis,s=e.axis;for(let l=t;l<t+i;l++){const i=n[l],a=!u&&this.getParsed(l),t={},v=t[o]=u?f.getPixelForDecimal(.5):f.getPixelForValue(a[o]),y=t[s]=u?e.getBasePixel():e.getPixelForValue(a[s]);t.skip=isNaN(v)||isNaN(y);c&&(t.options=h||this.resolveDataElementOptions(l,i.active?"active":r),u&&(t.options.radius=0));this.updateElement(i,l,t,r)}}resolveDataElementOptions(t,i){const u=this.getParsed(t);let r=super.resolveDataElementOptions(t,i);r.$shared&&(r=Object.assign({},r,{$shared:!1}));const f=r.radius;return"active"!==i&&(r.radius=0),r.radius+=n(u&&u._custom,f),r}},DoughnutController:ds,LineController:class extends bt{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0;this.supportsDecimation=!0;super.initialize()}update(n){const r=this._cachedMeta,{dataset:t,data:i=[],_dataset:s}=r,o=this.chart._animationsDisabled;let{start:u,count:f}=he(r,i,o);this._drawStart=u;this._drawCount=f;ce(r)&&(u=0,f=i.length);t._chart=this.chart;t._datasetIndex=this.index;t._decimated=!!s._decimated;t.points=i;const e=this.resolveDatasetElementOptions(n);this.options.showLine||(e.borderWidth=0);e.segment=this.options.segment;this.updateElement(t,void 0,{animated:!o,options:e},n);this.updateElements(i,u,f,n)}updateElements(n,i,r,u){const s="reset"===u,{iScale:h,vScale:f,_stacked:c,_dataset:y}=this._cachedMeta,{sharedOptions:p,includeOptions:w}=this._getSharedOptions(i,u),e=h.axis,o=f.axis,{spanGaps:l,segment:b}=this.options,k=oi(l)?l:Number.POSITIVE_INFINITY,a=this.chart._animationsDisabled||s||"none"===u,d=i+r,g=n.length;let v=i>0&&this.getParsed(i-1);for(let r=0;r<g;++r){const nt=n[r],l=a?nt:{};if(r<i||r>=d){l.skip=!0;continue}const g=this.getParsed(r),tt=t(g[o]),it=l[e]=h.getPixelForValue(g[e],r),rt=l[o]=s||tt?f.getBasePixel():f.getPixelForValue(c?this.applyStack(f,g,c):g[o],r);l.skip=isNaN(it)||isNaN(rt)||tt;l.stop=r>0&&Math.abs(g[e]-v[e])>k;b&&(l.parsed=g,l.raw=y.data[r]);w&&(l.options=p||this.resolveDataElementOptions(r,nt.active?"active":u));a||this.updateElement(nt,r,l,u);v=g}}getMaxOverflow(){const t=this._cachedMeta,i=t.dataset,r=i.options&&i.options.borderWidth||0,n=t.data||[];if(!n.length)return r;const u=n[0].size(this.resolveDataElementOptions(0)),f=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(r,u,f)/2}draw(){const n=this._cachedMeta;n.dataset.updateControlPoints(this.chart.chartArea,n.iScale.axis);super.draw()}},PieController:class extends ds{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"};},PolarAreaController:wp,RadarController:class extends bt{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(n){const t=this._cachedMeta.vScale,i=this.getParsed(n);return{label:t.getLabels()[n],value:""+t.getLabelForValue(i[t.axis])}}parseObjectData(n,t,i,r){return to.bind(this)(n,t,i,r)}update(n){const i=this._cachedMeta,r=i.dataset,t=i.data||[],u=i.iScale.getLabels();if(r.points=t,"resize"!==n){const i=this.resolveDatasetElementOptions(n);this.options.showLine||(i.borderWidth=0);const f={_loop:!0,_fullLoop:u.length===t.length,options:i};this.updateElement(r,void 0,f,n)}this.updateElements(t,0,t.length,n)}updateElements(n,t,i,r){const u=this._cachedMeta.rScale,f="reset"===r;for(let e=t;e<t+i;e++){const i=n[e],h=this.resolveDataElementOptions(e,i.active?"active":r),t=u.getPointPositionForValue(e,this.getParsed(e).r),o=f?u.xCenter:t.x,s=f?u.yCenter:t.y,c={x:o,y:s,angle:t.angle,skip:isNaN(o)||isNaN(s),options:h};this.updateElement(i,e,c,r)}}},ScatterController:class extends bt{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(n){const i=this._cachedMeta,r=this.chart.data.labels||[],{xScale:u,yScale:f}=i,t=this.getParsed(n),e=u.getLabelForValue(t.x),o=f.getLabelForValue(t.y);return{label:r[n]||"",value:"("+e+", "+o+")"}}update(n){const t=this._cachedMeta,{data:i=[]}=t,f=this.chart._animationsDisabled;let{start:r,count:u}=he(t,i,f);if(this._drawStart=r,this._drawCount=u,ce(t)&&(r=0,u=i.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:r,_dataset:e}=t;r._chart=this.chart;r._datasetIndex=this.index;r._decimated=!!e._decimated;r.points=i;const u=this.resolveDatasetElementOptions(n);u.segment=this.options.segment;this.updateElement(r,void 0,{animated:!f,options:u},n)}else this.datasetElementType&&(delete t.dataset,this.datasetElementType=!1);this.updateElements(i,r,u,n)}addElements(){const{showLine:n}=this.options;!this.datasetElementType&&n&&(this.datasetElementType=this.chart.registry.getElement("line"));super.addElements()}updateElements(n,i,r,u){const h="reset"===u,{iScale:c,vScale:f,_stacked:l,_dataset:w}=this._cachedMeta,a=this.resolveDataElementOptions(i,u),o=this.getSharedOptions(a),b=this.includeOptions(u,o),e=c.axis,s=f.axis,{spanGaps:v,segment:k}=this.options,d=oi(v)?v:Number.POSITIVE_INFINITY,y=this.chart._animationsDisabled||h||"none"===u;let p=i>0&&this.getParsed(i-1);for(let a=i;a<i+r;++a){const v=n[a],r=this.getParsed(a),i=y?v:{},g=t(r[s]),nt=i[e]=c.getPixelForValue(r[e],a),tt=i[s]=h||g?f.getBasePixel():f.getPixelForValue(l?this.applyStack(f,r,l):r[s],a);i.skip=isNaN(nt)||isNaN(tt)||g;i.stop=a>0&&Math.abs(r[e]-p[e])>d;k&&(i.parsed=r,i.raw=w.data[a]);b&&(i.options=o||this.resolveDataElementOptions(a,v.active?"active":u));y||this.updateElement(v,a,i,u);p=r}this.updateSharedOptions(o,u,a)}getMaxOverflow(){const t=this._cachedMeta,n=t.data||[];if(!this.options.showLine){let t=0;for(let i=n.length-1;i>=0;--i)t=Math.max(t,n[i].size(this.resolveDataElementOptions(i))/2);return t>0&&t}const i=t.dataset,r=i.options&&i.options.borderWidth||0;if(!n.length)return r;const u=n[0].size(this.resolveDataElementOptions(0)),f=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(r,u,f)/2}}});const kd="function"==typeof Path2D;class df extends ct{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:n=>"borderDash"!==n&&"fill"!==n};constructor(n){super();this.animated=!0;this.options=void 0;this._chart=void 0;this._loop=void 0;this._fullLoop=void 0;this._path=void 0;this._points=void 0;this._segments=void 0;this._decimated=!1;this._pointsUpdated=!1;this._datasetIndex=void 0;n&&Object.assign(this,n)}updateControlPoints(n,t){const i=this.options;if((i.tension||"monotone"===i.cubicInterpolationMode)&&!i.stepped&&!this._pointsUpdated){const r=i.spanGaps?this._loop:this._fullLoop;lc(this._points,i,n,r,t);this._pointsUpdated=!0}}set points(n){this._points=n;delete this._segments;delete this._path;this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=kc(this,this.options.segment))}first(){const n=this.segments,t=this.points;return n.length&&t[n[0].start]}last(){const n=this.segments,i=this.points,t=n.length;return t&&i[n[t-1].end]}interpolate(n,t){const u=this.options,i=n[t],f=this.points,r=eo(this,{property:t,start:i,end:i});if(r.length){const e=[],h=function(n){return n.stepped?ac:n.tension||"monotone"===n.cubicInterpolationMode?vc:ti}(u);let o,s;for(o=0,s=r.length;o<s;++o){const{start:a,end:v}=r[o],s=f[a],c=f[v];if(s===c){e.push(s);continue}const l=h(s,c,Math.abs((i-s[t])/(c[t]-s[t])),u.stepped);l[t]=n[t];e.push(l)}return 1===e.length?e[0]:e}}pathSegment(n,t,i){return wo(this)(n,this,t,i)}path(n,t,i){const u=this.segments,f=wo(this);let r=this._loop;t=t||0;i=i||this.points.length-t;for(const e of u)r&=f(n,this,e,{start:t,end:t+i-1});return!!r}draw(n,t,i,r){const u=this.options||{};(this.points||[]).length&&u.borderWidth&&(n.save(),kb(n,this,i,r),n.restore());this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}hf=Object.freeze({__proto__:null,ArcElement:class extends ct{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:n=>"borderDash"!==n};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(n){super();this.options=void 0;this.circumference=void 0;this.startAngle=void 0;this.endAngle=void 0;this.innerRadius=void 0;this.outerRadius=void 0;this.pixelMargin=0;this.fullCircles=0;n&&Object.assign(this,n)}inRange(t,i,r){const s=this.getProps(["x","y"],r),{angle:h,distance:c}=fe(s,{x:t,y:i}),{startAngle:u,endAngle:f,innerRadius:l,outerRadius:a,circumference:v}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference",],r),e=(this.options.spacing+this.options.borderWidth)/2,y=n(v,f-u),p=ki(h,u,f)&&u!==f,w=y>=o||p,b=et(c,l+e,a+e);return w&&b}getCenterPoint(n){const{x:r,y:u,startAngle:f,endAngle:e,innerRadius:o,outerRadius:s}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius",],n),{offset:h,spacing:c}=this.options,t=(f+e)/2,i=(o+s+c+h)/2;return{x:r+Math.cos(t)*i,y:u+Math.sin(t)*i}}tooltipPosition(n){return this.getCenterPoint(n)}draw(n){const{options:t,circumference:i}=this,u=(t.offset||0)/4,f=(t.spacing||0)/2,e=t.circular;if(this.pixelMargin="inner"===t.borderAlign?.33:0,this.fullCircles=i>o?Math.floor(i/o):0,0!==i&&!(this.innerRadius<0)&&!(this.outerRadius<0)){n.save();const s=(this.startAngle+this.endAngle)/2;n.translate(Math.cos(s)*u,Math.sin(s)*u);const h=u*(1-Math.sin(Math.min(r,i||0)));n.fillStyle=t.backgroundColor;n.strokeStyle=t.borderColor,function(n,t,i,r,u){const{fullCircles:e,startAngle:h,circumference:s}=t;let f=t.endAngle;if(e){uf(n,t,i,r,f,u);for(let t=0;t<e;++t)n.fill();isNaN(s)||(f=h+(s%o||o))}uf(n,t,i,r,f,u);n.fill()}(n,this,h,f,e);yb(n,this,h,f,e);n.restore()}}},BarElement:class extends ct{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(n){super();this.options=void 0;this.horizontal=void 0;this.base=void 0;this.width=void 0;this.height=void 0;this.inflateAmount=void 0;n&&Object.assign(this,n)}draw(n){const{inflateAmount:u,options:{borderColor:e,backgroundColor:o}}=this,{inner:t,outer:i}=db(this),f=(r=i.radius).topLeft||r.topRight||r.bottomLeft||r.bottomRight?gi:gb;var r;n.save();i.w===t.w&&i.h===t.h||(n.beginPath(),f(n,ko(i,u,t)),n.clip(),f(n,ko(t,-u,i)),n.fillStyle=e,n.fill("evenodd"));n.beginPath();f(n,ko(t,u));n.fillStyle=o;n.fill();n.restore()}inRange(n,t,i){return bo(this,n,t,i)}inXRange(n,t){return bo(this,n,null,t)}inYRange(n,t){return bo(this,null,n,t)}getCenterPoint(n){const{x:t,y:i,base:r,horizontal:u}=this.getProps(["x","y","base","horizontal"],n);return{x:u?(t+r)/2:t,y:u?i:(i+r)/2}}getRange(n){return"x"===n?this.width/2:this.height/2}},LineElement:df,PointElement:class extends ct{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(n){super();this.options=void 0;this.parsed=void 0;this.skip=void 0;this.stop=void 0;n&&Object.assign(this,n)}inRange(n,t,i){const r=this.options,{x:u,y:f}=this.getProps(["x","y"],i);return Math.pow(n-u,2)+Math.pow(t-f,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(n,t){return ha(this,n,"x",t)}inYRange(n,t){return ha(this,n,"y",t)}getCenterPoint(n){const{x:t,y:i}=this.getProps(["x","y"],n);return{x:t,y:i}}size(n){let t=(n=n||this.options||{}).radius||0;return t=Math.max(t,t&&n.hoverRadius||0),2*(t+(t&&n.borderWidth||0))}draw(n,t){const i=this.options;this.skip||i.radius<.1||!ot(this,t,this.size(i)/2)||(n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.fillStyle=i.backgroundColor,pu(n,i,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}});class gf extends vi{constructor(n){super(n);this.start=void 0;this.end=void 0;this._startValue=void 0;this._endValue=void 0;this._valueRange=0}parse(n){return t(n)||("number"==typeof n||n instanceof Number)&&!isFinite(+n)?null:+n}handleTickRangeOptions(){const{beginAtZero:i}=this.options,{minDefined:f,maxDefined:e}=this.getUserBounds();let{min:t,max:n}=this;const r=n=>t=f?t:n,u=t=>n=e?n:t;if(i){const i=ut(t),f=ut(n);i<0&&f<0?u(0):i>0&&f>0&&r(0)}if(t===n){let f=0===n?1:Math.abs(.05*n);u(n+f);i||r(t-f)}this.min=t;this.max=n}getTickLimit(){const r=this.options.ticks;let n,{maxTicksLimit:t,stepSize:i}=r;return i?(n=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,n>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${n} ticks. Limiting to 1000.`),n=1e3)):(n=this.computeTickLimit(),t=t||11),t&&(n=Math.min(t,n)),n}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const n=this.options,i=n.ticks;let r=this.getTickLimit();r=Math.max(2,r);const u=function(n,i){const c=[],{bounds:rt,step:k,min:o,max:e,precision:p,count:g,maxTicks:nt,maxDigits:ut,includeBounds:tt}=n,w=k||1,d=nt-1,{min:a,max:v}=i,b=!t(o),y=!t(e),ft=!t(g),it=(v-a)/(ut+1);let s,u,h,f,r=ie((v-a)/d/w)*w;if(r<1e-14&&!b&&!y)return[{value:a},{value:v}];f=Math.ceil(v/r)-Math.floor(a/r);f>d&&(r=ie(f*r/d/w)*w);t(p)||(s=Math.pow(10,p),r=Math.ceil(r*s)/s);"ticks"===rt?(u=Math.floor(a/r)*r,h=Math.ceil(v/r)*r):(u=a,h=v);b&&y&&k&&sh((e-o)/k,r/1e3)?(f=Math.round(Math.min((e-o)/r,nt)),r=(e-o)/f,u=o,h=e):ft?(u=b?o:u,h=y?e:h,f=g-1,r=(h-u)/f):(f=(h-u)/r,f=bi(f,Math.round(f),r/1e3)?Math.round(f):Math.ceil(f));const et=Math.max(ue(r),ue(u));s=Math.pow(10,t(p)?et:p);u=Math.round(u*s)/s;h=Math.round(h*s)/s;let l=0;for(b&&(tt&&u!==o?(c.push({value:o}),u<o&&l++,bi(Math.round((u+l*r)*s)/s,o,aa(o,it,n))&&l++):u<o&&l++);l<f;++l){const n=Math.round((u+l*r)*s)/s;if(y&&n>e)break;c.push({value:n})}return y&&tt&&h!==e?c.length&&bi(c[c.length-1].value,e,aa(e,it,n))?c[c.length-1].value=e:c.push({value:e}):y&&h!==e||c.push({value:h}),c}({maxTicks:r,bounds:n.bounds,min:n.min,max:n.max,precision:i.precision,step:i.stepSize,count:i.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:i.minRotation||0,includeBounds:!1!==i.includeBounds},this._range||this);return"ticks"===n.bounds&&re(u,this,"value"),n.reverse?(u.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),u}configure(){const i=this.ticks;let n=this.min,t=this.max;if(super.configure(),this.options.offset&&i.length){const r=(t-n)/Math.max(i.length-1,1)/2;n-=r;t+=r}this._startValue=n;this._endValue=t;this._valueRange=t-n}getLabelForValue(n){return di(n,this.chart.options.locale,this.options.ticks.format)}}class dd extends gf{static id="linear";static defaults={ticks:{callback:ir.formatters.numeric}};determineDataLimits(){const{min:n,max:t}=this.getMinMax(!0);this.min=h(n)?n:0;this.max=h(t)?t:1;this.handleTickRangeOptions()}computeTickLimit(){const n=this.isHorizontal(),i=n?this.width:this.height,t=nt(this.options.ticks.minRotation),r=(n?Math.sin(t):Math.cos(t))||.001,u=this._resolveTickFontOptions(0);return Math.ceil(i/Math.min(40,u.lineHeight/r))}getPixelForValue(n){return null===n?NaN:this.getPixelForDecimal((n-this._startValue)/this._valueRange)}getValueForPixel(n){return this._startValue+this.getDecimalForPixel(n)*this._valueRange}}const ru=n=>Math.floor(wt(n)),yi=(n,t)=>Math.pow(10,ru(n)+t);class gd extends vi{static id="logarithmic";static defaults={ticks:{callback:ir.formatters.logarithmic,major:{enabled:!0}}};constructor(n){super(n);this.start=void 0;this.end=void 0;this._startValue=void 0;this._valueRange=0}parse(n,t){const i=gf.prototype.parse.apply(this,[n,t]);if(0!==i)return h(i)&&i>0?i:null;this._zero=!0}determineDataLimits(){const{min:n,max:t}=this.getMinMax(!0);this.min=h(n)?Math.max(0,n):null;this.max=h(t)?Math.max(0,t):null;this.options.beginAtZero&&(this._zero=!0);this._zero&&this.min!==this._suggestedMin&&!h(this._userMin)&&(this.min=n===yi(this.min,0)?yi(this.min,-1):yi(this.min,0));this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:u,maxDefined:f}=this.getUserBounds();let n=this.min,t=this.max;const i=t=>n=u?n:t,r=n=>t=f?t:n;n===t&&(n<=0?(i(1),r(10)):(i(yi(n,-1)),r(yi(t,1))));n<=0&&i(yi(t,-1));t<=0&&r(yi(n,1));this.min=n;this.max=t}buildTicks(){const t=this.options,n=tk({min:this._userMin,max:this._userMax},this);return"ticks"===t.bounds&&re(n,this,"value"),t.reverse?(n.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),n}getLabelForValue(n){return void 0===n?"0":di(n,this.chart.options.locale,this.options.ticks.format)}configure(){const n=this.min;super.configure();this._startValue=wt(n);this._valueRange=wt(this.max)-wt(n)}getPixelForValue(n){return void 0!==n&&0!==n||(n=this.min),null===n||isNaN(n)?NaN:this.getPixelForDecimal(n===this.min?0:(wt(n)-this._startValue)/this._valueRange)}getValueForPixel(n){const t=this.getDecimalForPixel(n);return Math.pow(10,this._startValue+t*this._valueRange)}}class ng extends gf{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:ir.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:n=>n,padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(n){super(n);this.xCenter=void 0;this.yCenter=void 0;this.drawingArea=void 0;this._pointLabels=[];this._pointLabelItems=[]}setDimensions(){const n=this._padding=w(go(this.options)/2),t=this.width=this.maxWidth-n.width,i=this.height=this.maxHeight-n.height;this.xCenter=Math.floor(this.left+t/2+n.left);this.yCenter=Math.floor(this.top+i/2+n.top);this.drawingArea=Math.floor(Math.min(t,i)/2)}determineDataLimits(){const{min:n,max:t}=this.getMinMax(!1);this.min=h(n)&&!isNaN(n)?n:0;this.max=h(t)&&!isNaN(t)?t:0;this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/go(this.options))}generateTickLabels(n){gf.prototype.generateTickLabels.call(this,n);this._pointLabels=this.getLabels().map((n,t)=>{const i=f(this.options.pointLabels.callback,[n,t],this);return i||0===i?i:""}).filter((n,t)=>this.chart.getDataVisibility(t))}fit(){const n=this.options;n.display&&n.pointLabels.display?ik(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(n,t,i,r){this.xCenter+=Math.floor((n-t)/2);this.yCenter+=Math.floor((i-r)/2);this.drawingArea-=Math.min(this.drawingArea/2,Math.max(n,t,i,r))}getIndexAngle(n){return p(n*(o/(this._pointLabels.length||1))+nt(this.options.startAngle||0))}getDistanceFromCenterForValue(n){if(t(n))return NaN;const i=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-n)*i:(n-this.min)*i}getValueForDistanceFromCenter(n){if(t(n))return NaN;const i=n/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-i:this.min+i}getPointLabelContext(n){const t=this._pointLabels||[];if(n>=0&&n<t.length){const i=t[n];return function(n,t,i){return vt(n,{label:i,index:t,type:"pointLabel"})}(this.getContext(),n,i)}}getPointPosition(n,t,i=0){const r=this.getIndexAngle(n)-c+i;return{x:Math.cos(r)*t+this.xCenter,y:Math.sin(r)*t+this.yCenter,angle:r}}getPointPositionForValue(n,t){return this.getPointPosition(n,this.getDistanceFromCenterForValue(t))}getBasePosition(n){return this.getPointPositionForValue(n||0,this.getBaseValue())}getPointLabelPosition(n){const{left:t,top:i,right:r,bottom:u}=this._pointLabelItems[n];return{left:t,top:i,right:r,bottom:u}}drawBackground(){const{backgroundColor:n,grid:{circular:t}}=this.options;if(n){const i=this.ctx;i.save();i.beginPath();wa(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length);i.closePath();i.fillStyle=n;i.fill();i.restore()}}drawGrid(){const n=this.ctx,r=this.options,{angleLines:e,grid:o,border:s}=r,u=this._pointLabels.length;let t,i,f;if(r.pointLabels.display&&function(n,t){const{ctx:i,options:{pointLabels:r}}=n;for(let u=t-1;u>=0;u--){const t=n._pointLabelItems[u];if(t.visible){const f=r.setContext(n.getPointLabelContext(u));ek(i,f,t);const e=a(f.font),{x:o,y:s,textAlign:h}=t;ni(i,n._pointLabels[u],o,s+e.lineHeight/2,e,{color:f.color,textAlign:h,textBaseline:"middle"})}}}(this,u),o.display&&this.ticks.forEach((n,t)=>{if(0!==t||0===t&&this.min<0){i=this.getDistanceFromCenterForValue(n.value);const r=this.getContext(t),f=o.setContext(r),e=s.setContext(r);!function(n,t,i,r,u){const f=n.ctx,e=t.circular,{color:o,lineWidth:s}=t;(e||r)&&o&&s&&!(i<0)&&(f.save(),f.strokeStyle=o,f.lineWidth=s,f.setLineDash(u.dash||[]),f.lineDashOffset=u.dashOffset,f.beginPath(),wa(n,i,e,r),f.closePath(),f.stroke(),f.restore())}(this,f,i,u,e)}}),e.display){for(n.save(),t=u-1;t>=0;t--){const u=e.setContext(this.getPointLabelContext(t)),{color:o,lineWidth:s}=u;s&&o&&(n.lineWidth=s,n.strokeStyle=o,n.setLineDash(u.borderDash),n.lineDashOffset=u.borderDashOffset,i=this.getDistanceFromCenterForValue(r.reverse?this.min:this.max),f=this.getPointPosition(t,i),n.beginPath(),n.moveTo(this.xCenter,this.yCenter),n.lineTo(f.x,f.y),n.stroke())}n.restore()}}drawBorder(){}drawLabels(){const n=this.ctx,t=this.options,i=t.ticks;if(i.display){const f=this.getIndexAngle(0);let r,u;n.save();n.translate(this.xCenter,this.yCenter);n.rotate(f);n.textAlign="center";n.textBaseline="middle";this.ticks.forEach((f,e)=>{if(0!==e||!(this.min>=0)||t.reverse){const t=i.setContext(this.getContext(e)),o=a(t.font);if(r=this.getDistanceFromCenterForValue(this.ticks[e].value),t.showLabelBackdrop){n.font=o.string;u=n.measureText(f.label).width;n.fillStyle=t.backdropColor;const i=w(t.backdropPadding);n.fillRect(-u/2-i.left,-r-o.size/2-i.top,u+i.width,o.size+i.height)}ni(n,f.label,0,-r,o,{color:t.color,strokeColor:t.textStrokeColor,strokeWidth:t.textStrokeWidth})}});n.restore()}}drawTitle(){}}const ne={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},g=Object.keys(ne);class gs extends vi{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(n){super(n);this._cache={data:[],labels:[],all:[]};this._unit="day";this._majorUnit=void 0;this._offsets={};this._normalized=!1;this._parseOpts=void 0}init(n,t={}){const i=n.time||(n.time={}),r=this._adapter=new fs._date(n.adapters.date);r.init(t);wi(i.displayFormats,r.formats());this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday};super.init(n);this._normalized=t.normalized}parse(n){return void 0===n?null:ka(this,n)}beforeLayout(){super.beforeLayout();this._cache={data:[],labels:[],all:[]}}determineDataLimits(){function r(i){e||isNaN(i.min)||(n=Math.min(n,i.min));o||isNaN(i.max)||(t=Math.max(t,i.max))}const i=this.options,u=this._adapter,f=i.time.unit||"day";let{min:n,max:t,minDefined:e,maxDefined:o}=this.getUserBounds();e&&o||(r(this._getLabelBounds()),"ticks"===i.bounds&&"labels"===i.ticks.source||r(this.getMinMax(!1)));n=h(n)&&!isNaN(n)?n:+u.startOf(Date.now(),f);t=h(t)&&!isNaN(t)?t:+u.endOf(Date.now(),f)+1;this.min=Math.min(n,t-1);this.max=Math.max(n+1,t)}_getLabelBounds(){const n=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return n.length&&(t=n[0],i=n[n.length-1]),{min:t,max:i}}buildTicks(){const t=this.options,i=t.time,r=t.ticks,n="labels"===r.source?this.getLabelTimestamps():this._generate();"ticks"===t.bounds&&n.length&&(this.min=this._userMin||n[0],this.max=this._userMax||n[n.length-1]);const f=this.min,u=lh(n,f,this.max);return this._unit=i.unit||(r.autoSkip?da(i.minUnit,this.min,this.max,this._getLabelCapacity(f)):function(n,t,i,r,u){for(let f=g.length-1;f>=g.indexOf(i);f--){const i=g[f];if(ne[i].common&&n._adapter.diff(u,r,i)>=t-1)return i}return g[i?g.indexOf(i):0]}(this,u.length,i.minUnit,this.min,this.max)),this._majorUnit=r.major.enabled&&"year"!==this._unit?function(n){for(let t=g.indexOf(n)+1,i=g.length;t<i;++t)if(ne[g[t]].common)return g[t]}(this._unit):void 0,this.initOffsets(n),t.reverse&&u.reverse(),nv(this,u,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(n=>+n.value))}initOffsets(n=[]){let r,u,t=0,i=0;this.options.offset&&n.length&&(r=this.getDecimalForValue(n[0]),t=1===n.length?1-r:(this.getDecimalForValue(n[1])-r)/2,u=this.getDecimalForValue(n[n.length-1]),i=1===n.length?u:(u-this.getDecimalForValue(n[n.length-2]))/2);const f=n.length<3?.5:.25;t=v(t,0,f);i=v(i,0,f);this._offsets={start:t,end:i,factor:1/(t+1+i)}}_generate(){const e=this._adapter,i=this.min,r=this.max,o=this.options,s=o.time,u=s.unit||da(s.minUnit,i,r,this._getLabelCapacity(i)),h=n(o.ticks.stepSize,1),c="week"===u&&s.isoWeekday,v=oi(c)||!0===c,l={};let t,a,f=i;if(v&&(f=+e.startOf(f,"isoWeek",c)),f=+e.startOf(f,v?"day":u),e.diff(r,i,u)>1e5*h)throw new Error(i+" and "+r+" are too far apart with stepSize of "+h+" "+u);const y="data"===o.ticks.source&&this.getDataTimestamps();for(t=f,a=0;t<r;t=+e.add(t,h,u),a++)ga(l,t,y);return t!==r&&"ticks"!==o.bounds&&1!==a||ga(l,t,y),Object.keys(l).sort(ba).map(n=>+n)}getLabelForValue(n){const i=this._adapter,t=this.options.time;return t.tooltipFormat?i.format(n,t.tooltipFormat):i.format(n,t.displayFormats.datetime)}format(n,t){const i=this.options.time.displayFormats,r=this._unit,u=t||i[r];return this._adapter.format(n,u)}_tickFormatFunction(n,t,i,r){const e=this.options,o=e.ticks.callback;if(o)return f(o,[n,t,i],this);const s=e.time.displayFormats,h=this._unit,u=this._majorUnit,a=h&&s[h],c=u&&s[u],l=i[t],v=u&&c&&l&&l.major;return this._adapter.format(n,r||(v?c:a))}generateTickLabels(n){let t,r,i;for(t=0,r=n.length;t<r;++t)i=n[t],i.label=this._tickFormatFunction(i.value,t,n)}getDecimalForValue(n){return null===n?NaN:(n-this.min)/(this.max-this.min)}getPixelForValue(n){const t=this._offsets,i=this.getDecimalForValue(n);return this.getPixelForDecimal((t.start+i)*t.factor)}getValueForPixel(n){const t=this._offsets,i=this.getDecimalForPixel(n)/t.factor-t.end;return this.min+i*(this.max-this.min)}_getLabelSize(n){const t=this.options.ticks,i=this.ctx.measureText(n).width,r=nt(this.isHorizontal()?t.maxRotation:t.minRotation),u=Math.cos(r),f=Math.sin(r),e=this._resolveTickFontOptions(0).size;return{w:i*u+e*f,h:i*f+e*u}}_getLabelCapacity(n){const t=this.options.time,i=t.displayFormats,f=i[t.unit]||i.millisecond,e=this._tickFormatFunction(n,0,nv(this,[n],this._majorUnit),f),r=this._getLabelSize(e),u=Math.floor(this.isHorizontal()?this.width/r.w:this.height/r.h)-1;return u>0?u:1}getDataTimestamps(){let t,r,n=this._cache.data||[];if(n.length)return n;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(t=0,r=i.length;t<r;++t)n=n.concat(i[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(n)}getLabelTimestamps(){const n=this._cache.labels||[];let t,i;if(n.length)return n;const r=this.getLabels();for(t=0,i=r.length;t<i;++t)n.push(ka(this,r[t]));return this._cache.labels=this._normalized?n:this.normalize(n)}normalize(n){return oe(n.sort(ba))}}os=Object.freeze({__proto__:null,CategoryScale:class extends vi{static id="category";static defaults={ticks:{callback:la}};constructor(n){super(n);this._startValue=void 0;this._valueRange=0;this._addedLabels=[]}init(n){const t=this._addedLabels;if(t.length){const n=this.getLabels();for(const{index:i,label:r}of t)n[i]===r&&n.splice(i,1);this._addedLabels=[]}super.init(n)}parse(i,r){if(t(i))return null;const u=this.getLabels();return((n,t)=>null===n?null:v(Math.round(n),0,t))(r=isFinite(r)&&u[r]===i?r:nk(u,i,n(r,i),this._addedLabels),u.length-1)}determineDataLimits(){const{minDefined:i,maxDefined:r}=this.getUserBounds();let{min:n,max:t}=this.getMinMax(!0);"ticks"===this.options.bounds&&(i||(n=0),r||(t=this.getLabels().length-1));this.min=n;this.max=t}buildTicks(){const t=this.min,i=this.max,r=this.options.offset,u=[];let n=this.getLabels();n=0===t&&i===n.length-1?n:n.slice(t,i+1);this._valueRange=Math.max(n.length-(r?0:1),1);this._startValue=this.min-(r?.5:0);for(let n=t;n<=i;n++)u.push({value:n});return u}getLabelForValue(n){return la.call(this,n)}configure(){super.configure();this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(n){return"number"!=typeof n&&(n=this.parse(n)),null===n?NaN:this.getPixelForDecimal((n-this._startValue)/this._valueRange)}getPixelForTick(n){const t=this.ticks;return n<0||n>t.length-1?null:this.getPixelForValue(t[n].value)}getValueForPixel(n){return Math.round(this._startValue+this.getDecimalForPixel(n)*this._valueRange)}getBasePixel(){return this.bottom}},LinearScale:dd,LogarithmicScale:gd,RadialLinearScale:ng,TimeScale:gs,TimeSeriesScale:class extends gs{static id="timeseries";static defaults=gs.defaults;constructor(n){super(n);this._table=[];this._minPos=void 0;this._tableRange=void 0}initOffsets(){const n=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(n);this._minPos=ff(t,this.min);this._tableRange=ff(t,this.max)-this._minPos;super.initOffsets(n)}buildLookupTable(n){const{min:f,max:e}=this,r=[],o=[];let t,u,s,i,h;for(t=0,u=n.length;t<u;++t)i=n[t],i>=f&&i<=e&&r.push(i);if(r.length<2)return[{time:f,pos:0},{time:e,pos:1},];for(t=0,u=r.length;t<u;++t)h=r[t+1],s=r[t-1],i=r[t],Math.round((h+s)/2)!==i&&o.push({time:i,pos:t/(u-1)});return o}_generate(){const t=this.min,i=this.max;let n=super.getDataTimestamps();return n.includes(t)&&n.length||n.splice(0,0,t),n.includes(i)&&1!==n.length||n.push(i),n.sort((n,t)=>n-t)}_getTimestampsForTable(){let n=this._cache.all||[];if(n.length)return n;const t=this.getDataTimestamps(),i=this.getLabelTimestamps();return n=t.length&&i.length?this.normalize(t.concat(i)):t.length?t:i,n=this._cache.all=n,n}getDecimalForValue(n){return(ff(this._table,n)-this._minPos)/this._tableRange}getValueForPixel(n){const t=this._offsets,i=this.getDecimalForPixel(n)/t.factor-t.end;return ff(this._table,i*this._tableRange+this._minPos,!0)}}});const nh=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)",],bp=nh.map(n=>n.replace("rgb(","rgba(").replace(")",", 0.5)"));gv={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(n,t,i){if(i.enabled){const{data:{datasets:t},options:u}=n.config,{elements:f}=u,e=rv(t)||(r=u)&&(r.borderColor||r.backgroundColor)||f&&rv(f)||"rgba(0,0,0,0.1)"!==s.borderColor||"rgba(0,0,0,0.1)"!==s.backgroundColor;var r;if(i.forceOverride||!e){const i=ok(n);t.forEach(i)}}}};ny={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(n,i,r)=>{if(!r.enabled)return void fv(n);const u=n.width;n.data.datasets.forEach((i,f)=>{const{_data:s,indexAxis:h}=i,o=n.getDatasetMeta(f),e=s||i.data;if("y"!==nr([h,n.options.indexAxis])&&o.controller.supportsDecimation){const f=n.scales[o.xAxisID];if(("linear"===f.type||"time"===f.type)&&!n.options.parsing){let{start:h,count:n}=function(n,t){const r=t.length;let f,i=0;const{iScale:u}=n,{min:e,max:o,minDefined:s,maxDefined:h}=u.getUserBounds();return s&&(i=v(ht(t,u.axis,e).lo,0,r-1)),f=h?v(ht(t,u.axis,o).hi+1,i,r)-i:r-i,{start:i,count:f}}(o,e);if(n<=(r.threshold||4*u))return void uv(i);let f;switch(t(s)&&(i._data=e,delete i.data,Object.defineProperty(i,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(n){this._data=n}})),r.algorithm){case"lttb":f=function(n,t,i,r,u){const h=u.samples||r;if(h>=i)return n.slice(t,t+i);const e=[],o=(i-2)/(h-2);let c=0;const p=t+i-1;let f,v,l,s,y,a=t;for(e[c++]=n[a],f=0;f<h-2;f++){let r,u=0,h=0;const p=Math.floor((f+1)*o)+1+t,w=Math.min(Math.floor((f+2)*o)+1,i)+t,b=w-p;for(r=p;r<w;r++)u+=n[r].x,h+=n[r].y;u/=b;h/=b;const g=Math.floor(f*o)+1+t,nt=Math.min(Math.floor((f+1)*o)+1,i)+t,{x:k,y:d}=n[a];for(l=s=-1,r=g;r<nt;r++)s=.5*Math.abs((k-u)*(n[r].y-d)-(k-n[r].x)*(h-d)),s>l&&(l=s,v=n[r],y=r);e[c++]=v;a=y}return e[c++]=n[p],e}(e,h,n,u,r);break;case"min-max":f=function(n,i,r,u){let f,o,w,e,b,s,h,l,v,y,a=0,p=0;const c=[],d=i+r-1,k=n[i].x,g=n[d].x-k;for(f=i;f<i+r;++f){o=n[f];w=(o.x-k)/g*u;e=o.y;const i=0|w;if(i===b)e<v?(v=e,s=f):e>y&&(y=e,h=f),a=(p*a+o.x)/++p;else{const r=f-1;if(!t(s)&&!t(h)){const t=Math.min(s,h),i=Math.max(s,h);t!==l&&t!==r&&c.push({...n[t],x:a});i!==l&&i!==r&&c.push({...n[i],x:a})}f>0&&r!==l&&c.push(n[r]);c.push(o);b=i;p=0;v=y=e;s=h=l=f}}return c}(e,h,n,u);break;default:throw new Error(`Unsupported decimation algorithm '${r.algorithm}'`);}i._decimated=f}}})},destroy(n){fv(n)}};class kp{constructor(n){this.x=n.x;this.y=n.y;this.radius=n.radius}pathSegment(n,t,i){const{x:r,y:u,radius:f}=this;return t=t||{start:0,end:o},n.arc(r,u,f,t.end,t.start,!0),!i.bounds}interpolate(n){const{x:r,y:u,radius:i}=this,t=n.angle;return{x:r+Math.cos(t)*i,y:u+Math.sin(t)*i,angle:t}}}ty={id:"filler",afterDatasetsUpdate(n,t,i){const o=(n.data.datasets||[]).length,s=[];let e,r,f,u;for(r=0;r<o;++r)e=n.getDatasetMeta(r),f=e.dataset,u=null,f&&f.options&&f instanceof df&&(u={visible:n.isDatasetVisible(r),index:r,fill:hk(f,r,o),chart:n,axis:e.controller.options.indexAxis,scale:e.vScale,line:f}),e.$filler=u,s.push(u);for(r=0;r<o;++r)u=s[r],u&&!1!==u.fill&&(u.fill=sk(s,r,i.propagate))},beforeDraw(n,t,i){const f="beforeDraw"===i.drawTime,r=n.getSortedVisibleDatasetMetas(),u=n.chartArea;for(let t=r.length-1;t>=0;--t){const i=r[t].$filler;i&&(i.line.updateControlPoints(u,i.axis),f&&i.fill&&ts(n.ctx,i,u))}},beforeDatasetsDraw(n,t,i){if("beforeDatasetsDraw"===i.drawTime){const t=n.getSortedVisibleDatasetMetas();for(let i=t.length-1;i>=0;--i){const r=t[i].$filler;sv(r)&&ts(n.ctx,r,n.chartArea)}}},beforeDatasetDraw(n,t,i){const r=t.meta.$filler;sv(r)&&"beforeDatasetDraw"===i.drawTime&&ts(n.ctx,r,n.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const dp=(n,t)=>{let{boxHeight:i=e,boxWidth:r=e}=n;return n.usePointStyle&&(i=Math.min(i,t),r=n.pointStyleWidth||Math.min(r,t)),{boxWidth:r,boxHeight:i,itemHeight:Math.max(t,i)}};class gp extends ct{constructor(n){super();this._added=!1;this.legendHitBoxes=[];this._hoveredItem=null;this.doughnutMode=!1;this.chart=n.chart;this.options=n.options;this.ctx=n.ctx;this.legendItems=void 0;this.columnSizes=void 0;this.lineWidths=void 0;this.maxHeight=void 0;this.maxWidth=void 0;this.top=void 0;this.bottom=void 0;this.left=void 0;this.right=void 0;this.height=void 0;this.width=void 0;this._margins=void 0;this.position=void 0;this.weight=void 0;this.fullSize=void 0}update(n,t,i){this.maxWidth=n;this.maxHeight=t;this._margins=i;this.setDimensions();this.buildLabels();this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let n=f(t.generateLabels,[this.chart],this)||[];t.filter&&(n=n.filter(n=>t.filter(n,this.chart.data)));t.sort&&(n=n.sort((n,i)=>t.sort(n,i,this.chart.data)));this.options.reverse&&n.reverse();this.legendItems=n}fit(){const{options:n,ctx:h}=this;if(!n.display)return void(this.width=this.height=0);const u=n.labels,t=a(u.font),f=t.size,e=this._computeTitleHeight(),{boxWidth:o,itemHeight:s}=dp(u,f);let i,r;h.font=t.string;this.isHorizontal()?(i=this.maxWidth,r=this._fitRows(e,f,o,s)+10):(r=this.maxHeight,i=this._fitCols(e,t,o,s)+10);this.width=Math.min(i,n.maxWidth||this.maxWidth);this.height=Math.min(r,n.maxHeight||this.maxHeight)}_fitRows(n,t,i,r){const{ctx:f,maxWidth:l,options:{labels:{padding:e}}}=this,a=this.legendHitBoxes=[],u=this.lineWidths=[0],o=r+e;let s=n;f.textAlign="left";f.textBaseline="middle";let h=-1,c=-o;return this.legendItems.forEach((n,v)=>{const y=i+t/2+f.measureText(n.text).width;(0===v||u[u.length-1]+y+2*e>l)&&(s+=o,u[u.length-(v>0?0:1)]=0,c+=o,h++);a[v]={left:0,top:c,row:h,width:y,height:r};u[u.length-1]+=y+e}),s}_fitCols(n,t,i,r){const{ctx:l,maxHeight:a,options:{labels:{padding:e}}}=this,v=this.legendHitBoxes=[],s=this.columnSizes=[],y=a-n;let o=e,u=0,f=0,h=0,c=0;return this.legendItems.forEach((n,a)=>{const{itemWidth:w,itemHeight:p}=function(n,t,i,r,u){const f=function(n,t,i,r){let u=n.text;return u&&"string"!=typeof u&&(u=u.reduce((n,t)=>n.length>t.length?n:t)),t+i.size/2+r.measureText(u).width}(r,n,t,i),e=function(n,t,i){let r=n;return"string"!=typeof t.text&&(r=av(t,i)),r}(u,r,t.lineHeight);return{itemWidth:f,itemHeight:e}}(i,t,l,n,r);a>0&&f+p+2*e>y&&(o+=u+e,s.push({width:u,height:f}),h+=u+e,c++,u=f=0);v[a]={left:h,top:f,col:c,width:w,height:p};u=Math.max(u,w);f+=p+e}),o+=u,s.push({width:u,height:f}),o}adjustHitBoxes(){if(this.options.display){const r=this._computeTitleHeight(),{legendHitBoxes:u,options:{align:t,labels:{padding:n},rtl:f}}=this,i=ci(f,this.left,this.width);if(this.isHorizontal()){let f=0,e=b(t,this.left+n,this.right-this.lineWidths[f]);for(const o of u)f!==o.row&&(f=o.row,e=b(t,this.left+n,this.right-this.lineWidths[f])),o.top+=this.top+r+n,o.left=i.leftForLtr(i.x(e),o.width),e+=o.width+n}else{let f=0,e=b(t,this.top+r+n,this.bottom-this.columnSizes[f].height);for(const o of u)o.col!==f&&(f=o.col,e=b(t,this.top+r+n,this.bottom-this.columnSizes[f].height)),o.top=e,o.left+=this.left+n,o.left=i.leftForLtr(i.x(o.left),o.width),e+=o.height+n}}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const n=this.ctx;vr(n,this);this._draw();yr(n)}}_draw(){const{options:h,columnSizes:y,lineWidths:g,ctx:t}=this,{align:c,labels:e}=h,nt=s.color,f=ci(h.rtl,this.left,this.width),l=a(e.font),{padding:r}=e,p=l.size,w=p/2;let i;this.drawTitle();t.textAlign=f.textAlign("left");t.textBaseline="middle";t.lineWidth=.5;t.font=l.string;const{boxWidth:u,boxHeight:o,itemHeight:tt}=dp(e,p),v=this.isHorizontal(),k=this._computeTitleHeight();i=v?{x:b(c,this.left+r,this.right-g[0]),y:this.top+r+k,line:0}:{x:this.left+r,y:b(c,this.top+k+r,this.bottom-y[0].height),line:0};ro(this.ctx,h.textDirection);const d=tt+r;this.legendItems.forEach((s,a)=>{t.strokeStyle=s.fontColor;t.fillStyle=s.fontColor;const ft=t.measureText(s.text).width,et=f.textAlign(s.textAlign||(s.textAlign=e.textAlign)),ut=u+w+ft;let it=i.x,rt=i.y;if(f.setWidth(this.width),v?a>0&&it+ut+r>this.right&&(rt=i.y+=d,i.line++,it=i.x=b(c,this.left+r,this.right-g[i.line])):a>0&&rt+d>this.bottom&&(it=i.x=it+y[i.line].width+r,i.line++,rt=i.y=b(c,this.top+k+r,this.bottom-y[i.line].height)),function(i,r,s){if(!isNaN(u)&&!(u<=0)&&!isNaN(o)&&!(o<0)){t.save();const h=n(s.lineWidth,1);if(t.fillStyle=n(s.fillStyle,nt),t.lineCap=n(s.lineCap,"butt"),t.lineDashOffset=n(s.lineDashOffset,0),t.lineJoin=n(s.lineJoin,"miter"),t.lineWidth=h,t.strokeStyle=n(s.strokeStyle,nt),t.setLineDash(n(s.lineDash,[])),e.usePointStyle){const n={radius:o*Math.SQRT2/2,pointStyle:s.pointStyle,rotation:s.rotation,borderWidth:h},c=f.xPlus(i,u/2);de(t,n,c,r+w,e.pointStyleWidth&&u)}else{const n=r+Math.max((p-o)/2,0),e=f.leftForLtr(i,u),c=ii(s.borderRadius);t.beginPath();Object.values(c).some(n=>0!==n)?gi(t,{x:e,y:n,w:u,h:o,radius:c}):t.rect(e,n,u,o);t.fill();0!==h&&t.stroke()}t.restore()}}(f.x(it),rt,s),it=vy(et,it+u+w,v?it+ut:this.right,h.rtl),function(n,i,r){ni(t,r.text,n,i+tt/2,l,{strikethrough:r.hidden,textAlign:f.textAlign(r.textAlign)})}(f.x(it),rt,s),v)i.x+=ut+r;else if("string"!=typeof s.text){const n=l.lineHeight;i.y+=av(s,n)+r}else i.y+=d});uo(this.ctx,h.textDirection)}drawTitle(){const t=this.options,n=t.title,i=a(n.font),r=w(n.padding);if(n.display){const c=ci(t.rtl,this.left,this.width),u=this.ctx,s=n.position,l=i.size/2,h=r.top+l;let e,f=this.left,o=this.width;if(this.isHorizontal())o=Math.max(...this.lineWidths),e=this.top+h,f=b(t.align,f,this.right-o);else{const n=this.columnSizes.reduce((n,t)=>Math.max(n,t.height),0);e=h+b(t.align,this.top,this.bottom-n-t.labels.padding-this._computeTitleHeight())}const a=b(s,f,f+o);u.textAlign=c.textAlign(cf(s));u.textBaseline="middle";u.strokeStyle=n.color;u.fillStyle=n.color;u.font=i.string;ni(u,n.text,a,e,i)}}_computeTitleHeight(){const n=this.options.title,t=a(n.font),i=w(n.padding);return n.display?t.lineHeight+i.height:0}_getLegendItemAt(n,t){let r,i,u;if(et(n,this.left,this.right)&&et(t,this.top,this.bottom))for(u=this.legendHitBoxes,r=0;r<u.length;++r)if(i=u[r],et(n,i.left,i.left+i.width)&&et(t,i.top,i.top+i.height))return this.legendItems[r];return null}handleEvent(n){const t=this.options;if(function(n,t){return("mousemove"===n||"mouseout"===n)&&(t.onHover||t.onLeave)?!0:t.onClick&&("click"===n||"mouseup"===n)?!0:!1}(n.type,t)){const u=this._getLegendItemAt(n.x,n.y);if("mousemove"===n.type||"mouseout"===n.type){const e=this._hoveredItem,o=(i=u,null!==(r=e)&&null!==i&&r.datasetIndex===i.datasetIndex&&r.index===i.index);e&&!o&&f(t.onLeave,[n,e,this],this);this._hoveredItem=u;u&&!o&&f(t.onHover,[n,u,this],this)}else u&&f(t.onClick,[n,u,this],this);var r,i}}}iy={id:"legend",_element:gp,start(n,t,i){const r=n.legend=new gp({ctx:n.ctx,options:i,chart:n});y.configure(n,r,i);y.addBox(n,r)},stop(n){y.removeBox(n,n.legend);delete n.legend},beforeUpdate(n,t,i){const r=n.legend;y.configure(n,r,i);r.options=i},afterUpdate(n){const t=n.legend;t.buildLabels();t.adjustHitBoxes()},afterEvent(n,t){t.replay||n.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,t,i){const r=t.datasetIndex,u=i.chart;u.isDatasetVisible(r)?(u.hide(r),t.hidden=!0):(u.show(r),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const t=n.data.datasets,{labels:{usePointStyle:i,pointStyle:r,textAlign:u,color:f,useBorderRadius:e,borderRadius:o}}=n.legend.options;return n._getSortedDatasetMetas().map(n=>{const s=n.controller.getStyle(i?0:void 0),h=w(s.borderWidth);return{text:t[n.index].label,fillStyle:s.backgroundColor,fontColor:f,hidden:!n.visible,lineCap:s.borderCapStyle,lineDash:s.borderDash,lineDashOffset:s.borderDashOffset,lineJoin:s.borderJoinStyle,lineWidth:(h.width+h.height)/4,strokeStyle:s.borderColor,pointStyle:r||s.pointStyle,rotation:s.rotation,textAlign:u||s.textAlign,borderRadius:e&&(o||s.borderRadius),datasetIndex:n.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};class th extends ct{constructor(n){super();this.chart=n.chart;this.options=n.options;this.ctx=n.ctx;this._padding=void 0;this.top=void 0;this.bottom=void 0;this.left=void 0;this.right=void 0;this.width=void 0;this.height=void 0;this.position=void 0;this.weight=void 0;this.fullSize=void 0}update(n,t){const i=this.options;if(this.left=0,this.top=0,!i.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=n;this.height=this.bottom=t;const u=e(i.text)?i.text.length:1;this._padding=w(i.padding);const r=u*a(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){const n=this.options.position;return"top"===n||"bottom"===n}_drawArgs(n){const{top:t,left:f,bottom:e,right:o,options:l}=this,s=l.align;let h,i,u,c=0;return this.isHorizontal()?(i=b(s,f,o),u=t+n,h=o-f):("left"===l.position?(i=f+n,u=b(s,e,t),c=-.5*r):(i=o-n,u=b(s,t,e),c=.5*r),h=e-t),{titleX:i,titleY:u,maxWidth:h,rotation:c}}draw(){const t=this.ctx,n=this.options;if(n.display){const i=a(n.font),r=i.lineHeight/2+this._padding.top,{titleX:u,titleY:f,maxWidth:e,rotation:o}=this._drawArgs(r);ni(t,n.text,0,0,i,{color:n.color,maxWidth:e,rotation:o,textAlign:cf(n.align),textBaseline:"middle",translation:[u,f]})}}}ry={id:"title",_element:th,start(n,t,i){!function(n,t){const i=new th({ctx:n.ctx,options:t,chart:n});y.configure(n,i,t);y.addBox(n,i);n.titleBlock=i}(n,i)},stop(n){const t=n.titleBlock;y.removeBox(n,t);delete n.titleBlock},beforeUpdate(n,t,i){const r=n.titleBlock;y.configure(n,r,i);r.options=i},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const te=new WeakMap;uy={id:"subtitle",start(n,t,i){const r=new th({ctx:n.ctx,options:i,chart:n});y.configure(n,r,i);y.addBox(n,r);te.set(n,r)},stop(n){y.removeBox(n,te.get(n));te.delete(n)},beforeUpdate(n,t,i){const r=te.get(n);y.configure(n,r,i);r.options=i},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const uu={average(n){if(!n.length)return!1;let t,u,i=new Set,f=0,r=0;for(t=0,u=n.length;t<u;++t){const u=n[t].element;if(u&&u.hasValue()){const n=u.tooltipPosition();i.add(n.x);f+=n.y;++r}}return 0===r||0===i.size?!1:{x:[...i].reduce((n,t)=>n+t)/i.size,y:f/r}},nearest(n,t){if(!n.length)return!1;let i,u,r,f=t.x,e=t.y,o=Number.POSITIVE_INFINITY;for(i=0,u=n.length;i<u;++i){const u=n[i].element;if(u&&u.hasValue()){const n=ou(t,u.getCenterPoint());n<o&&(o=n,r=u)}}if(r){const n=r.tooltipPosition();f=n.x;e=n.y}return{x:f,y:e}}},nw={beforeTitle:ft,title(n){if(n.length>0){const t=n[0],i=t.chart.data.labels,r=i?i.length:0;if(this&&this.options&&"dataset"===this.options.mode)return t.dataset.label||"";if(t.label)return t.label;if(r>0&&t.dataIndex<r)return i[t.dataIndex]}return""},afterTitle:ft,beforeBody:ft,beforeLabel:ft,label(n){if(this&&this.options&&"dataset"===this.options.mode)return n.label+": "+n.formattedValue||n.formattedValue;let i=n.dataset.label||"";i&&(i+=": ");const r=n.formattedValue;return t(r)||(i+=r),i},labelColor(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:ft,afterBody:ft,beforeFooter:ft,footer:ft,afterFooter:ft};class tw extends ct{static positioners=uu;constructor(n){super();this.opacity=0;this._active=[];this._eventPosition=void 0;this._size=void 0;this._cachedAnimations=void 0;this._tooltipItems=[];this.$animations=void 0;this.$context=void 0;this.chart=n.chart;this.options=n.options;this.dataPoints=void 0;this.title=void 0;this.beforeBody=void 0;this.body=void 0;this.afterBody=void 0;this.footer=void 0;this.xAlign=void 0;this.yAlign=void 0;this.x=void 0;this.y=void 0;this.height=void 0;this.width=void 0;this.caretX=void 0;this.caretY=void 0;this.labelColors=void 0;this.labelPointStyles=void 0;this.labelTextColors=void 0}initialize(n){this.options=n;this._cachedAnimations=void 0;this.$context=void 0}_resolveAnimations(){const n=this._cachedAnimations;if(n)return n;const u=this.chart,t=this.options.setContext(this.getContext()),i=t.enabled&&u.options.animation&&t.animations,r=new bs(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=(n=this.chart.getContext(),t=this,i=this._tooltipItems,vt(n,{tooltip:t,tooltipItems:i,type:"tooltip"})));var n,t,i}getTitle(n,t){const{callbacks:r}=t,u=d(r,"beforeTitle",this,n),f=d(r,"title",this,n),e=d(r,"afterTitle",this,n);let i=[];return i=st(i,yt(u)),i=st(i,yt(f)),i=st(i,yt(e)),i}getBeforeBody(n,t){return wv(d(t.callbacks,"beforeBody",this,n))}getBody(n,t){const{callbacks:r}=t,i=[];return u(n,n=>{const t={before:[],lines:[],after:[]},u=bv(r,n);st(t.before,yt(d(u,"beforeLabel",this,n)));st(t.lines,d(u,"label",this,n));st(t.after,yt(d(u,"afterLabel",this,n)));i.push(t)}),i}getAfterBody(n,t){return wv(d(t.callbacks,"afterBody",this,n))}getFooter(n,t){const{callbacks:r}=t,u=d(r,"beforeFooter",this,n),f=d(r,"footer",this,n),e=d(r,"afterFooter",this,n);let i=[];return i=st(i,yt(u)),i=st(i,yt(f)),i=st(i,yt(e)),i}_createItems(n){const r=this._active,f=this.chart.data,e=[],o=[],s=[];let i,h,t=[];for(i=0,h=r.length;i<h;++i)t.push(yk(this.chart,r[i]));return n.filter&&(t=t.filter((t,i,r)=>n.filter(t,i,r,f))),n.itemSort&&(t=t.sort((t,i)=>n.itemSort(t,i,f))),u(t,t=>{const i=bv(n.callbacks,t);e.push(d(i,"labelColor",this,t));o.push(d(i,"labelPointStyle",this,t));s.push(d(i,"labelTextColor",this,t))}),this.labelColors=e,this.labelPointStyles=o,this.labelTextColors=s,this.dataPoints=t,t}update(n,t){const i=this.options.setContext(this.getContext()),f=this._active;let u,r=[];if(f.length){const n=uu[i.position].call(this,f,this._eventPosition);r=this._createItems(i);this.title=this.getTitle(r,i);this.beforeBody=this.getBeforeBody(r,i);this.body=this.getBody(r,i);this.afterBody=this.getAfterBody(r,i);this.footer=this.getFooter(r,i);const t=this._size=vv(this,i),o=Object.assign({},n,t),e=yv(this.chart,i,o),s=pv(i,o,e,this.chart);this.xAlign=e.xAlign;this.yAlign=e.yAlign;u={opacity:1,x:s.x,y:s.y,width:t.width,height:t.height,caretX:n.x,caretY:n.y}}else 0!==this.opacity&&(u={opacity:0});this._tooltipItems=r;this.$context=void 0;u&&this._resolveAnimations().update(this,u);n&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(n,t,i,r){const u=this.getCaretPosition(n,i,r);t.lineTo(u.x1,u.y1);t.lineTo(u.x2,u.y2);t.lineTo(u.x3,u.y3)}getCaretPosition(n,t,i){const{xAlign:l,yAlign:v}=this,{caretSize:r,cornerRadius:w}=i,{topLeft:b,topRight:k,bottomLeft:d,bottomRight:g}=ii(w),{x:s,y:a}=n,{width:y,height:p}=t;let u,f,h,e,o,c;return"center"===v?(o=a+p/2,"left"===l?(u=s,f=u-r,e=o+r,c=o-r):(u=s+y,f=u+r,e=o-r,c=o+r),h=u):(f="left"===l?s+Math.max(b,d)+r:"right"===l?s+y-Math.max(k,g)-r:this.caretX,"top"===v?(e=a,o=e-r,u=f-r,h=f+r):(e=a+p,o=e+r,u=f+r,h=f-r),c=e),{x1:u,x2:f,x3:h,y1:e,y2:o,y3:c}}drawTitle(n,t,i){const o=this.title,f=o.length;let u,e,r;if(f){const s=ci(i.rtl,this.x,this.width);for(n.x=sf(this,i.titleAlign,i),t.textAlign=s.textAlign(i.titleAlign),t.textBaseline="middle",u=a(i.titleFont),e=i.titleSpacing,t.fillStyle=i.titleColor,t.font=u.string,r=0;r<f;++r)t.fillText(o[r],s.x(n.x),n.y+u.lineHeight/2),n.y+=u.lineHeight+e,r+1===f&&(n.y+=i.titleMarginBottom-e)}}_drawColorBox(n,t,r,u,f){const e=this.labelColors[r],l=this.labelPointStyles[r],{boxHeight:s,boxWidth:o}=f,v=a(f.bodyFont),y=sf(this,"left",f),c=u.x(y),p=s<v.lineHeight?(v.lineHeight-s)/2:0,h=t.y+p;if(f.usePointStyle){const t={radius:Math.min(o,s)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},i=u.leftForLtr(c,o)+o/2,r=h+s/2;n.strokeStyle=f.multiKeyBackground;n.fillStyle=f.multiKeyBackground;pu(n,t,i,r);n.strokeStyle=e.borderColor;n.fillStyle=e.backgroundColor;pu(n,t,i,r)}else{n.lineWidth=i(e.borderWidth)?Math.max(...Object.values(e.borderWidth)):e.borderWidth||1;n.strokeStyle=e.borderColor;n.setLineDash(e.borderDash||[]);n.lineDashOffset=e.borderDashOffset||0;const t=u.leftForLtr(c,o),l=u.leftForLtr(u.xPlus(c,1),o-2),r=ii(e.borderRadius);Object.values(r).some(n=>0!==n)?(n.beginPath(),n.fillStyle=f.multiKeyBackground,gi(n,{x:t,y:h,w:o,h:s,radius:r}),n.fill(),n.stroke(),n.fillStyle=e.backgroundColor,n.beginPath(),gi(n,{x:l,y:h+1,w:o-2,h:s-2,radius:r}),n.fill()):(n.fillStyle=f.multiKeyBackground,n.fillRect(t,h,o,s),n.strokeRect(t,h,o,s),n.fillStyle=e.backgroundColor,n.fillRect(l,h+1,o-2,s-2))}n.fillStyle=this.labelTextColors[r]}drawBody(n,t,i){const{body:p}=this,{bodySpacing:w,bodyAlign:l,displayColors:b,boxHeight:rt,boxWidth:k,boxPadding:d}=i,f=a(i.bodyFont);let e=f.lineHeight,v=0;const y=ci(i.rtl,this.x,this.width),o=function(i){t.fillText(i,y.x(n.x+v),n.y+e/2);n.y+=e+w},g=y.textAlign(l);let s,nt,h,r,c,tt,it;for(t.textAlign=l,t.textBaseline="middle",t.font=f.string,n.x=sf(this,g,i),t.fillStyle=i.bodyColor,u(this.beforeBody,o),v=b&&"right"!==g?"center"===l?k/2+d:k+2+d:0,r=0,tt=p.length;r<tt;++r){for(s=p[r],nt=this.labelTextColors[r],t.fillStyle=nt,u(s.before,o),h=s.lines,b&&h.length&&(this._drawColorBox(t,n,r,y,i),e=Math.max(f.lineHeight,rt)),c=0,it=h.length;c<it;++c)o(h[c]),e=f.lineHeight;u(s.after,o)}v=0;e=f.lineHeight;u(this.afterBody,o);n.y-=w}drawFooter(n,t,i){const f=this.footer,e=f.length;let r,u;if(e){const o=ci(i.rtl,this.x,this.width);for(n.x=sf(this,i.footerAlign,i),n.y+=i.footerMarginTop,t.textAlign=o.textAlign(i.footerAlign),t.textBaseline="middle",r=a(i.footerFont),t.fillStyle=i.footerColor,t.font=r.string,u=0;u<e;++u)t.fillText(f[u],o.x(n.x),n.y+r.lineHeight/2),n.y+=r.lineHeight+i.footerSpacing}}drawBackground(n,t,i,r){const{xAlign:c,yAlign:s}=this,{x:u,y:f}=n,{width:e,height:o}=i,{topLeft:h,topRight:l,bottomLeft:a,bottomRight:v}=ii(r.cornerRadius);t.fillStyle=r.backgroundColor;t.strokeStyle=r.borderColor;t.lineWidth=r.borderWidth;t.beginPath();t.moveTo(u+h,f);"top"===s&&this.drawCaret(n,t,i,r);t.lineTo(u+e-l,f);t.quadraticCurveTo(u+e,f,u+e,f+l);"center"===s&&"right"===c&&this.drawCaret(n,t,i,r);t.lineTo(u+e,f+o-v);t.quadraticCurveTo(u+e,f+o,u+e-v,f+o);"bottom"===s&&this.drawCaret(n,t,i,r);t.lineTo(u+a,f+o);t.quadraticCurveTo(u,f+o,u,f+o-a);"center"===s&&"left"===c&&this.drawCaret(n,t,i,r);t.lineTo(u,f+h);t.quadraticCurveTo(u,f,u+h,f);t.closePath();t.fill();r.borderWidth>0&&t.stroke()}_updateAnimationTarget(n){const i=this.chart,t=this.$animations,r=t&&t.x,u=t&&t.y;if(r||u){const t=uu[n.position].call(this,this._active,this._eventPosition);if(!t)return;const o=this._size=vv(this,n),s=Object.assign({},t,this._size),f=yv(i,n,s),e=pv(n,s,f,i);r._to===e.x&&u._to===e.y||(this.xAlign=f.xAlign,this.yAlign=f.yAlign,this.width=o.width,this.height=o.height,this.caretX=t.x,this.caretY=t.y,this._resolveAnimations().update(this,e))}}_willRender(){return!!this.opacity}draw(n){const t=this.options.setContext(this.getContext());let i=this.opacity;if(i){this._updateAnimationTarget(t);const u={width:this.width,height:this.height},r={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const f=w(t.padding),e=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&e&&(n.save(),n.globalAlpha=i,this.drawBackground(r,n,u,t),ro(n,t.textDirection),r.y+=f.top,this.drawTitle(r,n,t),this.drawBody(r,n,t),this.drawFooter(r,n,t),uo(n,t.textDirection),n.restore())}}getActiveElements(){return this._active||[]}setActiveElements(n,t){const r=this._active,i=n.map(({datasetIndex:t,index:n})=>{const i=this.chart.getDatasetMeta(t);if(!i)throw new Error("Cannot find a dataset at index "+t);return{datasetIndex:t,element:i.data[n],index:n}}),u=!or(r,i),f=this._positionChanged(i,t);(u||f)&&(this._active=i,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(n,t,i=!0){if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const u=this.options,f=this._active||[],r=this._getActiveElements(n,f,t,i),o=this._positionChanged(r,n),e=t||!or(r,f)||o;return e&&(this._active=r,(u.enabled||u.external)&&(this._eventPosition={x:n.x,y:n.y},this.update(!0,t))),e}_getActiveElements(n,t,i,r){const u=this.options;if("mouseout"===n.type)return[];if(!r)return t.filter(n=>this.chart.data.datasets[n.datasetIndex]&&void 0!==this.chart.getDatasetMeta(n.datasetIndex).controller.getParsed(n.index));const f=this.chart.getElementsAtEventForMode(n,u.mode,u,i);return u.reverse&&f.reverse(),f}_positionChanged(n,t){const{caretX:r,caretY:u,options:f}=this,i=uu[f.position].call(this,n,t);return!1!==i&&(r!==i.x||u!==i.y)}}return fy={id:"tooltip",_element:tw,positioners:uu,afterInit(n,t,i){i&&(n.tooltip=new tw({chart:n,options:i}))},beforeUpdate(n,t,i){n.tooltip&&n.tooltip.initialize(i)},reset(n,t,i){n.tooltip&&n.tooltip.initialize(i)},afterDraw(n){const t=n.tooltip;if(t&&t._willRender()){const i={tooltip:t};if(!1===n.notifyPlugins("beforeTooltipDraw",{...i,cancelable:!0}))return;t.draw(n.ctx);n.notifyPlugins("afterTooltipDraw",i)}},afterEvent(n,t){if(n.tooltip){const i=t.replay;n.tooltip.handleEvent(t.event,i,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,t)=>t.bodyFont.size,boxWidth:(n,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:nw},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>"filter"!==n&&"itemSort"!==n&&"external"!==n,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},l.register(es,os,hf,kv),l.helpers={...dv},l._adapters=fs,l.Animation=sp,l.Animations=bs,l.animator=rt,l.controllers=tt.controllers.items,l.DatasetController=bt,l.Element=ct,l.elements=hf,l.Interaction=rs,l.layouts=y,l.platforms=us,l.Scale=vi,l.Ticks=ir,Object.assign(l,es,os,hf,kv,us),l.Chart=l,"undefined"!=typeof window&&(window.Chart=l),l});const apiInput=document.getElementById("apiInput"),intervalInput=document.getElementById("intervalInput"),maxPointsInput=document.getElementById("maxPointsInput"),statusEl=document.getElementById("status"),startBtn=document.getElementById("startBtn"),stopBtn=document.getElementById("stopBtn");let API_URL=apiInput.value,intervalMs=Number(intervalInput.value)||2e3,maxPoints=Number(maxPointsInput.value)||60,timer=null,running=!1;const tempCtx=document.getElementById("tempChart").getContext("2d"),humCtx=document.getElementById("humChart").getContext("2d"),presCtx=document.getElementById("presChart").getContext("2d"),tempChart=new Chart(tempCtx,{type:"line",data:{labels:[],datasets:[ds("sht31","rgb(255,99,132)"),ds("aht20","rgb(54,162,235)"),ds("bmp280","rgb(75,192,192)"),]},options:{animation:!1,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{title:{display:!1,text:"°C"}}}}}),humChart=new Chart(humCtx,{type:"line",data:{labels:[],datasets:[ds("sht31","rgb(255,159,64)"),ds("aht20","rgb(153,102,255)"),]},options:{animation:!1,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{title:{display:!1,text:"%"}}}}}),presChart=new Chart(presCtx,{type:"line",data:{labels:[],datasets:[ds("bmp280","rgb(54,162,100)")]},options:{animation:!1,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{title:{display:!1,text:"гПа"}}}}});startBtn.addEventListener("click",start);stopBtn.addEventListener("click",stop);apiInput.addEventListener("change",()=>{API_URL=apiInput.value});intervalInput.addEventListener("change",()=>{intervalMs=Number(intervalInput.value)||2e3,running&&(clearInterval(timer),timer=setInterval(fetchAndUpdate,intervalMs))});maxPointsInput.addEventListener("change",()=>{maxPoints=Number(maxPointsInput.value)||60,[tempChart,humChart,presChart].forEach(n=>{n.data.labels.length>maxPoints&&(n.data.labels=n.data.labels.slice(-maxPoints)),n.data.datasets.forEach(n=>{n.data.length>maxPoints&&(n.data=n.data.slice(-maxPoints))}),n.update("none")})});start()</script><style>body{font-family:Arial,sans-serif;margin:16px;background:#f7f7f7} .controls{display:flex;gap:8px;flex-wrap:wrap;align-items:center;margin-bottom:12px} button{padding:6px 10px} .grid{display:grid;grid-template-columns:1fr 1fr;gap:16px} .card{background:#fff;border:1px solid #e6e6e6;padding:12px;border-radius:6px;min-height:340px} canvas{width:100%!important;height:300px!important} .grid{grid-template-columns:1fr}</style>
)rawliteral";
 
